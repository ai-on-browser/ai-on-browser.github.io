var a=Object.defineProperty;var d=(c,n)=>a(c,"name",{value:n,configurable:!0});export default class m{static{d(this,"KDEOS")}constructor(n,f,s="gaussian"){this._kmin=n,this._kmax=f,this._e=1/0,this._phi=.1,typeof s=="function"?this._kernel=s:(typeof s=="string"&&(s={name:s}),s.name==="gaussian"?this._kernel=(r,_,h)=>Math.exp(-(r**2)/(2*_**2))/(_*Math.sqrt(2*Math.PI))**h:this._kernel=(r,_,h)=>3*(1-(r/_)**2)/(4*_**h))}_distance(n,f){return Math.sqrt(n.reduce((s,r,_)=>s+(r-f[_])**2,0))}_cdf(n){return 1/(1+Math.exp(-1.7*n))}predict(n){const f=n.length,s=[];for(let t=0;t<f;t++){s[t]=[],s[t][t]={d:0,i:t};for(let i=0;i<t;i++){const o=this._distance(n[t],n[i]);s[t][i]={d:o,i},s[i][t]={d:o,i:t}}}for(let t=0;t<f;t++)s[t].sort((i,o)=>i.d-o.d);const r=[],_=n[0].length;for(let t=0;t<f;t++){r[t]=[];for(let i=this._kmin;i<=this._kmax;i++){let o=0;for(let e=0;e<i;e++)o+=s[t][e+1].d;const l=Math.min(o/i,this._e);r[t][i]=0;for(let e=0;e<i;e++)r[t][i]+=this._kernel(s[t][e+1].d,l,_)}}const h=[];for(let t=0;t<f;t++){h[t]=0;for(let i=this._kmin;i<=this._kmax;i++){let o=0;for(let e=0;e<i;e++)o+=r[s[t][e+1].i][i];o/=i;let l=0;for(let e=0;e<i;e++)l+=(r[s[t][e+1].i][i]-o)**2;l=Math.sqrt(l/i),h[t]+=(o-r[t][i])/l}h[t]/=this._kmax-this._kmin+1}for(let t=0;t<f;t++)h[t]=1-this._cdf(h[t]),h[t]=this._phi*(1-h[t])/(this._phi+h[t]);return h}}
