export default class LOF{constructor(t){this._k=t}_distance(t,e){return Math.sqrt(t.reduce(((t,s,c)=>t+(s-e[c])**2),0))}predict(t){const e=[],s=[];for(let c=0;c<t.length;c++){e[c]=[],s[c]=[],e[c][c]=0,s[c][c]=[0,c];for(let r=0;r<c;r++){const o=this._distance(t[c],t[r]);e[c][r]=e[r][c]=o,s[c][r]=[o,r],s[r][c]=[o,c]}}s.forEach((t=>t.sort(((t,e)=>t[0]-e[0]))));const c=[];for(let r=0;r<t.length;r++){const t=s[r].slice(1,1+this._k);c[r]=this._k/t.reduce(((t,c)=>t+Math.max(s[c[1]][this._k][0],e[r][c[1]])),0)}const r=[];for(let e=0;e<t.length;e++){const t=s[e].slice(1,1+this._k);r[e]=t.reduce(((t,e)=>t+c[e[1]]),0)/this._k/c[e]}return r}}