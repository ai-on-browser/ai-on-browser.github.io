export default class LOF{constructor(t){this._k=t}set k(t){this._k=t}_distance(t,s){return Math.sqrt(t.reduce(((t,e,r)=>t+(e-s[r])**2),0))}predict(t){const s=[],e=[];for(let r=0;r<t.length;r++){s[r]=[],e[r]=[],s[r][r]=0,e[r][r]=[0,r];for(let c=0;c<r;c++){const h=this._distance(t[r],t[c]);s[r][c]=s[c][r]=h,e[r][c]=[h,c],e[c][r]=[h,r]}}e.forEach((t=>t.sort(((t,s)=>t[0]-s[0]))));const r=t=>e[t].slice(1,1+this._k),c=t=>e[t][this._k][0],h=t=>1/(r(t).reduce(((e,r)=>e+((t,e)=>Math.max(c(e),s[t][e]))(t,r[1])),0)/this._k),i=t=>r(t).reduce(((t,s)=>t+h(s[1])),0)/this._k/h(t);return t.map(((t,s)=>i(s)))}}