export default class LOF{constructor(t){this._k=t}_distance(t,e){return Math.sqrt(t.reduce(((t,s,r)=>t+(s-e[r])**2),0))}predict(t){const e=[],s=[];for(let r=0;r<t.length;r++){e[r]=[],s[r]=[],e[r][r]=0,s[r][r]=[0,r];for(let c=0;c<r;c++){const h=this._distance(t[r],t[c]);e[r][c]=e[c][r]=h,s[r][c]=[h,c],s[c][r]=[h,r]}}s.forEach((t=>t.sort(((t,e)=>t[0]-e[0]))));const r=t=>s[t].slice(1,1+this._k),c=t=>s[t][this._k][0],h=t=>1/(r(t).reduce(((s,r)=>s+((t,s)=>Math.max(c(s),e[t][s]))(t,r[1])),0)/this._k),i=t=>r(t).reduce(((t,e)=>t+h(e[1])),0)/this._k/h(t);return t.map(((t,e)=>i(e)))}}