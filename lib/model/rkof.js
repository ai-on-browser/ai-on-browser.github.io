var x=Object.defineProperty;var p=(u,o)=>x(u,"name",{value:o,configurable:!0});export default class b{static{p(this,"RKOF")}constructor(o,r,e,i="gaussian"){this._k=o,this._h=r,this._alpha=e,this._s=1,typeof i=="function"?this._kernel=i:i==="gaussian"?this._kernel=n=>Math.exp(-n.reduce((l,_)=>l+_**2,0)/2)/Math.sqrt(2*Math.PI)**n.length:i==="epanechnikov"?this._kernel=n=>{const l=n.reduce((_,c)=>_+c**2,0);return l>1?0:(3/4)**n.length*(1-l)}:i==="volcano"&&(this._beta=1,this._kernel=n=>{const l=n.reduce((_,c)=>_+c**2,0);return l<=1?this._beta:this._beta*Math.exp(-l+1)})}_distance(o,r){return Math.sqrt(o.reduce((e,i,n)=>e+(i-r[n])**2,0))}predict(o){const r=o.length,e=[];for(let t=0;t<r;t++){e[t]=[],e[t][t]={d:0,i:t};for(let s=0;s<t;s++){const h=this._distance(o[t],o[s]);e[t][s]={d:h,i:s},e[s][t]={d:h,i:t}}}const i=[];let n=0;for(let t=0;t<r;t++)e[t].sort((s,h)=>s.d-h.d),i[t]=e[t][this._k+1].d,n+=Math.log(1/i[t]);n/=r;const l=Math.exp(n),_=this._h*l**this._alpha,c=[],a=[];for(let t=0;t<r;t++){c[t]=0,a[t]=1/0;for(let s=1;s<=this._k;s++){const h=_*i[e[t][s].i]**this._alpha,d=o[e[t][s].i].map((g,M)=>(o[t][M]-g)/h);c[t]+=this._kernel(d)/h**2,a[t]=Math.min(a[t],i[e[t][s].i])}c[t]/=this._k}const f=[];for(let t=0;t<r;t++){f[t]=0;let s=0;for(let h=1;h<=this._k;h++){const d=Math.exp(-((i[e[t][h].i]/a[t]-1)**2)/(2*this._s**2));f[t]+=d*c[e[t][h].i],s+=d}f[t]/=s}const k=[];for(let t=0;t<r;t++)c[t]===0?k[t]=1/0:k[t]=f[t]/c[t];return k}}
