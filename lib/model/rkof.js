var m=Object.defineProperty;var g=(u,o)=>m(u,"name",{value:o,configurable:!0});export default class b{static{g(this,"RKOF")}constructor(o,c,e,s="gaussian"){this._k=o,this._h=c,this._alpha=e,this._s=1,typeof s=="function"?this._kernel=s:(typeof s=="string"&&(s={name:s}),s.name==="gaussian"?this._kernel=n=>Math.exp(-n.reduce((r,l)=>r+l**2,0)/2)/Math.sqrt(2*Math.PI)**n.length:s.name==="epanechnikov"?this._kernel=n=>{const r=n.reduce((l,a)=>l+a**2,0);return r>1?0:(3/4)**n.length*(1-r)}:s.name==="volcano"&&(this._beta=s.beta??1,this._kernel=n=>{const r=n.reduce((l,a)=>l+a**2,0);return r<=1?this._beta:this._beta*Math.exp(-r+1)}))}_distance(o,c){return Math.sqrt(o.reduce((e,s,n)=>e+(s-c[n])**2,0))}predict(o){const c=o.length,e=[];for(let t=0;t<c;t++){e[t]=[],e[t][t]={d:0,i:t};for(let i=0;i<t;i++){const h=this._distance(o[t],o[i]);e[t][i]={d:h,i},e[i][t]={d:h,i:t}}}const s=[];let n=0;for(let t=0;t<c;t++)e[t].sort((i,h)=>i.d-h.d),s[t]=e[t][this._k+1].d,n+=Math.log(1/s[t]);n/=c;const r=Math.exp(n),l=this._h*r**this._alpha,a=[],_=[];for(let t=0;t<c;t++){a[t]=0,_[t]=1/0;for(let i=1;i<=this._k;i++){const h=l*s[e[t][i].i]**this._alpha,d=o[e[t][i].i].map((k,M)=>(o[t][M]-k)/h);a[t]+=this._kernel(d)/h**2,_[t]=Math.min(_[t],s[e[t][i].i])}a[t]/=this._k}const f=[];for(let t=0;t<c;t++){f[t]=0;let i=0;for(let h=1;h<=this._k;h++){const d=Math.exp(-((s[e[t][h].i]/_[t]-1)**2)/(2*this._s**2));f[t]+=d*a[e[t][h].i],i+=d}f[t]/=i}const p=[];for(let t=0;t<c;t++)a[t]===0?p[t]=1/0:p[t]=f[t]/a[t];return p}}
