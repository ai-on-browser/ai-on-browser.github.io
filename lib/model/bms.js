var o=Object.defineProperty;var r=(e,s)=>o(e,"name",{value:s,configurable:!0});const g={gaussian:r(e=>Math.exp(-e*e/2),"gaussian"),rectangular:r(e=>Math.abs(e)<=1?.5:0,"rectangular"),triangular:r(e=>Math.abs(e)<=1?1-Math.abs(e):0,"triangular"),epanechnikov:r(e=>Math.abs(e)<=1?3*(1-e**2)/4:0,"epanechnikov"),biweight:r(e=>Math.abs(e)<=1?.9375*(1-e**2)**2:0,"biweight"),triweight:r(e=>Math.abs(e)<=1?1.09375*(1-e**2)**3:0,"triweight")};export default class f{static{r(this,"BlurringMeanShift")}constructor(s,h,t="gaussian"){this._x=null,this._c=[],this._h=s,this._threshold=h,typeof t=="function"?this._kernel=t:(typeof t=="string"&&(t={name:t}),this._kernel=g[t.name])}get categories(){const s=this.predict();return[...new Set(s)]}get size(){const s=this.predict();return new Set(s).size}_distance(s,h){return Math.sqrt(s.reduce((t,i,n)=>t+(i-h[n])**2,0))}init(s){this._x=s,this._c=this._x.map(h=>[].concat(h))}predict(){let s=0;const h=[];for(let t=0;t<this._c.length;t++){let i=t;for(let n=0;n<t;n++)if(this._distance(this._c[t],this._c[n])<this._threshold){i=h[n];break}i===t&&s++,h[t]=i}return h}fit(){const s=[];for(let t=0;t<this._c.length;t++){s[t]=[],s[t][t]=this._kernel(this._distance(this._c[t],this._c[t])/this._h);for(let i=0;i<t;i++)s[t][i]=s[i][t]=this._kernel(this._distance(this._c[t],this._c[i])/this._h)}let h=!1;return this._c=this._c.map((t,i)=>{let n=0;const _=Array(t.length).fill(0);for(let a=0;a<this._c.length;a++){n+=s[i][a];for(let c=0;c<_.length;c++)_[c]+=this._c[a][c]*s[i][a]}const l=_.map(a=>a/n);return h||=t.some((a,c)=>a!==l[c]),l}),h}}
