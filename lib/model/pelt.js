var j=Object.defineProperty;var g=(a,f)=>j(a,"name",{value:f,configurable:!0});export default class b{static{g(this,"PELT")}constructor(f,u="rbf"){this._jump=1,this._min_size=1,this._penalty=f,this._k=f,typeof u=="function"?this._cost=u:u==="rbf"?this._cost=(()=>{const h=[];return(o,c,l)=>{if(h.length===0)for(let t=0;t<o.length;t++){h[t]=[];for(let e=0;e<t;e++)h[t][e]=Math.exp(-o[t].reduce((n,r,s)=>n+(r-o[e][s])**2,0))}let i=0;for(let t=c;t<l;t++)for(let e=c;e<t;e++)i-=h[t][e]*2;return i/(l-c)}})():u==="l1"?(this._min_size=2,this._cost=(h,o,c)=>{const l=h.slice(o,c),i=l[0].length;let t=0;for(let e=0;e<i;e++){const n=l.map(s=>s[e]);n.sort((s,_)=>s-_);const r=n.length%2===0?(n[n.length/2]+n[n.length/2-1])/2:n[(n.length-1)/2];for(let s=0;s<c-o;s++)t+=Math.abs(l[s][e]-r)}return t}):u==="l2"&&(this._cost=(h,o,c)=>{const l=h.slice(o,c),i=l[0].length;let t=0;for(let e=0;e<i;e++){const n=l.reduce((r,s)=>r+s[e],0)/l.length;for(let r=0;r<c-o;r++)t+=(l[r][e]-n)**2}return t})}predict(f){const u=f.length,h=[[0]];let o=[];const c=[];for(let i=0;i<u;i+=this._jump)i>=this._min_size&&c.push(i);c.push(u);for(const i of c){const t=Math.floor((i-this._min_size)/this._jump)*this._jump;o.push(t);let e=null,n=1/0;const r=[];for(const s of o){if(!h[s]){r.push(null);continue}const _=h[s].concat();_[i]=this._cost(f,s,i)+this._penalty;const p=_.reduce((m,d)=>m+d,0);p<n&&(e=_,n=p),r.push(_)}h[i]=e,o=o.filter((s,_)=>r[_]&&r[_].reduce((p,m)=>p+m,0)<=n+this._k)}this._partitions=h[u];const l=Array(f.length).fill(!1);return this._partitions.forEach((i,t)=>{t>0&&t<f.length&&(l[t]=!0)}),l}}
