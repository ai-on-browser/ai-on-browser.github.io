var g=Object.defineProperty;var p=(_,r)=>g(_,"name",{value:r,configurable:!0});export default class M{static{p(this,"PercentileAnormaly")}constructor(r,s="data"){this._percentile=r,this._distribution=s,this._thresholds=[]}fit(r){this._thresholds=[];const s=r,i=s.length;if(i<=0)return;const h=s[0].length;if(i===1){for(let t=0;t<h;t++)this._thresholds[t]=[s[0][t],s[0][t]];return}if(this._percentile===0){for(let t=0;t<h;t++)this._thresholds[t]=[-1/0,1/0];return}else if(this._percentile===.5){for(let t=0;t<h;t++)this._thresholds[t]=[0,0];return}const o=[];if(this._distribution==="data"){const t=(i-1)*this._percentile,n=[Math.floor(t),t-Math.floor(t),Math.ceil(t)],f=i-1-t,e=[Math.floor(f),f-Math.floor(f),Math.ceil(f)];for(let c=0;c<h;c++){const l=s.map(d=>d[c]);l.sort((d,a)=>d-a),o.push(l),this._thresholds[c]=[l[n[0]]+(l[n[2]]-l[n[0]])*n[1],l[e[0]]+(l[e[2]]-l[e[0]])*e[1]]}}else if(this._distribution==="normal"){const t=[0,.004,.008,.012,.016,.0199,.0239,.0279,.0319,.0359,.0398,.0438,.0478,.0517,.0557,.0596,.0636,.0675,.0714,.0753,.0793,.0832,.0871,.091,.0948,.0987,.1026,.1064,.1103,.1141,.1179,.1217,.1255,.1293,.1331,.1368,.1406,.1443,.148,.1517,.1554,.1591,.1628,.1664,.17,.1736,.1772,.1808,.1844,.1879,.1915,.195,.1985,.2019,.2054,.2088,.2123,.2157,.219,.2224,.2257,.2291,.2324,.2357,.2389,.2422,.2454,.2486,.2517,.2549,.258,.2611,.2642,.2673,.2704,.2734,.2764,.2794,.2823,.2852,.2881,.291,.2939,.2967,.2995,.3023,.3051,.3078,.3106,.3133,.3159,.3186,.3212,.3238,.3264,.3289,.3315,.334,.3365,.3389,.3413,.3438,.3461,.3485,.3508,.3531,.3554,.3577,.3599,.3621,.3643,.3665,.3686,.3708,.3729,.3749,.377,.379,.381,.383,.3849,.3869,.3888,.3907,.3925,.3944,.3962,.398,.3997,.4015,.4032,.4049,.4066,.4082,.4099,.4115,.4131,.4147,.4162,.4177,.4192,.4207,.4222,.4236,.4251,.4265,.4279,.4292,.4306,.4319,.4332,.4345,.4357,.437,.4382,.4394,.4406,.4418,.4429,.4441,.4452,.4463,.4474,.4484,.4495,.4505,.4515,.4525,.4535,.4545,.4554,.4564,.4573,.4582,.4591,.4599,.4608,.4616,.4625,.4633,.4641,.4649,.4656,.4664,.4671,.4678,.4686,.4693,.4699,.4706,.4713,.4719,.4726,.4732,.4738,.4744,.475,.4756,.4761,.4767,.4772,.4778,.4783,.4788,.4793,.4798,.4803,.4808,.4812,.4817,.4821,.4826,.483,.4834,.4838,.4842,.4846,.485,.4854,.4857,.4861,.4864,.4868,.4871,.4875,.4878,.4881,.4884,.4887,.489,.4893,.4896,.4898,.4901,.4904,.4906,.4909,.4911,.4913,.4916,.4918,.492,.4922,.4925,.4927,.4929,.4931,.4932,.4934,.4936,.4938,.494,.4941,.4943,.4945,.4946,.4948,.4949,.4951,.4952,.4953,.4955,.4956,.4957,.4959,.496,.4961,.4962,.4963,.4964,.4965,.4966,.4967,.4968,.4969,.497,.4971,.4972,.4973,.4974,.4974,.4975,.4976,.4977,.4977,.4978,.4979,.4979,.498,.4981,.4981,.4982,.4982,.4983,.4984,.4984,.4985,.4985,.4986,.4986,.4987,.4987,.4987,.4988,.4988,.4989,.4989,.4989,.499,.499];let n=.5;const f=.5-this._percentile;for(let e=0;e<t.length-1;e++)if(t[e]<=f&&f<t[e+1]){n=e*.01;break}for(let e=0;e<h;e++){const c=s.reduce((a,u)=>a+u[e],0)/i,l=s.reduce((a,u)=>a+(u[e]-c)**2,0)/i,d=Math.sqrt(l);this._thresholds[e]=[c-d*n,c+d*n]}}}predict(r){if(this._percentile===0)return Array(r.length).fill(!1);if(this._percentile===.5)return Array(r.length).fill(!0);const s=[];for(let i=0;i<r.length;i++){let h=!1;for(let o=0;o<this._thresholds.length;o++)h||=r[i][o]<this._thresholds[o][0]||this._thresholds[o][1]<r[i][o];s.push(h)}return s}}
