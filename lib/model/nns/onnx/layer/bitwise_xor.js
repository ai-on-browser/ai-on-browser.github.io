import{onnx as t}from"../onnx_exporter.js";const i=[t.TensorProto.DataType.INT8,t.TensorProto.DataType.INT16,t.TensorProto.DataType.INT32,t.TensorProto.DataType.INT64,t.TensorProto.DataType.UINT8,t.TensorProto.DataType.UINT16,t.TensorProto.DataType.UINT32,t.TensorProto.DataType.UINT64];export default{export(T,o,u){if(!Array.isArray(o.input))throw new Error(`Invalid attribute 'input' value ${o.input}.`);const p=T.getGraph(),n=new t.NodeProto;if(o.input.length===1){n.setOpType("Identity"),n.addInput(o.input[0]),n.addOutput(o.name),p.addNode(n);return}const r=[];for(const a of o.input)if(i.includes(u[a].type))r.push(a);else{const e=new t.NodeProto;e.setOpType("Cast"),e.addInput(a),e.addOutput(`${o.name}_${a}_cast`);const d=new t.AttributeProto;d.setName("to"),d.setType(t.AttributeProto.AttributeType.INT),d.setI(t.TensorProto.DataType.INT32),e.addAttribute(d),p.addNode(e),r.push(`${o.name}_${a}_cast`)}let s=r[0];for(let a=1;a<r.length-1;a++){const e=new t.NodeProto;e.setOpType("BitwiseXor"),e.addInput(s),e.addInput(r[a]),e.addOutput(s=`${o.name}_bitwisexor_${a-1}`),p.addNode(e)}return n.setOpType("BitwiseXor"),n.addInput(s),n.addInput(r.at(-1)),n.addOutput(o.name),p.addNode(n),{type:t.TensorProto.DataType.INT32}}};
