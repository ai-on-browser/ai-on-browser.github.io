import{onnx as o}from"../onnx_exporter.js";export default{export(s,e,i){if(!Array.isArray(e.input))throw new Error(`Invalid attribute 'input' value ${e.input}.`);const a=s.getGraph(),d=new o.NodeProto;if(e.input.length===1){d.setOpType("Identity"),d.addInput(e.input[0]),d.addOutput(e.name),a.addNode(d);return}const r=[];for(const n of e.input)if(i[n].type===o.TensorProto.DataType.BOOL)r.push(n);else{const t=new o.NodeProto;t.setOpType("Cast"),t.addInput(n),t.addOutput(`${e.name}_${n}_cast`);const u=new o.AttributeProto;u.setName("to"),u.setType(o.AttributeProto.AttributeType.INT),u.setI(o.TensorProto.DataType.BOOL),t.addAttribute(u),a.addNode(t),r.push(`${e.name}_${n}_cast`)}let p=r[0];for(let n=1;n<r.length-1;n++){const t=new o.NodeProto;t.setOpType("Or"),t.addInput(p),t.addInput(r[n]),p=`${e.name}_or_${n-1}`,t.addOutput(p),a.addNode(t)}return d.setOpType("Or"),d.addInput(p),d.addInput(r.at(-1)),d.addOutput(e.name),a.addNode(d),{type:o.TensorProto.DataType.BOOL}}};
