import{onnx as o}from"../onnx_exporter.js";export default{export(s,e,i){if(!Array.isArray(e.input))throw new Error(`Invalid attribute 'input' value ${e.input}.`);const a=s.getGraph(),d=new o.NodeProto;if(e.input.length===1){d.setOpType("Identity"),d.addInput(e.input[0]),d.addOutput(e.name),a.addNode(d);return}const r=[];for(const n of e.input)if(i[n].type===o.TensorProto.DataType.BOOL)r.push(n);else{const t=new o.NodeProto;t.setOpType("Cast"),t.addInput(n),t.addOutput(`${e.name}_${n}_cast`);const p=new o.AttributeProto;p.setName("to"),p.setType(o.AttributeProto.AttributeType.INT),p.setI(o.TensorProto.DataType.BOOL),t.addAttribute(p),a.addNode(t),r.push(`${e.name}_${n}_cast`)}let u=r[0];for(let n=1;n<r.length-1;n++){const t=new o.NodeProto;t.setOpType("Or"),t.addInput(u),t.addInput(r[n]),t.addOutput(u=e.name+`_or_${n-1}`),a.addNode(t)}return d.setOpType("Or"),d.addInput(u),d.addInput(r.at(-1)),d.addOutput(e.name),a.addNode(d),{type:o.TensorProto.DataType.BOOL}}};
