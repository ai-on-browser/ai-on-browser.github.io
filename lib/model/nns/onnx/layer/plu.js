import{onnx as e}from"../onnx_exporter.js";export default{export($,d){const a=new e.TensorProto;a.setName(`${d.name}_alpha`),a.setDataType(e.TensorProto.DataType.FLOAT),a.setDimsList([1]),a.setFloatDataList([d.alpha??.1]);const n=new e.TensorProto;n.setName(`${d.name}_c`),n.setDataType(e.TensorProto.DataType.FLOAT),n.setDimsList([1]),n.setFloatDataList([d.c??1]);const i=Array.isArray(d.input)?d.input[0]:d.input,u=new e.NodeProto;u.setOpType("Add"),u.addInput(i),u.addInput(`${d.name}_c`),u.addOutput(`${d.name}_lb_add`);const p=new e.NodeProto;p.setOpType("Mul"),p.addInput(`${d.name}_lb_add`),p.addInput(`${d.name}_alpha`),p.addOutput(`${d.name}_lb_mul`);const o=new e.NodeProto;o.setOpType("Sub"),o.addInput(`${d.name}_lb_mul`),o.addInput(`${d.name}_c`),o.addOutput(`${d.name}_lb`);const s=new e.NodeProto;s.setOpType("Sub"),s.addInput(i),s.addInput(`${d.name}_c`),s.addOutput(`${d.name}_ub_sub`);const _=new e.NodeProto;_.setOpType("Mul"),_.addInput(`${d.name}_ub_sub`),_.addInput(`${d.name}_alpha`),_.addOutput(`${d.name}_ub_mul`);const m=new e.NodeProto;m.setOpType("Add"),m.addInput(`${d.name}_ub_mul`),m.addInput(`${d.name}_c`),m.addOutput(`${d.name}_ub`);const r=new e.NodeProto;r.setOpType("Min"),r.addInput(i),r.addInput(`${d.name}_ub`),r.addOutput(`${d.name}_min`);const l=new e.NodeProto;l.setOpType("Max"),l.addInput(`${d.name}_min`),l.addInput(`${d.name}_lb`),l.addOutput(d.name);const t=$.getGraph();t.addInitializer(a),t.addInitializer(n),t.addNode(u),t.addNode(p),t.addNode(o),t.addNode(s),t.addNode(_),t.addNode(m),t.addNode(r),t.addNode(l)}};
