import{onnx as d}from"../onnx_exporter.js";export default{export(r,t){if(!Array.isArray(t.input))throw new Error(`Invalid attribute 'input' value ${t.input}.`);const u=r.getGraph(),p=new d.NodeProto;if(t.input.length===1){const a=new d.NodeProto;a.setOpType("Shape"),a.addInput(t.input[0]),a.addOutput(`${t.name}_shape`),u.addNode(a),p.setOpType("ConstantOfShape"),p.addInput(`${t.name}_shape`);const n=new d.TensorProto;n.setDataType(d.TensorProto.DataType.BOOL),n.setDimsList([1]),n.setInt32DataList([1]);const e=new d.AttributeProto;e.setName("value"),e.setType(d.AttributeProto.AttributeType.TENSOR),e.setT(n),p.addAttribute(e)}else if(t.input.length===2)p.setOpType("Less"),p.addInput(t.input[0]),p.addInput(t.input[1]);else{for(let n=0;n<t.input.length-1;n++){const e=new d.NodeProto;e.setOpType("Less"),e.addInput(t.input[n]),e.addInput(t.input[n+1]),e.addOutput(`${t.name}_lt_${n}`),u.addNode(e)}let a=`${t.name}_lt_0`;for(let n=1;n<t.input.length-2;n++){const e=new d.NodeProto;e.setOpType("And"),e.addInput(a),e.addInput(`${t.name}_lt_${n}`),a=`${t.name}_and_${n-1}`,e.addOutput(a),u.addNode(e)}p.setOpType("And"),p.addInput(a),p.addInput(`${t.name}_lt_${t.input.length-2}`)}return p.addOutput(t.name),u.addNode(p),{type:d.TensorProto.DataType.BOOL}}};
