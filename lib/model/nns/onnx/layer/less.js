import{onnx as a}from"../onnx_exporter.js";export default{export(r,t){if(!Array.isArray(t.input))throw new Error(`Invalid attribute 'input' value ${t.input}.`);const u=r.getGraph(),p=new a.NodeProto;if(t.input.length===1){const d=new a.NodeProto;d.setOpType("Shape"),d.addInput(t.input[0]),d.addOutput(`${t.name}_shape`),u.addNode(d),p.setOpType("ConstantOfShape"),p.addInput(`${t.name}_shape`);const n=new a.TensorProto;n.setDataType(a.TensorProto.DataType.BOOL),n.setDimsList([1]),n.setInt32DataList([1]);const e=new a.AttributeProto;e.setName("value"),e.setType(a.AttributeProto.AttributeType.TENSOR),e.setT(n),p.addAttribute(e)}else if(t.input.length===2)p.setOpType("Less"),p.addInput(t.input[0]),p.addInput(t.input[1]);else{for(let n=0;n<t.input.length-1;n++){const e=new a.NodeProto;e.setOpType("Less"),e.addInput(t.input[n]),e.addInput(t.input[n+1]),e.addOutput(`${t.name}_lt_${n}`),u.addNode(e)}let d=`${t.name}_lt_0`;for(let n=1;n<t.input.length-2;n++){const e=new a.NodeProto;e.setOpType("And"),e.addInput(d),e.addInput(`${t.name}_lt_${n}`),e.addOutput(d=`${t.name}_and_${n-1}`),u.addNode(e)}p.setOpType("And"),p.addInput(d),p.addInput(`${t.name}_lt_${t.input.length-2}`)}return p.addOutput(t.name),u.addNode(p),{type:a.TensorProto.DataType.BOOL}}};
