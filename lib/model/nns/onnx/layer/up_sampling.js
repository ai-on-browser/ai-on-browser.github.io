import{onnx as a}from"../onnx_exporter.js";export default{export(p,e,u){const r=Array.isArray(e.input)?e.input[0]:e.input,d=u[r].size,n=Array.isArray(e.size)?e.size:Array(d.length-2).fill(e.size);n.unshift(1),e.channel_dim==null||e.channel_dim===-1?n.push(1):e.channel_dim===1&&n.splice(1,0,1);const c=d.map((l,m)=>l==null?null:l*n[m]),s=new a.TensorProto;s.setName(`${e.name}_scale`),s.setDataType(a.TensorProto.DataType.FLOAT),s.setDimsList([n.length]),s.setFloatDataList(n);const t=new a.NodeProto;t.setOpType("Resize"),t.addInput(r),t.addInput(""),t.addInput(`${e.name}_scale`),t.addOutput(e.name);const i=new a.AttributeProto;i.setName("mode"),i.setType(a.AttributeProto.AttributeType.STRING),i.setS(new TextEncoder().encode("nearest")),t.addAttribute(i);const o=p.getGraph();return o.addInitializer(s),o.addNode(t),{size:c}}};
