import{onnx as n}from"../onnx_exporter.js";import{getConstNodeName as m}from"../utils.js";export default{export(r,e){const i=m(r,0),_=m(r,1),a=new n.TensorProto;a.setName(`${e.name}_a`),a.setDataType(n.TensorProto.DataType.FLOAT),a.setDimsList([1]),a.setFloatDataList([e.a??.25]);const u=Array.isArray(e.input)?e.input[0]:e.input,p=new n.NodeProto;p.setOpType("Tanh"),p.addInput(u),p.addOutput(`${e.name}_tanh`);const d=new n.NodeProto;d.setOpType("Less"),d.addInput(u),d.addInput(i),d.addOutput(`${e.name}_less`);const t=new n.NodeProto;t.setOpType("Where"),t.addInput(`${e.name}_less`),t.addInput(`${e.name}_a`),t.addInput(_),t.addOutput(`${e.name}_where`);const s=new n.NodeProto;s.setOpType("Mul"),s.addInput(`${e.name}_tanh`),s.addInput(`${e.name}_where`),s.addOutput(e.name);const o=r.getGraph();o.addInitializer(a),o.addNode(p),o.addNode(d),o.addNode(t),o.addNode(s)}};
