import{onnx as n}from"../onnx_exporter.js";export default{export(x,t,c){const d=x.getGraph(),u=Array.isArray(t.input)?t.input[0]:t.input,e=new n.NodeProto;e.setOpType("ReduceMin"),e.addInput(u),e.addOutput(t.name);const p=t.keepdims??!0?1:0,a=new n.AttributeProto;a.setName("keepdims"),a.setType(n.AttributeProto.AttributeType.INT),a.setI(p),e.addAttribute(a),d.addNode(e);const o=c[u].size.concat();if(typeof t.axis=="string")throw new Error("Unsupported axis type string");if(t.axis==null||typeof t.axis=="number"&&t.axis<0)return{size:p?Array(o.length).fill(1):[]};const s=Array.isArray(t.axis)?t.axis:[t.axis],i=new n.TensorProto;if(i.setName(t.name+"_axis"),i.setDataType(n.TensorProto.DataType.INT64),i.setDimsList([s.length]),i.setInt64DataList(s),d.addInitializer(i),e.addInput(t.name+"_axis"),s.sort((r,m)=>m-r),p)for(const r of s)o[r]=1;else for(const r of s)o.splice(r,1);return{size:o}}};
