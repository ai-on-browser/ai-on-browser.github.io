import{onnx as d}from"../onnx_exporter.js";export default{export(s,e,i){if(!Array.isArray(e.input))throw new Error(`Invalid attribute 'input' value ${e.input}.`);const a=s.getGraph(),o=new d.NodeProto;if(e.input.length===1){o.setOpType("Identity"),o.addInput(e.input[0]),o.addOutput(e.name),a.addNode(o);return}const r=[];for(const n of e.input)if(i[n].type===d.TensorProto.DataType.BOOL)r.push(n);else{const t=new d.NodeProto;t.setOpType("Cast"),t.addInput(n),t.addOutput(`${e.name}_${n}_cast`);const p=new d.AttributeProto;p.setName("to"),p.setType(d.AttributeProto.AttributeType.INT),p.setI(d.TensorProto.DataType.BOOL),t.addAttribute(p),a.addNode(t),r.push(`${e.name}_${n}_cast`)}let u=r[0];for(let n=1;n<r.length-1;n++){const t=new d.NodeProto;t.setOpType("Xor"),t.addInput(u),t.addInput(r[n]),t.addOutput(u=e.name+`_xor_${n-1}`),a.addNode(t)}return o.setOpType("Xor"),o.addInput(u),o.addInput(r.at(-1)),o.addOutput(e.name),a.addNode(o),{type:d.TensorProto.DataType.BOOL}}};
