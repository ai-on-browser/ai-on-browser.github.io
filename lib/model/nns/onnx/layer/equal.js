import{onnx as d}from"../onnx_exporter.js";export default{export(r,t){if(!Array.isArray(t.input))throw new Error(`Invalid attribute 'input' value ${t.input}.`);const u=r.getGraph(),a=new d.NodeProto;if(t.input.length===1){const p=new d.NodeProto;p.setOpType("Shape"),p.addInput(t.input[0]),p.addOutput(`${t.name}_shape`),u.addNode(p),a.setOpType("ConstantOfShape"),a.addInput(`${t.name}_shape`);const n=new d.TensorProto;n.setDataType(d.TensorProto.DataType.BOOL),n.setDimsList([1]),n.setInt32DataList([1]);const e=new d.AttributeProto;e.setName("value"),e.setType(d.AttributeProto.AttributeType.TENSOR),e.setT(n),a.addAttribute(e)}else if(t.input.length===2)a.setOpType("Equal"),a.addInput(t.input[0]),a.addInput(t.input[1]);else{for(let n=0;n<t.input.length-1;n++){const e=new d.NodeProto;e.setOpType("Equal"),e.addInput(t.input[n]),e.addInput(t.input[n+1]),e.addOutput(`${t.name}_eq_${n}`),u.addNode(e)}let p=`${t.name}_eq_0`;for(let n=1;n<t.input.length-2;n++){const e=new d.NodeProto;e.setOpType("And"),e.addInput(p),e.addInput(`${t.name}_eq_${n}`),p=`${t.name}_and_${n-1}`,e.addOutput(p),u.addNode(e)}a.setOpType("And"),a.addInput(p),a.addInput(`${t.name}_eq_${t.input.length-2}`)}return a.addOutput(t.name),u.addNode(a),{type:d.TensorProto.DataType.BOOL}}};
