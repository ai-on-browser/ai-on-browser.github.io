import{onnx as p}from"../onnx_exporter.js";export default{export(c,e,r){const d=Array.isArray(e.input)?e.input[0]:e.input,o=r[d].size,t=typeof e.size=="string"?r[e.size].size:e.size;(t.length===1||o.slice(1).reduce((a,i)=>a*i,1)===t.reduce((a,i)=>a*i,1))&&t.unshift(o[0]);const s=new p.TensorProto;s.setName(`${e.name}_shape`),s.setDataType(p.TensorProto.DataType.INT64),s.setDimsList([t.length]),s.setInt64DataList(t.map(a=>a??-1));const n=new p.NodeProto;n.setOpType("Reshape"),n.addInput(d),n.addInput(`${e.name}_shape`),n.addOutput(e.name);const u=c.getGraph();return u.addInitializer(s),u.addNode(n),{size:t}}};
