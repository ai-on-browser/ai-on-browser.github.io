import{onnx as r}from"../onnx_exporter.js";import"../utils.js";export default{export(m,e,p){const o=Array.isArray(e.input)?e.input[0]:e.input,d=p[o].size,t=typeof e.size=="string"?p[e.size].size:e.size;(t.length===1||d.slice(1).reduce((a,i)=>a*i,1)===t.reduce((a,i)=>a*i,1))&&t.unshift(d[0]);const s=new r.TensorProto;s.setName(e.name+"_shape"),s.setDataType(r.TensorProto.DataType.INT64),s.setDimsList([t.length]),s.setInt64DataList(t.map(a=>a??-1));const n=new r.NodeProto;n.setOpType("Reshape"),n.addInput(o),n.addInput(e.name+"_shape"),n.addOutput(e.name);const u=m.getGraph();return u.addInitializer(s),u.addNode(n),{size:t}}};
