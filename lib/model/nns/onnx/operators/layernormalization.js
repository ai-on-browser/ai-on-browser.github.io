import{onnx}from"../onnx_importer.js";import{loadTensor,loadAttribute}from"../utils.js";export default{import(t,e){const n={axis:-1,epsilon:1e-5};for(const t of e.getAttributeList())n[t.getName()]=loadAttribute(t);const o=e.getInputList(),i={};for(const e of t.getGraph().getInitializerList())e.getName()===o[1]?i.scale=loadTensor(e):e.getName()===o[2]&&(i.b=loadTensor(e));const s=e.getOutputList(),a=[{type:"layer_normalization",input:[o[0]],name:s[0],scale:i.scale??o[1],offset:i.b??o[2],epsilon:n.epsilon??1e-5,axis:n.axis}];return s.length>=2&&a.push({type:"identity",input:[`${s[0]}[mean]`],name:s[1]}),s.length>=3&&a.push({type:"identity",input:[`${s[0]}[invStdDev]`],name:s[2]}),a}};