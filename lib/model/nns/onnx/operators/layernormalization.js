import"../onnx_importer.js";import{loadTensor as r,loadAttribute as l}from"../utils.js";export default{import(p,s){const o={axis:-1,epsilon:1e-5};for(const e of s.getAttributeList())o[e.getName()]=l(e);const i=s.getInputList(),n={};for(const e of p.getGraph().getInitializerList())e.getName()===i[1]?n.scale=r(e):e.getName()===i[2]&&(n.b=r(e));const t=s.getOutputList(),a=[{type:"layer_normalization",input:[i[0]],name:t[0],scale:n.scale??i[1],offset:n.b??i[2],epsilon:o.epsilon??1e-5,axis:o.axis}];return t.length>=2&&a.push({type:"identity",input:[`${t[0]}[mean]`],name:t[1]}),t.length>=3&&a.push({type:"identity",input:[`${t[0]}[invStdDev]`],name:t[2]}),a}};
