import{onnx}from"../onnx_importer.js";import{loadTensor,loadAttribute}from"../utils.js";export default{import(t,e){const n={epsilon:1e-5,momentum:.9,training_mode:0};for(const t of e.getAttributeList())n[t.getName()]=loadAttribute(t);const o=e.getInputList(),i={};for(const e of t.getGraph().getInitializerList())e.getName()===o[1]?i.scale=loadTensor(e):e.getName()===o[2]?i.b=loadTensor(e):e.getName()===o[3]?i.inputMean=loadTensor(e):e.getName()===o[4]&&(i.inputVar=loadTensor(e));if(n.training_mode)throw new Error(`Invalid attribute 'training_mode' value ${n.training_mode}.`);return[{type:"batch_normalization",input:[o[0]],name:e.getOutputList()[0],scale:i.scale??o[1],offset:i.b??o[2],epsilon:n.epsilon??1e-5,input_mean:i.b??o[3],input_var:i.b??o[4],channel_dim:1}]}};