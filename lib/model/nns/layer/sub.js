import Layer from"./base.js";import Matrix from"../../../util/matrix.js";export default class SubLayer extends Layer{calc(...e){this._sizes=e.map((e=>e.sizes));let r=e[0].copy();for(let t=1;t<e.length;t++)r.sub(e[t]);return r}grad(e){const r=Matrix.map(e,(e=>-e));return this._sizes.map(((t,s)=>{const a=0===s?e:r;if(a.sizes.map(((e,r)=>e/t[r])).every((e=>1===e)))return a;const i=Matrix.zeros(t[0],t[1]);for(let e=0;e<a.sizes[0];e++)for(let r=0;r<a.sizes[1];r++)i.addAt(e%t[0],r%t[1],a.at(e,r));return i}))}}SubLayer.registLayer();