var o=Object.defineProperty;var a=(s,t)=>o(s,"name",{value:t,configurable:!0});import _ from"./base.js";import h from"../../../util/matrix.js";export default class e extends _{static{a(this,"SparseLayer")}constructor({rho:t,beta:r,...i}){super(i),this._rho=t,this._beta=r}bind({rho:t}){this._rho=t||this._rho}calc(t){return this._rho_hat=t.mean(0),t}grad(t){const r=h.div(-this._rho,this._rho_hat);return r.add(h.div(1-this._rho,h.sub(1,this._rho_hat))),r.mult(this._beta),h.add(t,r)}toObject(){return{type:"sparsity",rho:this._rho,beta:this._beta}}}e.registLayer("sparsity");
