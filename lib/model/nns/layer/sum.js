import Layer from"./base.js";import Matrix from"../../../util/matrix.js";export default class SumLayer extends Layer{constructor({axis:t=-1,...r}){super(r),this._axis=t}calc(t){return this._i=t,this._axis<0?new Matrix(1,1,t.reduce(((t,r)=>t+r),0)):t.reduce(((t,r)=>t+r),0,this._axis,!0)}grad(t){if(this._axis<0){const r=this._i.copy();return r.fill(t.toScaler()),r}const r=this._i.copy();return r.broadcastOperate(t,((t,r)=>r)),r}toObject(){return{type:"sum",axis:this._axis}}}SumLayer.registLayer();