var c=Object.defineProperty;var a=(e,r)=>c(e,"name",{value:r,configurable:!0});import l from"./base.js";import n from"../../../util/tensor.js";export default class o extends l{static{a(this,"RandomTranslationReLULayer")}constructor({...r}){super(r),this._r=null,this._training=!1}bind({training:r}){this._training=r}calc(r){this._i=r;const s=r.copy();return this._training?(this._r=n.randn(r.sizes.slice(1)),s.map((t,i)=>Math.max(0,t+this._r.at(i.slice(1))))):(this._r=n.zeros(r.sizes.slice(1)),s.map(t=>t>0?t:0)),s}grad(r){const s=r.copy();return s.map((t,i)=>this._i.at(i)+this._r.at(i.slice(1))>0?t:0),s}}o.registLayer("rtrelu");
