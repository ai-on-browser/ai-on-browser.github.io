var r=Object.defineProperty;var o=(l,n)=>r(l,"name",{value:n,configurable:!0});export default class f{static{o(this,"HartiganWongKMeans")}constructor(n){this._k=n,this._c=null,this._n=null,this._d=(i,t)=>Math.sqrt(i.reduce((s,c,h)=>s+(c-t[h])**2,0))}get centroids(){return this._c}init(n){this._x=n;const i=this._x.length;this._p=[],this._c=[],this._n=Array(this._k).fill(0);for(let t=0;t<i;t++){if(this._c.length<this._k){this._p[t]=this._c.length,this._c.push(this._x[t].concat()),this._n[this._p[t]]++;continue}else{this._p[t]=Math.floor(Math.random()*this._k);for(let s=0;s<this._x[t].length;s++)this._c[this._p[t]][s]+=this._x[t][s]}this._n[this._p[t]]++}for(let t=0;t<this._k;t++)this._c[t]=this._c[t].map(s=>s/this._n[t])}fit(){const n=this._x.length;for(let i=0;i<n;i++){const t=this._p[i],s=this._n[t]/(this._n[t]-1)*this._d(this._x[i],this._c[t])**2;let c=0,h=-1;for(let _=0;_<this._k;_++){if(t===_)continue;const e=s-this._n[_]/(this._n[_]+1)*this._d(this._x[i],this._c[_])**2;e>c&&(c=e,h=_)}h>=0&&(this._c[t]=this._c[t].map((_,e)=>(this._n[t]*_-this._x[i][e])/(this._n[t]-1)),this._n[t]--,this._c[h]=this._c[h].map((_,e)=>(this._n[h]*_+this._x[i][e])/(this._n[h]+1)),this._n[h]++,this._p[i]=h)}}predict(n){const i=[];for(let t=0;t<n.length;t++){let s=1/0;i[t]=-1;for(let c=0;c<this._c.length;c++){const h=this._d(n[t],this._c[c]);h<s&&(s=h,i[t]=c)}}return i}}
