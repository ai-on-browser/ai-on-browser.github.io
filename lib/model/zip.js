var n=Object.defineProperty;var o=(_,e)=>n(_,"name",{value:e,configurable:!0});export default class p{static{o(this,"ZeroInflatedPoisson")}constructor(){this._method="ml"}fit(e){this._method==="mo"?this._mo(e):this._ml(e)}_mo(e){const t=e.reduce((i,h)=>i+h,0)/e.length,s=e.reduce((i,h)=>i+(h-t)**2,0)/e.length;this._l=(s+t**2)/t-1,this._pi=(s-t)/(s+t**2-t)}_lambert_w(e){if(e===0)return 0;let t=0;for(let s=0;s<20;s++)t=t-(t*Math.exp(t)-e)/(Math.exp(t)*(t+1)-(t+2)*(t*Math.exp(t)-e)/(2*t+2));return t}_ml(e){const t=e.length,s=e.reduce((l,r)=>l+(r===0?1:0),0),i=e.reduce((l,r)=>l+r,0)/t,h=i/(1-s/t);this._l=this._lambert_w(-h*Math.exp(-h))+h,this._pi=1-i/this._l}probability(e){return e.map(t=>{if(t===0)return this._pi+(1-this._pi)*Math.exp(-this._l);{let s=1;for(let i=2;i<=t;i++)s*=i;return(1-this._pi)*this._l**t*Math.exp(-this._l)/s}})}}
