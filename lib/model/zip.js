var n=Object.defineProperty;var _=(o,e)=>n(o,"name",{value:e,configurable:!0});export default class m{static{_(this,"ZeroInflatedPoisson")}constructor(e="maximum_likelihood"){this._method=e}fit(e){this._method==="moments"?this._mo(e):this._ml(e)}_mo(e){const t=e.reduce((s,h)=>s+h,0)/e.length,i=e.reduce((s,h)=>s+(h-t)**2,0)/e.length;this._l=(i+t**2)/t-1,this._pi=(i-t)/(i+t**2-t)}_lambert_w(e){if(e===0)return 0;let t=0;for(let i=0;i<20;i++)t=t-(t*Math.exp(t)-e)/(Math.exp(t)*(t+1)-(t+2)*(t*Math.exp(t)-e)/(2*t+2));return t}_ml(e){const t=e.length,i=e.reduce((l,r)=>l+(r===0?1:0),0),s=e.reduce((l,r)=>l+r,0)/t,h=s/(1-i/t);this._l=this._lambert_w(-h*Math.exp(-h))+h,this._pi=1-s/this._l}probability(e){return e.map(t=>{if(t===0)return this._pi+(1-this._pi)*Math.exp(-this._l);{let i=1;for(let s=2;s<=t;s++)i*=s;return(1-this._pi)*this._l**t*Math.exp(-this._l)/i}})}}
