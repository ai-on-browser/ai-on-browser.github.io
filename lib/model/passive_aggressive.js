export default class PA{constructor(t=0){this._c=.1,this._v=t,this._w=null,this._w0=0}update(t,s){const h=this._w.reduce(((s,h,i)=>s+h*t[i]),this._w0);if(s*h>=1)return;const i=Math.max(0,1-s*h),e=t.reduce(((t,s)=>t+s**2),1);let _=0;0===this._v?_=i/e:1===this._v?_=Math.min(this._c,i/e):2===this._v&&(_=i/(e+1/(2*this._c)));for(let h=0;h<this._w.length;h++)this._w[h]+=_*s*t[h];this._w0+=_*s}fit(t,s){this._w||(this._w=Array(t[0].length).fill(0),this._w0=0);for(let h=0;h<t.length;h++)this.update(t[h],s[h])}predict(t){const s=[];for(let h=0;h<t.length;h++){const i=t[h].reduce(((t,s,h)=>t+s*this._w[h]),this._w0);s[h]=i<=0?-1:1}return s}}