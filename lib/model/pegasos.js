var p=Object.defineProperty;var l=(c,t)=>p(c,"name",{value:t,configurable:!0});export default class u{static{l(this,"Pegasos")}constructor(t,i=1){this._r=t,this._k=i,this._itr=100,this._do_projection=!1}init(t,i){this._x=t,this._y=i,this._t=0,this._w=Array(this._x[0].length).fill(0),this._b=0}update(t,i){this._t++;const h=1/(this._r*this._t),r=t.length,e=Array(this._w.length).fill(0);let o=0;for(let s=0;s<r;s++)if(t[s].reduce((_,a,f)=>_+a*this._w[f],0)+this._b<1){for(let _=0;_<t[s].length;_++)e[_]+=i[s]*t[s][_];o+=i[s]}if(this._w=this._w.map((s,n)=>(1-h*this._r)*s+h*e[n]/r),this._b=(1-h*this._r)*this._b+h*o/r,this._do_projection){const s=1/(Math.sqrt(this._r)*Math.sqrt(this._w.reduce((n,_)=>n+_**_,this._b**2)));s<1&&(this._w=this._w.map(n=>n*s),this._b*=s)}}fit(){const t=this._x.length;for(let i=0;i<this._itr;i++){const h=[],r=[];for(let e=0;e<this._k;e++){const o=Math.floor(Math.random()*t);h.push(this._x[o]),r.push(this._y[o])}this.update(h,r)}}predict(t){const i=[];for(let h=0;h<t.length;h++){const r=t[h].reduce((e,o,s)=>e+o*this._w[s],0);i.push(r+this._b<=0?-1:1)}return i}}
