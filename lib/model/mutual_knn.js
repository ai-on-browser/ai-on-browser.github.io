var _=Object.defineProperty;var g=(u,s)=>_(u,"name",{value:s,configurable:!0});export default class d{static{g(this,"MutualKNN")}constructor(s=5){this._p=[],this._k=s}get size(){const s=this.predict();return new Set(s).size}_d(s,r){return Math.sqrt(s.reduce((i,n,h)=>i+(n-r[h])**2,0))}fit(s){const r=s.length,i=[];for(let t=0;t<r;t++){i[t]=[],i[t][t]=0;for(let e=0;e<t;e++)i[t][e]=i[e][t]=this._d(s[t],s[e])}const n=[];for(let t=0;t<r;t++){const e=i[t].map((o,f)=>[o,f]);e.sort((o,f)=>o[0]-f[0]);const l=e.slice(1,this._k+1);n[t]=Array(r).fill(!1);for(let o=0;o<l.length;o++)n[t][l[o][1]]=!0}const h=[];for(let t=0;t<r;t++){h[t]=Array(r).fill(!1);for(let e=0;e<t;e++)n[t][e]&&n[e][t]&&(h[t][e]=h[e][t]=!0)}const c=[];for(let t=0;t<r;t++)c.push(t);const p=[];let a=0;for(;c.length>0;){const t=[c.shift()];for(;t.length>0;){const e=t.pop();p[e]=a;for(let l=c.length-1;l>=0;l--)h[e][c[l]]&&(t.push(c[l]),c.splice(l,1))}a++}this._c=p}predict(){return this._c}}
