export default class VotedPerceptron{constructor(t=1){this._r=t,this._v=[],this._b=[],this._c=[]}fit(t,h){for(let s=0;s<t.length;s++){if(0===this._v.length){this._v.push(t[s].map((t=>this._r*h[s]*t))),this._b.push(this._r*h[s]),this._c.push(1);continue}const i=this._v[this._v.length-1];(t[s].reduce(((t,h,s)=>t+h*i[s]),0)+this._b[this._b.length-1]<0?-1:1)===h[s]?this._c[this._c.length-1]++:(this._v.push(t[s].map(((t,_)=>i[_]+this._r*h[s]*t))),this._b.push(this._b[this._b.length-1]+this._r*h[s]),this._c.push(1))}}predict(t){const h=[];for(let s=0;s<t.length;s++){let i=0;for(let h=0;h<this._v.length;h++)i+=this._c[h]*(t[s].reduce(((t,s,i)=>t+s*this._v[h][i]),0)+this._b[h]<0?-1:1);h[s]=i<0?-1:1}return h}}