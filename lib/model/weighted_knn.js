var w=Object.defineProperty;var n=(b,r)=>w(b,"name",{value:r,configurable:!0});export default class o{static{n(this,"WeightedKNN")}constructor(r,_="euclid",h="gaussian"){if(this._k=r,this._metric=_,typeof this._metric=="function")this._d=this._metric;else switch(this._metric){case"euclid":this._d=(t,a)=>Math.sqrt(t.reduce((e,i,s)=>e+(i-a[s])**2,0));break;case"manhattan":this._d=(t,a)=>t.reduce((e,i,s)=>e+Math.abs(i-a[s]),0);break;case"chebyshev":this._d=(t,a)=>Math.max(...t.map((e,i)=>Math.abs(e-a[i])));break;case"minkowski":this._dp=2,this._d=(t,a)=>Math.pow(t.reduce((e,i,s)=>e+(i-a[s])**this._dp,0),1/this._dp);break}switch(this._weight=h,this._weight){case"gaussian":this._w=t=>Math.exp(-(t**2)/2);break;case"rectangular":this._w=t=>Math.abs(t)>1?0:.5;break;case"triangular":this._w=t=>Math.abs(t)>1?0:1-Math.abs(t);break;case"epanechnikov":this._w=t=>Math.abs(t)>1?0:3/4*(1-t**2);break;case"quartic":this._w=t=>Math.abs(t)>1?0:15/16*(1-t**2)**2;break;case"triweight":this._w=t=>Math.abs(t)>1?0:35/32*(1-t**2)**3;break;case"cosine":this._w=t=>Math.abs(t)>1?0:Math.PI/4*Math.cos(Math.PI/2*t);break;case"inversion":this._w=t=>1/Math.abs(t);break}}fit(r,_){this._x=r,this._y=_,this._c=[...new Set(_)]}predict(r){return r.map(_=>{const h=this._x.map((s,c)=>({i:c,d:this._d(_,s)}));h.sort((s,c)=>s.d-c.d);const t=h[this._k].d,a={};for(let s=0;s<this._k&&s<h.length;s++){const c=h[s].i;a[this._y[c]]?a[this._y[c]].w+=this._w(h[s].d/t):a[this._y[c]]={category:this._y[c],w:this._w(h[s].d/t)}}let e=0,i=null;for(const s of Object.keys(a))e<a[s].w&&(e=a[s].w,i=a[s].category);return i})}}
