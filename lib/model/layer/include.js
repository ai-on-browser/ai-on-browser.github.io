import Layer from"./base.js";import{Matrix}from"../../util/math.js";export default class IncludeLayer extends Layer{constructor({net:t=null,input_to:i=null,train:r=!0,...s}){super(s),this._model=t,this._input_to=i,this._train=r,this._org_i=null,this._org_t=null}bind({input:t,supervisor:i}){this._org_i=t,this._org_t=i}calc(t){if(!(this._org_i instanceof Matrix)&&this._input_to){const i=t;(t=this._org_i)[this._input_to]=i}return this._model.calc(t)}grad(t){return this._model.grad(t)}update(){this._train&&this._model.update(this._opt.lr)}}