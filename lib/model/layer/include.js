import Layer from"./base.js";import{Matrix}from"../../util/math.js";export default class IncludeLayer extends Layer{constructor({id:t=null,net:i=null,input_to:r=null,train:s=!0,..._}){super(_),this._id=t,this._input_to=r,this._model=i||self.model[t],this._train=s,this._org_i=null,this._org_t=null}bind({input:t,supervisor:i}){this._org_i=t,this._org_t=i}calc(t){if(!(this._org_i instanceof Matrix)&&this._input_to){const i=t;(t=this._org_i)[this._input_to]=i}return this._model.calc(t)}grad(t){return this._model.grad(t)}update(){this._train&&this._model.update(this._opt.lr)}}