var u=Object.defineProperty;var M=(b,a)=>u(b,"name",{value:a,configurable:!0});export default class g{static{M(this,"AkimaInterpolation")}constructor(a=!1){this._modified=a}fit(a,n){const h=a.length,i=a.map((t,o)=>[t,n[o]]);i.sort((t,o)=>t[0]-o[0]),this._x=i.map(t=>t[0]),this._y=i.map(t=>t[1]),this._x1=this._x[0]+this._x[1]-this._x[2],this._x0=2*this._x[0]-this._x[2];const x=(this._y[2]-this._y[1])/(this._x[2]-this._x[1]),s=(this._y[1]-this._y[0])/(this._x[1]-this._x[0]);this._y1=this._y[0]-(this._x[0]-this._x1)*(2*s-x),this._y0=this._y1-(this._x1-this._x0)*(3*s-2*x),this._xn0=this._x[h-1]+this._x[h-2]-this._x[h-3],this._xn1=2*this._x[h-1]-this._x[h-3];const _=(this._y[h-3]-this._y[h-2])/(this._x[h-3]-this._x[h-2]),c=(this._y[h-2]-this._y[h-1])/(this._x[h-2]-this._x[h-1]);this._yn0=this._y[h-1]-(this._xn0-this._x[h-1])*(2*c-_),this._yn1=this._y1-(this._xn1-this._xn0)*(3*c-2*_)}predict(a){const n=this._x.length,h=this._x,i=this._y;return a.map(x=>{if(x<=h[0])return i[0];if(x>=h[n-1])return i[n-1];let s=1;for(;x>h[s];s++);if(x===h[s])return i[s];const _=[s===1?this._x0:s===2?this._x1:h[s-3],s===1?this._x1:h[s-2],h[s-1],h[s],s===n-1?this._xn0:h[s+1],s===n-1?this._xn1:s===n-2?this._xn0:h[s+2]],c=[s===1?this._y0:s===2?this._y1:i[s-3],s===1?this._y1:i[s-2],i[s-1],i[s],s===n-1?this._yn0:i[s+1],s===n-1?this._yn1:s===n-2?this._yn0:i[s+2]],t=[];for(let y=0;y<5;y++)t[y]=(c[y+1]-c[y])/(_[y+1]-_[y]);let o,e;this._modified?(o=(Math.abs(t[1]-t[0])+Math.abs(t[1]+t[0])/2)/(Math.abs(t[3]-t[2])+Math.abs(t[3]+t[2])/2),e=(Math.abs(t[2]-t[1])+Math.abs(t[2]+t[1])/2)/(Math.abs(t[4]-t[3])+Math.abs(t[4]+t[3])/2)):(o=Math.abs(t[1]-t[0])/Math.abs(t[3]-t[2]),e=Math.abs(t[2]-t[1])/Math.abs(t[4]-t[3]));const r=(t[1]-t[2])/(1+o),m=(t[3]-t[2])/(1+e),f=c[2],l=r+t[2],d=-1*(2*r+m)/(_[3]-_[2]),p=(r+m)/(_[3]-_[2])**2;return f+l*(x-_[2])+d*(x-_[2])**2+p*(x-_[2])**3})}}
