var b=Object.defineProperty;var k=(A,o)=>b(A,"name",{value:o,configurable:!0});export default class x{static{k(this,"CLUES")}constructor(o=.05){this._alpha=o,this._m=20,this._eps=1e-4}get size(){const o=this.predict();return new Set(o).size}_d(o,i){return Math.sqrt(o.reduce((c,d,_)=>c+(d-i[_])**2,0))}fit(o){const i=o.length;let c=Math.max(1,Math.round(this._alpha*i));const d=Math.max(1,Math.round(this._alpha*i)),_=Math.max(1,Math.round(this._alpha*i));let p=-1/0,m=Array(i).fill(0),a=1/0,g=o;for(let r=1;r<=_;r++){g=this._shrinking(g,c);const f=this._partitioin(g),s=new Set(f).size;if(s===1)break;const l=Array(i).fill(0),t=Array(i).fill(1/0),e=Array(s).fill(0),h=Array.from({length:i},()=>[]);for(let n=0;n<i;n++){h[n][n]={i:n,d:0};for(let u=n+1;u<i;u++){const M=this._d(g[n],g[u]);h[n][u]={i:u,d:M},h[u][n]={i:n,d:M}}h[n].sort((u,M)=>u.d-M.d);for(let u=1;u<i;u++)f[n]===f[h[n][u].i]?l[n]+=h[n][u].d:t[n]=Math.min(t[n],h[n][u].d);e[f[n]]++}let y=0;for(let n=0;n<i;n++)l[n]>0&&(l[n]/=e[f[n]]-1),y+=(t[n]-l[n])/Math.max(l[n],t[n]);if(y/=i,r===1)p=y,m=f,a=s;else if(Math.min(...e)>=_){if(y>p)p=y,m=f,a=s;else if(s===2||a===2)break}c+=d}this._c=m}_shrinking(o,i){const c=o.length,d=o[0].length;let _=o.concat();const p=Array.from({length:c},()=>[]);for(let m=0;m<this._m;m++){const a=[];let g=0;for(let r=0;r<c;r++){p[r][r]={i:r,d:0};for(let s=r+1;s<c;s++){const l=this._d(_[r],_[s]);p[r][s]={i:s,d:l},p[s][r]={i:r,d:l}}p[r].sort((s,l)=>s.d-l.d);const f=p[r].slice(1,i+1).map(s=>_[s.i]);a[r]=Array(d);for(let s=0;s<d;s++){const l=f.map(t=>t[s]);l.sort((t,e)=>t-e),f.length%2===0?a[r][s]=(l[f.length/2]+l[f.length/2-1])/2:a[r][s]=l[(f.length-1)/2]}for(let s=0;s<a[r].length;s++)g=Math.max(g,Math.abs(a[r][s]-_[r][s]))}if(_=a,g<this._eps)break}return _}_partitioin(o){const i=o.length,c=Array.from({length:i},()=>[]);for(let t=0;t<i;t++){c[t][t]={i:t,d:0};for(let e=t+1;e<i;e++){const h=this._d(o[t],o[e]);c[t][e]={i:e,d:h},c[e][t]={i:t,d:h}}c[t].sort((e,h)=>e.d-h.d)}let d=0;const _=[d],p=[0],m=Array(i).fill(!1);for(let t=0;t<i-1;t++){m[d]=!0;for(let e=1;e<i;e++)if(!m[c[d][e].i]){p.push(c[d][e].d),_.push(c[d][e].i),d=c[d][e].i;break}}const a=p.concat();a.sort((t,e)=>t-e);const g=k(t=>{const e=(a.length-1)*t,h=Math.floor(e),y=Math.ceil(e);return a[h]+(e-h)*(a[y]-a[h])},"q"),r=g(.75)-g(.25),f=p.reduce((t,e)=>t+e,0)/(i-1)+1.5*r,s=[];let l=0;for(let t=0;t<i;t++)p[t]>f&&l++,s[_[t]]=l;return s}predict(){return this._c}}
