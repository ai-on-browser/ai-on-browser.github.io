var A=Object.defineProperty;var k=(b,o)=>A(b,"name",{value:o,configurable:!0});export default class x{static{k(this,"CLUES")}constructor(o=.05){this._alpha=o,this._m=20,this._eps=1e-4}get size(){const o=this.predict();return new Set(o).size}_d(o,i){return Math.sqrt(o.reduce((c,d,_)=>c+(d-i[_])**2,0))}fit(o){const i=o.length;let c=Math.max(1,Math.round(this._alpha*i));const d=Math.max(1,Math.round(this._alpha*i)),_=Math.max(1,Math.round(this._alpha*i));let u=-1/0,m=null,h=1/0,g=o;for(let r=1;r<=_;r++){g=this._shrinking(g,c);const f=this._partitioin(g),s=new Set(f).size;if(s===1)break;const l=Array(i).fill(0),t=Array(i).fill(1/0),e=Array(s).fill(0),a=Array.from({length:i},()=>[]);for(let n=0;n<i;n++){a[n][n]={i:n,d:0};for(let p=n+1;p<i;p++){const y=this._d(g[n],g[p]);a[n][p]={i:p,d:y},a[p][n]={i:n,d:y}}a[n].sort((p,y)=>p.d-y.d);for(let p=1;p<i;p++)f[n]===f[a[n][p].i]?l[n]+=a[n][p].d:t[n]=Math.min(t[n],a[n][p].d);e[f[n]]++}let M=0;for(let n=0;n<i;n++)l[n]>0&&(l[n]/=e[f[n]]-1),M+=(t[n]-l[n])/Math.max(l[n],t[n]);if(M/=i,r===1)u=M,m=f,h=s;else if(Math.min(...e)>=_){if(M>u)u=M,m=f,h=s;else if(s===2||h===2)break}c+=d}this._c=m}_shrinking(o,i){const c=o.length,d=o[0].length;let _=o.concat();const u=Array.from({length:c},()=>[]);for(let m=0;m<this._m;m++){const h=[];let g=0;for(let r=0;r<c;r++){u[r][r]={i:r,d:0};for(let s=r+1;s<c;s++){const l=this._d(_[r],_[s]);u[r][s]={i:s,d:l},u[s][r]={i:r,d:l}}u[r].sort((s,l)=>s.d-l.d);const f=u[r].slice(1,i+1).map(s=>_[s.i]);h[r]=Array(d);for(let s=0;s<d;s++){const l=f.map(t=>t[s]);l.sort((t,e)=>t-e),f.length%2===0?h[r][s]=(l[f.length/2]+l[f.length/2-1])/2:h[r][s]=l[(f.length-1)/2]}for(let s=0;s<h[r].length;s++)g=Math.max(g,Math.abs(h[r][s]-_[r][s]))}if(_=h,g<this._eps)break}return _}_partitioin(o){const i=o.length,c=Array.from({length:i},()=>[]);for(let t=0;t<i;t++){c[t][t]={i:t,d:0};for(let e=t+1;e<i;e++){const a=this._d(o[t],o[e]);c[t][e]={i:e,d:a},c[e][t]={i:t,d:a}}c[t].sort((e,a)=>e.d-a.d)}let d=0;const _=[d],u=[0],m=Array(i).fill(!1);for(let t=0;t<i-1;t++){m[d]=!0;for(let e=1;e<i;e++)if(!m[c[d][e].i]){u.push(c[d][e].d),_.push(c[d][e].i),d=c[d][e].i;break}}const h=u.concat();h.sort((t,e)=>t-e);const g=k(t=>{const e=(h.length-1)*t,a=Math.floor(e),M=Math.ceil(e);return h[a]+(e-a)*(h[M]-h[a])},"q"),r=g(.75)-g(.25),f=u.reduce((t,e)=>t+e,0)/(i-1)+1.5*r,s=[];let l=0;for(let t=0;t<i;t++)u[t]>f&&l++,s[_[t]]=l;return s}predict(){return this._c}}
