var l=Object.defineProperty;var a=(c,t)=>l(c,"name",{value:t,configurable:!0});import r from"../util/matrix.js";export default class p{static{a(this,"LOESS")}constructor(){this._k=(t,h)=>{const o=r.sub(t,h);o.map(i=>i*i);const s=o.sum(1);return s.map(i=>i<=1?(1-Math.sqrt(i)**3)**3:0),s}}fit(t,h){this._x=r.fromArray(t),this._b=r.resize(this._x,this._x.rows,this._x.cols*2+1,1),this._b.set(0,this._x.cols,r.map(this._x,o=>o**2)),this._y=r.fromArray(h)}predict(t){t=r.fromArray(t);const h=[];for(let o=0;o<t.rows;o++){const s=t.row(o),i=this._k(this._x,s),e=r.mult(this._b,i),m=e.tDot(this._b).solve(e.tDot(this._y)),_=r.resize(s,s.rows,s.cols*2+1,1);_.set(0,s.cols,r.map(s,n=>n**2)),h.push(_.dot(m).value)}return h}}
