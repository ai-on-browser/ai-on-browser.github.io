export default class SauvolaThresholding{constructor(t=3,h=.1,e=1){this._n=t,this._k=h,this._r=e}predict(t){const h=Math.floor(this._n/2),e=[];for(let r=0;r<t.length;r++){e[r]=[];for(let n=0;n<t[r].length;n++){const l=[];for(let e=Math.max(0,r-h);e<=Math.min(t.length-1,r+h);e++)for(let s=Math.max(0,n-h);s<=Math.min(t[r].length-1,n+h);s++)l.push(t[e][s]);const s=l.reduce(((t,h)=>t+h),0)/l.length,o=Math.sqrt(l.reduce(((t,h)=>t+(h-s)**2),0)/l.length);e[r][n]=t[r][n]<s*(1+this._k*(o/this._r-1))?0:1}}return e}}