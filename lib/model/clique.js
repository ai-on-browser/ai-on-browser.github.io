var m=Object.defineProperty;var y=(b,c)=>m(b,"name",{value:c,configurable:!0});export default class A{static{y(this,"CLIQUE")}constructor(c,h){this._xi=c,this._t=h}get size(){return this._clusters.length}fit(c){const h=c.length,r=c[0].length,o=Array(r).fill(1/0),a=Array(r).fill(-1/0);for(let t=0;t<h;t++)for(let e=0;e<r;e++)o[e]=Math.min(o[e],c[t][e]),a[e]=Math.max(a[e],c[t][e]);this._u=[];for(let t=0;t<r;t++){this._u[t]=[];let e=o[t];for(;e<=a[t];){const s=e+(Array.isArray(this._xi)?this._xi[t]:this._xi);this._u[t].push([e,s]),e=s}}let i=[];for(let t=0;t<r;t++)for(let e=0;e<this._u[t].length;e++){const s={c:Array(r).fill(-1),i:new Set};s.c[t]=e;for(let l=0;l<h;l++)this._u[t][e][0]<=c[l][t]&&c[l][t]<this._u[t][e][1]&&s.i.add(l);s.i.size/h>=this._t&&i.push(s)}for(let t=0;t<r;t++){const e=[];for(let s=0;s<i.length;s++)for(let l=0;l<s;l++){let p=-1,d=-1;const _=[];for(let n=0;n<r;n++){if(i[s].c[n]===i[l].c[n]){if(i[s].c[n]>=0&&(p>=0||d>=0))break;_[n]=i[s].c[n];continue}if(i[s].c[n]<0){if(d>=0)break;d=n,_[n]=i[l].c[n]}else if(i[l].c[n]<0){if(p>=0)break;p=n,_[n]=i[s].c[n]}else break}if(_.length<r)continue;const k={c:_,i:new Set};for(const n of i[s].i)i[l].i.has(n)&&k.i.add(n);k.i.size/h>=this._t&&e.push(k)}if(e.length===0)break;i=e}const u=[],g=[];let f=[];for(;i.length>0||u.length>0;){u.length===0&&(f.length>0&&(g.push(f),f=[]),u.push(i.pop()));const t=u.pop();f.push(t);for(let e=i.length-1;e>=0;e--){let s=0;for(let l=0;l<r&&s<2;l++)if(!(t.c[l]<0||i[e].c[l]<0||t.c[l]===i[e].c[l])){if(Math.abs(t.c[l]-i[e].c[l])>1){s=2;break}s++}s<2&&u.push(i.splice(e,1)[0])}}f.length>0&&g.push(f),this._clusters=g}predict(c){const h=Array(c.length).fill(-1);for(let r=0;r<c.length;r++)for(let o=0;o<this._clusters.length;o++){let a=!1;for(let i=0;i<this._clusters[o].length;i++){const u=this._clusters[o][i];let g=!0;for(let f=0;f<u.c.length;f++){if(u.c[f]<0)continue;const t=this._u[f][u.c[f]];if(c[r][f]<t[0]||t[1]<=c[r][f]){g=!1;break}}if(g){a=!0;break}}if(a){h[r]=o;break}}return h}}
