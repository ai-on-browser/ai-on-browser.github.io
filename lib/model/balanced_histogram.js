export default class BalancedHistogramThresholding{constructor(t=500){this._minCount=t}predict(t){const o=t.reduce(((t,o)=>Math.max(t,o)),-1/0),e=t.reduce(((t,o)=>Math.min(t,o)),1/0),r=Array(200).fill(0),i=(o-e)/200;for(let n=0;n<t.length;n++)t[n]===o?r[199]++:r[Math.floor((t[n]-e)/i)]++;let n=0,l=r.length-1;for(;r[n]<this._minCount;)if(n++,n>=r.length)throw"'minCount' is too large.";for(;r[l]<this._minCount;)l--;let h=Math.ceil((n+l)/2),a=0,s=0;for(let t=n;t<l+1;t++)t<h?a+=r[t]:s+=r[t];for(;n<l;){a>s?a-=r[n++]:s-=r[l--];const t=Math.ceil((n+l)/2);t<h?(a-=r[h-1],s+=r[h-1]):t>h&&(a+=r[h],s-=r[h]),h=t}return this._t=h*i+e,t.map((t=>t<this._t?0:1))}}