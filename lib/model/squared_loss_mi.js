var d=Object.defineProperty;var n=(_,s)=>d(_,"name",{value:s,configurable:!0});import c from"../util/matrix.js";export default class f{static{n(this,"SquaredLossMICPD")}constructor(s,i,l,t){this._model=s,this._window=i,this._take=l||Math.max(1,Math.floor(i/2)),this._lag=t||Math.max(1,Math.floor(this._take/2))}predict(s){const i=[];for(let t=0;t<s.length-this._window+1;t++)i.push(s.slice(t,t+this._window).flat());const l=[];for(let t=0;t<i.length-this._take-this._lag+1;t++){const o=c.fromArray(i.slice(t,t+this._take)),r=c.fromArray(i.slice(t+this._lag,t+this._take+this._lag));let a=0;this._model.fit(o,r);let e=this._model.predict(r);for(let h=0;h<e.length;h++)a+=(e[h]-1)**2/e.length;this._model.fit(r,o),e=this._model.predict(o);for(let h=0;h<e.length;h++)a+=(e[h]-1)**2/e.length;l.push(a)}return l}}
