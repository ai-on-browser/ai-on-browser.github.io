var m=Object.defineProperty;var f=(_,r)=>m(_,"name",{value:r,configurable:!0});export default class u{static{f(this,"YeoJohnson")}constructor(r=null){this._lambda=r,this._lambda_cand=[];for(let t=0;t<=200;t++)this._lambda_cand.push((t-100)/10)}_cdf(r){return 1/(1+Math.exp(-1.7*r))}_ppf(r){if(r>=1)return 1/0;if(r===.5)return 0;if(r<.5)return-this._ppf(1-r);let t=0,i=null,e=1;const n=1e-8;let l=1e4;for(;l-- >0;){const s=this._cdf(e);if(Math.abs(s-r)<n)return e;r<s?(i=e,e=(e+t)/2):(t=e,e=i===null?e*2:(e+i)/2)}throw"loop converged"}_j(r,t){const i=r.length,e=r.map(a=>this._t(a,t));e.sort((a,h)=>a-h);const n=e.reduce((a,h)=>a+h,0)/i,l=Math.sqrt(e.reduce((a,h)=>a+(h-n)**2,0)/i);let s=0;for(let a=0;a<i;a++)s+=(this._ppf((a+.5)/i)-(e[a]-n)/l)**2;return s}_t(r,t){return r>=0?t===0?Math.log(r+1):((r+1)**t-1)/t:t===2?-Math.log(-r+1):-((-r+1)**(2-t)-1)/(2-t)}_it(r,t){return r>=0?t===0?Math.exp(r)-1:(r*t+1)**(1/t)-1:t===2?1-Math.exp(-r):1-(-r*(2-t)+1)**(1/(2-t))}fit(r){const t=[];if(Array.isArray(r[0]))for(let i=0;i<r[0].length;i++)t[i]=r.map(e=>e[i]);else t[0]=r;this._lambda=[];for(let i=0;i<t.length;i++){let e=1/0,n=0;for(const l of this._lambda_cand){const s=this._j(t[i],l);s<e&&(e=s,n=l)}this._lambda.push(n)}Array.isArray(r[0])||(this._lambda=this._lambda[0])}predict(r){return r.map(t=>Array.isArray(t)?Array.isArray(this._lambda)?t.map((i,e)=>this._t(i,this._lambda[e])):t.map(i=>this._t(i,this._lambda)):Array.isArray(this._lambda)?this._t(t,this._lambda[0]):this._t(t,this._lambda))}inverse(r){return r.map(t=>Array.isArray(t)?Array.isArray(this._lambda)?t.map((i,e)=>this._it(i,this._lambda[e])):t.map(i=>this._it(i,this._lambda)):Array.isArray(this._lambda)?this._it(t,this._lambda[0]):this._it(t,this._lambda))}}
