var g=Object.defineProperty;var c=(r,s)=>g(r,"name",{value:s,configurable:!0});import e from"../util/matrix.js";export default class k{static{c(this,"SST")}constructor(s,o,i){this._window=s,this._take=o||Math.max(1,Math.floor(s/2)),this._lag=i||Math.max(1,Math.floor(this._take/2))}predict(s){const o=[];for(let t=0;t<s.length-this._window+1;t++)o.push(s.slice(t,t+this._window));const i=[],n=Math.min(2,this._take),a=Array.from({length:n},(t,h)=>h);for(let t=0;t<o.length-this._take-this._lag+1;t++){const h=e.fromArray(o.slice(t,t+this._take)).t,l=e.fromArray(o.slice(t+this._lag,t+this._take+this._lag)).t,[_]=h.svd(),m=_.col(a),[f]=l.svd(),u=f.col(a),d=1-m.tDot(u).svd()[1][0]**2;i.push(d)}return i}}
