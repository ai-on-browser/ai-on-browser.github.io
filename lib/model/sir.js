var v=Object.defineProperty;var y=(l,s)=>v(l,"name",{value:s,configurable:!0});import c from"../util/matrix.js";export default class g{static{y(this,"SlicedInverseRegression")}constructor(s){this._s=s}predict(s,h,p=0){s=c.fromArray(s);const a=s.rows;s.sub(s.mean(0));const m=s.cov().sqrt().inv();s.div(m);const r=h.map((o,t)=>[o,t]);r.sort((o,t)=>o[0]-t[0]);const f=r[0][0],u=(r[a-1][0]-f)/this._s,i=[];for(let o=0;o<this._s;o++)i.push(f+u*o);i.push(1/0);const d=c.zeros(s.cols,s.cols);for(let o=0;o<this._s;o++){const t=c.zeros(1,s.cols);for(let e=0;e<a;e++)i[o]<=r[e][0]&&r[e][0]<i[o+1]&&t.add(s.row(r[e][1]));d.add(t.tDot(t))}d.div(a);let n=d.eigenVectors();return n=m.dot(c.resize(n,n.rows,p)),s.dot(n).toArray()}}
