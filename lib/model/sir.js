var v=Object.defineProperty;var u=(m,s)=>v(m,"name",{value:s,configurable:!0});import c from"../util/matrix.js";export default class _{static{u(this,"SlicedInverseRegression")}constructor(s,d=null){this._s=s,this._rd=d}predict(s,d){s=c.fromArray(s);const l=s.rows,y=this._rd||s.cols;s.sub(s.mean(0));const f=s.cov().sqrt().inv();s.div(f);const r=d.map((t,o)=>[t,o]);r.sort((t,o)=>t[0]-o[0]);const h=r[0][0],p=(r[l-1][0]-h)/this._s,n=[];for(let t=0;t<this._s;t++)n.push(h+p*t);n.push(1/0);const a=c.zeros(s.cols,s.cols);for(let t=0;t<this._s;t++){const o=c.zeros(1,s.cols);for(let i=0;i<l;i++)n[t]<=r[i][0]&&r[i][0]<n[t+1]&&o.add(s.row(r[i][1]));a.add(o.tDot(o))}a.div(l);let e=a.eigenVectors();return e=f.dot(c.resize(e,e.rows,y)),s.dot(e).toArray()}}
