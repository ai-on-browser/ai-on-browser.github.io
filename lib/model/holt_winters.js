export class HoltWinters{constructor(t,s=0,h=0,i=0){this._a=t,this._b=s,this._g=h,this._s=i}fit(t){const s=[t[0]];this._d=t[0].length,this._level=t[0].concat(),this._trend=Array(this._d).fill(0),this._season=[];for(let t=0;t<this._s;t++)this._season[t]=Array(this._d).fill(0);for(let h=1;h<t.length;h++){const i=[];for(let s=0;s<this._d;s++){const _=this._a*(this._s<=0?t[h][s]:t[h][s]-this._season[h%this._s][s])+(1-this._a)*(this._level[s]+this._trend[s]);this._trend[s]=this._b*(_-this._level[s])+(1-this._b)*this._trend[s],i[s]=_+this._trend[s],this._level[s]=_,this._s>0&&(this._season[h%this._s][s]=this._g*(t[h][s]-_)+(1-this._g)*this._season[h%this._s][s])}s.push(i)}return this._step_offset=t.length+1,s}predict(t){const s=[];let h=this._level.map(((t,s)=>t+this._trend[s])),i=this._level.concat(),_=this._trend.concat();for(let e=0;e<t;e++){const t=[];for(let s=0;s<this._d;s++){const n=this._a*(this._s<=0?h[s]:h[s]-this._season[(e+this._step_offset)%this._s][s])+(1-this._a)*h[s];_[s]=this._b*(i[s]-n)+(1-this._b)*_[s],t[s]=n+_[s],i[s]=n,h[s]=n+_[s]}s.push(t)}return s}}