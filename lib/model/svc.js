var g=Object.defineProperty;var a=(l,i)=>g(l,"name",{value:i,configurable:!0});const k={gaussian:a(({d:l=1})=>(i,h)=>{const t=i.reduce((s,r,e)=>s+(r-h[e])**2,0);return Math.exp(-t/(2*l*l))},"gaussian"),linear:a(()=>(l,i)=>l.reduce((h,t,s)=>h+t*i[s],0),"linear")};export default class p{static{a(this,"SVC")}constructor(i){typeof i=="function"?this._kernel=i:(typeof i=="string"&&(i={name:i}),this._kernel=k[i.name](i)),this._C=1,this._predicts=null}get size(){const i=this.predict();return new Set(i).size}init(i){this._x=i;const h=this._x.length;this._a=Array(h).fill(0),this._k=[];for(let t=0;t<h;this._k[t++]=[]);for(let t=0;t<h;t++)for(let s=t;s<h;s++)this._k[t][s]=this._k[s][t]=this._kernel(this._x[t],this._x[s])}fit(){this._predicts=null;const i=this._x.length;for(let t=0;t<i;t++){let s=-this._k[t][t];for(let r=0;r<i;r++)s+=this._a[r]*this._k[t][r];this._a[t]=Math.min(this._C,Math.max(0,this._a[t]-s/this._k[t][t]))}this._b_off=0;for(let t=0;t<i;t++)for(let s=0;s<i;s++)this._b_off+=this._k[t][s]*this._a[t]*this._a[s];const h=[];for(let t=0;t<i;t++){h[t]=this._k[t][t];for(let s=0;s<i;s++)h[t]-=2*this._a[s]*this._k[t][s];h[t]=Math.sqrt(h[t]+this._b_off)}this._r=h.reduce((t,s)=>t+s,0)/h.length}predict(){if(this._predicts)return this._predicts;const i=[.1,.2,.3,.4,.5,.6,.7,.8,.9],h=this._x.length,t=[];for(let e=0;e<h;e++)t[e]=[];for(let e=0;e<h;e++){t[e][e]=0;for(let o=e+1;o<h;o++){let f=!0;for(let n=0;n<i.length&&f;n++){const c=this._x[e].concat();for(let _=0;_<c.length;_++)c[_]+=i[n]*(this._x[o][_]-this._x[e][_]);let u=this._kernel(c,c);for(let _=0;_<h;_++)u-=2*this._a[_]*this._kernel(this._x[_],c);f&&=Math.sqrt(u+this._b_off)<=this._r}t[e][o]=t[o][e]=f?1:0}}let s=0;const r=Array(h).fill(-1);do{let e=0;for(;e<h&&r[e]>=0;e++);const o=[e];for(;o.length>0;){const f=o.pop();if(!(r[f]>=0)){r[f]=s;for(let n=0;n<h;n++)t[e][n]>0&&o.push(n)}}r[e]=s,s++}while(r.some(e=>e<0));return this._predicts=r,r}}
