var u=Object.defineProperty;var k=(n,h)=>u(n,"name",{value:h,configurable:!0});const d={gaussian:(n=1)=>(h,i)=>{const t=h.reduce((s,r,e)=>s+(r-i[e])**2,0);return Math.exp(-t/(2*n*n))},linear:()=>(n,h)=>n.reduce((i,t,s)=>i+t*h[s],0)};export default class g{static{k(this,"SVC")}constructor(h,i=[]){typeof h=="function"?this._kernel=h:this._kernel=d[h](...i),this._C=1,this._predicts=null}get size(){const h=this.predict();return new Set(h).size}init(h){this._x=h;const i=this._x.length;this._a=Array(i).fill(0),this._k=[];for(let t=0;t<i;this._k[t++]=[]);for(let t=0;t<i;t++)for(let s=t;s<i;s++)this._k[t][s]=this._k[s][t]=this._kernel(this._x[t],this._x[s])}fit(){this._predicts=null;const h=this._x.length;for(let t=0;t<h;t++){let s=-this._k[t][t];for(let r=0;r<h;r++)s+=this._a[r]*this._k[t][r];this._a[t]=Math.min(this._C,Math.max(0,this._a[t]-s/this._k[t][t]))}this._b_off=0;for(let t=0;t<h;t++)for(let s=0;s<h;s++)this._b_off+=this._k[t][s]*this._a[t]*this._a[s];const i=[];for(let t=0;t<h;t++){i[t]=this._k[t][t];for(let s=0;s<h;s++)i[t]-=2*this._a[s]*this._k[t][s];i[t]=Math.sqrt(i[t]+this._b_off)}this._r=i.reduce((t,s)=>t+s,0)/i.length}predict(){if(this._predicts)return this._predicts;const h=[.1,.2,.3,.4,.5,.6,.7,.8,.9],i=this._x.length,t=[];for(let e=0;e<i;e++)t[e]=[];for(let e=0;e<i;e++){t[e][e]=0;for(let o=e+1;o<i;o++){let f=!0;for(let l=0;l<h.length&&f;l++){const c=this._x[e].concat();for(let _=0;_<c.length;_++)c[_]+=h[l]*(this._x[o][_]-this._x[e][_]);let a=this._kernel(c,c);for(let _=0;_<i;_++)a-=2*this._a[_]*this._kernel(this._x[_],c);f&&=Math.sqrt(a+this._b_off)<=this._r}t[e][o]=t[o][e]=f?1:0}}let s=0;const r=Array(i).fill(-1);do{let e=0;for(;e<i&&r[e]>=0;e++);const o=[e];for(;o.length>0;){const f=o.pop();if(!(r[f]>=0)){r[f]=s;for(let l=0;l<i;l++)t[e][l]>0&&o.push(l)}}r[e]=s,s++}while(r.some(e=>e<0));return this._predicts=r,r}}
