var z=Object.defineProperty;var w=(M,a)=>z(M,"name",{value:a,configurable:!0});export default class D{static{w(this,"ADAMENN")}constructor(a=null,l=3,o=null,k=null,_=3,c=.5){this._k0=a,this._k1=l,this._k2=o,this._l=k,this._k=_,this._c=c,this._itr=2}_d(a,l,o){return Math.sqrt(a.reduce((k,_,c)=>k+o[c]*(_-l[c])**2,0))}fit(a,l){this._x=a,this._y=l,this._classes=[...new Set(l)],this._k0||(this._k0=Math.ceil(this._x.length*.1)),this._k2||(this._k2=Math.ceil(this._x.length*.15)),this._l||(this._l=Math.ceil(this._k2/2))}predict(a){const l=this._x.length,o=this._x[0].length;return a.map(k=>{const _=Array(o).fill(1/o);for(let i=0;i<this._itr;i++){const n=[];for(let t=0;t<l;t++)n[t]={i:t,d:this._d(k,this._x[t],_)};n.sort((t,e)=>t.d-e.d);const u=[],g=Array.from({length:this._classes.length},()=>[]),m=Array.from({length:this._classes.length},()=>Array.from({length:o},()=>[]));for(let t=0;t<this._k0;t++){const e=n[t+1].i;u[e]=[];for(let s=0;s<l;s++)s===e?u[e][s]={i:s,d:0}:u[e][s]={i:s,d:this._d(this._x[e],this._x[s],_)};u[e].sort((s,f)=>s.d-f.d);for(let s=0;s<this._classes.length;s++){g[s][t]=0;for(let f=0;f<this._k1;f++)this._y[u[e][f+1].i]===this._classes[s]&&g[s][t]++;g[s][t]/=this._k1}for(let s=0;s<o;s++){const f=[];for(let h=0;h<l;h++)f[h]={i:h,d:Math.abs(this._x[e][s]-this._x[h][s])};f.sort((h,d)=>h.d-d.d);const x=[];for(let h=0;h<l-1&&x.length<this._l;h++)for(let d=0;d<this._k2;d++)if(f[h+1].i===u[e][d+1].i){x.push(f[h+1].i);break}for(let h=0;h<this._classes.length;h++){m[h][s][t]=0;for(let d=0;d<x.length;d++)this._y[x[d]]===this._classes[h]&&m[h][s][t]++;g[h][t]/=x.length}}}const p=Array(o).fill(0);for(let t=0;t<o;t++){for(let e=0;e<this._k0;e++)for(let s=0;s<this._classes.length;s++)m[s][t][e]>0&&(p[t]+=(g[s][e]-m[s][t][e])**2/m[s][t][e]);p[t]/=this._k0}const j=p.map(t=>Math.exp(this._c/t)),q=j.reduce((t,e)=>t+e,0),N=_.concat();for(let t=0;t<o;t++)_[t]=j[t]/q;if(N.reduce((t,e,s)=>t+(e-_[s])**2,0)<1e-32)break}const c=[];for(let i=0;i<l;i++)c[i]={i,d:this._d(k,this._x[i],_)};c.sort((i,n)=>i.d-n.d);const r={};for(let i=0;i<this._k;i++){const n=this._y[c[i+1].i];r[n]?(r[n].count+=1,r[n].min_d=Math.min(r[n].min_d,c[i+1].d)):r[n]={category:n,count:1,min_d:c[i+1].d}}let y=0,A=-1,b=null;for(const i of Object.keys(r))(y<r[i].count||y===r[i].count&&r[i].min_d<A)&&(y=r[i].count,A=r[i].min_d,b=r[i].category);return b})}}
