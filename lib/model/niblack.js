export default class NiblackThresholding{constructor(t=3,e=.1){this._n=t,this._k=e}predict(t){const e=Math.floor(this._n/2),h=[];for(let n=0;n<t.length;n++){h[n]=[];for(let l=0;l<t[n].length;l++){const r=[];for(let h=Math.max(0,n-e);h<=Math.min(t.length-1,n+e);h++)for(let o=Math.max(0,l-e);o<=Math.min(t[n].length-1,l+e);o++)r.push(t[h][o]);const o=r.reduce(((t,e)=>t+e),0)/r.length,s=Math.sqrt(r.reduce(((t,e)=>t+(e-o)**2),0)/r.length);h[n][l]=t[n][l]<o-s*this._k?0:255}}return h}}