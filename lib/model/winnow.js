import Matrix from"../util/matrix.js";export default class Winnow{constructor(t=2,h=null,i=1){this._alpha=t,this._th=this._th_org=h,this._v=i,this._w=null}fit(t,h){this._w||(this._w=Array(t[0].length).fill(1),this._th=t[0].length/2);for(let i=0;i<t.length;i++){const s=t[i].reduce(((t,h,i)=>t+h*this._w[i]),0)<=this._th?-1:1;if(1===s&&-1===h[i])for(let h=0;h<t[i].length;h++)1===t[i][h]&&(1===this._v?this._w[h]=0:this._w[h]/=this._alpha);else if(-1===s&&1===h[i])for(let h=0;h<t[i].length;h++)1===t[i][h]&&(this._w[h]*=this._alpha)}}predict(t){const h=[];for(let i=0;i<t.length;i++){const s=t[i].reduce(((t,h,i)=>t+h*this._w[i]),0);h[i]=s<=this._th?-1:1}return h}}