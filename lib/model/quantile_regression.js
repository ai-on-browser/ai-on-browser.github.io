var w=Object.defineProperty;var l=(n,t)=>w(n,"name",{value:t,configurable:!0});import s from"../util/matrix.js";export default class _{static{l(this,"QuantileRegression")}constructor(t=.5){this._tau=t,this._w=null}fit(t,o,u=.1){t=s.fromArray(t),o=s.fromArray(o);const e=t.rows,i=s.resize(t,e,t.cols+1,1);this._w===null&&(this._w=s.randn(i.cols,o.cols));const d=i.dot(this._w),c=s.sub(o,d),m=s.map(c,r=>r<=0?1:0),a=s.sub(m,this._tau);a.map(r=>Math.abs(r)),a.mult(s.map(c,r=>Math.sign(r)));const h=i.tDot(a);h.mult(u),this._w.add(h)}predict(t){return t=s.fromArray(t),s.resize(t,t.rows,t.cols+1,1).dot(this._w).toArray()}}
