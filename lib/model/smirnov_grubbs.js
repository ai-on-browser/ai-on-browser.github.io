var x=Object.defineProperty;var u=(s,t)=>x(s,"name",{value:t,configurable:!0});import w from"../util/matrix.js";const b=u(s=>{if(Number.isInteger(s)&&s>0){let t=0;for(let e=2;e<s;e++)t+=Math.log(e);return t}else if(Number.isInteger(s-.5)&&s>0){const t=s-.5;let e=Math.log(Math.sqrt(Math.PI))-Math.log(2)*t;for(let n=2*t-1;n>0;n-=2)e+=Math.log(n);return e}throw""},"logGamma"),I=u((s,t)=>Math.exp(b(s)+b(t)-b(s+t)),"beta"),p=u((s,t,e)=>{if(s>(t+1)/(t+e+1))return 1-p(1-s,e,t);let n,r=-s*(t+e)/(t+1),h,c=2,o=1+r/c,g,i=1,f=1+r/i,a=1,M=c/i*a,m=o/f*M;const q=1e-12;for(let l=1;l<1e3&&!(Math.abs(m-a)<q);l++){const _=l*2,v=l*2*t;n=s*l*(e-l)/(v*(v-1)),r=-s*(t+l)*(t+e+l)/(v*(v+1)),h=o,c=1+n/h,o=1+r/c,g=f,i=1+n/g,f=1+r/i,a=m,M=c/i*a,m=o/f*M}return s**t*(1-s)**e*(m-1)/(t*I(t,e))},"ibeta"),N=u((s,t)=>{if(t===1)return 1/2+Math.atan(s)/Math.PI;if(t===2)return(1+s/Math.sqrt(2+s**2))/2;const e=Math.sqrt(s**2+t),n=(s+e)/(2*e);return p(n,t/2,t/2)},"ct"),d=u((s,t)=>{if(Math.abs(t)>1)throw"absolute of 'a' need less than or equals to 1.";if(Math.abs(t)===1)return Math.sign(t)*(1/0);if(t>.5)return-d(s,1-t);t=1-t;let e=1,n=null,r=0;const h=1e-5;let c=1e4;for(;c-- >0;){const o=N(e,s);if(isNaN(o))return o;if(Math.abs(o-t)<h)return e;o<t?(r=e,n===null?e*=2:e=(e+n)/2):(n=e,e=(e+r)/2)}throw"qt not converged."},"qt"),P=[[3.078,6.314,12.706,31.821,63.657],[1.886,2.92,4.303,6.965,9.925],[1.638,2.353,3.182,4.541,5.841],[1.533,2.132,2.776,3.747,4.604],[1.476,2.015,2.571,3.365,4.032],[1.44,1.943,2.447,3.143,3.707],[1.415,1.895,2.365,2.998,3.499],[1.397,1.86,2.306,2.896,3.355],[1.383,1.833,2.262,2.821,3.25],[1.372,1.812,2.228,2.764,3.169],[1.363,1.796,2.201,2.718,3.106],[1.356,1.782,2.179,2.681,3.055],[1.35,1.771,2.16,2.65,3.012],[1.345,1.761,2.145,2.624,2.977],[1.341,1.753,2.131,2.602,2.947],[1.337,1.746,2.12,2.583,2.921],[1.333,1.74,2.11,2.567,2.898],[1.33,1.734,2.101,2.552,2.878],[1.328,1.729,2.093,2.539,2.861],[1.325,1.725,2.086,2.528,2.845],[1.323,1.721,2.08,2.518,2.831],[1.321,1.717,2.074,2.508,2.819],[1.319,1.714,2.069,2.5,2.807],[1.318,1.711,2.064,2.492,2.797],[1.316,1.708,2.06,2.485,2.787],[1.315,1.706,2.056,2.479,2.779],[1.314,1.703,2.052,2.473,2.771],[1.313,1.701,2.048,2.467,2.763],[1.311,1.699,2.045,2.462,2.756],[1.31,1.697,2.042,2.457,2.75]],S=[1.303,1.684,2.021,2.423,2.704],k=[1.296,1.671,2,2.39,2.66],T=[1.292,1.664,1.99,2.374,2.639],j=[1.289,1.658,1.98,2.358,2.617],B=[1.286,1.653,1.973,2.347,2.603],C=[1.285,1.651,1.97,2.342,2.596],D=[1.258,1.645,1.96,2.326,2.576],E=[.1,.05,.025,.01,.005];export default class y{static{u(this,"SmirnovGrubbs")}constructor(t){this._alpha=t}predict(t){const e=w.fromArray(t),n=e.rows,r=Array(t.length).fill(!1);if(n<=2|this._alpha>n)return r;const h=e.mean(0),c=e.std(0);e.sub(h),e.abs(),e.div(c);const o=e.max(1),g=o.argmax(0).toScaler(),i=o.at(g,0),f=this._alpha/n,a=d(n-2,f),M=(n-1)*a/Math.sqrt(n*(n-2+a**2));return i>M&&(r[g]=!0),r}}
