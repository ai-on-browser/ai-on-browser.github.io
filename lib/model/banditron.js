var p=Object.defineProperty;var g=(o,e)=>p(o,"name",{value:e,configurable:!0});export default class d{static{g(this,"Banditron")}constructor(e=.5){this._gamma=e,this._classes=[],this._w=[],this._b=[]}fit(e,a){for(let t=0;t<e.length;t++){let h=this._classes.indexOf(a[t]);h<0&&(h=this._classes.length,this._classes.push(a[t]),this._w.push(Array(e[t].length).fill(0)),this._b.push(0));let c=-1/0,i=-1;for(let s=0;s<this._classes.length;s++){const n=this._w[s].reduce((_,m,u)=>_+m*e[t][u],this._b[s]);n>c&&(c=n,i=s)}let r=Math.random(),l=-1;const f=[];for(let s=0;s<this._classes.length;s++)f[s]=this._gamma/this._classes.length+(h===s?1-this._gamma:0),r-=f[s],l<0&&r<0&&(l=s);for(let s=0;s<this._classes.length;s++){const n=(h===l&&l===s?1/f[s]:0)-(i===s?1:0);if(n!==0){for(let _=0;_<e[t].length;_++)this._w[s][_]+=e[t][_]*n;this._b[s]+=n}}}}predict(e){const a=[];for(let t=0;t<e.length;t++){let h=-1/0,c=-1;for(let i=0;i<this._classes.length;i++){const r=this._w[i].reduce((l,f,s)=>l+f*e[t][s],this._b[i]);r>h&&(h=r,c=i)}a[t]=this._classes[c]}return a}}
