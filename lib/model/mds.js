var j=Object.defineProperty;var d=(c,e)=>j(c,"name",{value:e,configurable:!0});import n from"../util/matrix.js";export default class k{static{d(this,"MDS")}constructor(e=null){this._rd=e}predict(e,h=!1){e=n.fromArray(e);const i=e.cols,o=e.rows,m=this._rd||i,a=new n(o,o);if(h)a.set(0,0,e);else for(let t=0;t<o;t++){a.set(t,t,0);for(let r=t+1;r<o;r++){let f=0;for(let l=0;l<i;l++)f+=(e.at(t,l)-e.at(r,l))**2;a.value[t*o+r]=a.value[r*o+t]=Math.sqrt(f)}}let s=n.map(a,t=>t**2);const p=s.mean(0),v=s.mean(1),M=s.mean();s.sub(p),s.sub(v),s.add(M),s.mult(-.5);const b=1e5,[A,u]=s.eigenJacobi(b);for(let t=0;t<o;t++)for(let r=0;r<m;r++)u.multAt(t,r,Math.sqrt(A[r]));return u.slice(0,m,1).toArray()}}
