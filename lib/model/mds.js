import{Matrix}from"../util/math.js";export const MDS=function(t,e=1,r=!1){const o=(t=Matrix.fromArray(t)).cols,a=t.rows,l=new Matrix(a,a);if(r)l.set(0,0,t);else for(let e=0;e<a;e++){l.set(e,e,0);for(let r=e+1;r<a;r++){let s=0;for(let a=0;a<o;a++)s+=(t.at(e,a)-t.at(r,a))**2;l.value[e*a+r]=l.value[r*a+e]=Math.sqrt(s)}}let s=l.copyMap((t=>t**2));const n=s.mean(0),i=s.mean(1),c=s.mean();s.sub(n),s.sub(i),s.add(c),s.mult(-.5);const[f,m]=s.eigenJacobi(1e5);for(let t=0;t<a;t++)for(let r=0;r<e;r++)m.multAt(t,r,Math.sqrt(f[r]));return m.slice(0,e,1).toArray()};