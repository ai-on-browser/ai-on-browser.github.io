var a=Object.defineProperty;var e=(_,t)=>a(_,"name",{value:t,configurable:!0});import i from"../util/matrix.js";export default class d{static{e(this,"SelectiveSamplingSOP")}constructor(t){this._b=t}init(t,s){this._x=i.fromArray(t),this._shift=this._x.mean(0),this._x.sub(this._shift),this._y=s,this._d=this._x.cols,this._v=i.zeros(this._d,1),this._s=i.eye(this._d,this._d)}update(t,s){const h=i.add(this._s,t.dot(t.t)).solve(this._v).tDot(t).toScaler(),o=h<=0?-1:1;this._b/(this._b*Math.abs(h))&&s!==o&&(this._v.add(i.mult(t,s)),this._s.add(t.dot(t.t)))}fit(){for(let t=0;t<this._x.rows;t++)this.update(this._x.row(t).t,this._y[t])}predict(t){const s=i.fromArray(t);s.sub(this._shift);const r=this._s.solve(this._v);return s.dot(r).value.map(o=>o<=0?-1:1)}}
