export class ROMMA{constructor(){this._w=null,this._w0=0}_mistake(t,s){return t*s<=0}update(t,s){const e=this._w.reduce(((s,e,i)=>s+e*t[i]),this._w0);if(!this._mistake(e,s))return;const i=this._w.reduce(((t,s)=>t+s**2),this._w0**2);if(0===i)return this._w=t.map((t=>t*s)),void(this._w0=s);const r=(t.reduce(((t,s)=>t+s**2),0)+1)*i,h=(r-s*e)/(r-e**2),_=i*(s-e)/(r-e**2);this._w=this._w.map(((s,e)=>s*h+t[e]*_)),this._w0=this._w0*h+_}fit(t,s){this._w||(this._w=Array(t[0].length).fill(0),this._w0=0);for(let e=0;e<t.length;e++)this.update(t[e],s[e])}predict(t){const s=[];for(let e=0;e<t.length;e++){const i=t[e].reduce(((t,s,e)=>t+this._w[e]*s),this._w0);s[e]=i<=0?-1:1}return s}}export class AggressiveROMMA extends ROMMA{_mistake(t,s){return t*s<1}}