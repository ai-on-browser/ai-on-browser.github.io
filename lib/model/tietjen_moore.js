var f=Object.defineProperty;var h=(c,e)=>f(c,"name",{value:e,configurable:!0});import _ from"../util/matrix.js";export default class m{static{h(this,"TietjenMoore")}constructor(e){this._k=e,this._mode="both"}_test_static(e){if(e=e.copy(),this._mode==="both"){e.sub(e.mean(0)),e.abs();const s=e.max(1).value.map((t,r)=>[t,r]);s.sort((t,r)=>r[0]-t[0]);let i=0,o=0;for(let t=0;t<s.length;t++)i+=s[t][0],t>=this._k&&(o+=s[t][0]);i/=s.length,o/=s.length-this._k;let a=0,n=0;for(let t=0;t<s.length;t++)a+=(s[t][0]-i)**2,t>=this._k&&(n+=(s[t][0]-o)**2);return[n/a,s.slice(0,this._k).map(t=>t[1])]}}predict(e,s){const i=_.fromArray(e),[o,a]=this._test_static(i),n=_.randn(1e4,i.cols);n.mult(i.variance(0));const[t]=this._test_static(n),r=Array(i.rows).fill(!1);if(o<s)for(let l=0;l<a.length;l++)r[a[l]]=!0;return r}}
