var _=Object.defineProperty;var n=(l,s)=>_(l,"name",{value:s,configurable:!0});import c from"../util/matrix.js";export default class f{static{n(this,"TietjenMoore")}constructor(s,e){this._k=s,this._threshold=e,this._mode="both"}_test_static(s){if(s=s.copy(),this._mode==="both"){s.sub(s.mean(0)),s.abs();const e=s.max(1).value.map((t,i)=>[t,i]);e.sort((t,i)=>i[0]-t[0]);let o=0,r=0;for(let t=0;t<e.length;t++)o+=e[t][0],t>=this._k&&(r+=e[t][0]);o/=e.length,r/=e.length-this._k;let a=0,h=0;for(let t=0;t<e.length;t++)a+=(e[t][0]-o)**2,t>=this._k&&(h+=(e[t][0]-r)**2);return[h/a,e.slice(0,this._k).map(t=>t[1])]}}predict(s){const e=c.fromArray(s),[o,r]=this._test_static(e),a=c.randn(1e4,e.cols);a.mult(e.variance(0));const[h]=this._test_static(a),t=Array(e.rows).fill(!1);if(o<this._threshold)for(let i=0;i<r.length;i++)t[r[i]]=!0;return t}}
