var b=Object.defineProperty;var d=(p,s)=>b(p,"name",{value:s,configurable:!0});class v{static{d(this,"PriorityQueue")}constructor(s){this._value=s||[]}get length(){return this._value.length}_sort(){this._value.sort((s,e)=>s[1]-e[1])}push(s,e){this._value.push([s,e]),this._sort()}move(s,e){for(let i=0;i<this.length;i++)if(this._value[i][0]===s){this._value[i][1]=e,this._sort();return}this.push(s,e)}shift(){const[s]=this._value.shift();return s}}export default class y{static{d(this,"OPTICS")}constructor(s=1/0,e=5,i="euclid"){switch(this._eps=s,this._minPts=e,this._metric=i,this._metric){case"euclid":this._d=(o,c)=>Math.sqrt(o.reduce((a,l,_)=>a+(l-c[_])**2,0));break;case"manhattan":this._d=(o,c)=>o.reduce((a,l,_)=>a+Math.abs(l-c[_]),0);break;case"chebyshev":this._d=(o,c)=>Math.max(...o.map((a,l)=>Math.abs(a-c[l])));break}}fit(s){const e=s.length,i=Array(e);for(let t=0;t<e;i[t++]=Array(e));for(let t=0;t<e;t++)for(let n=0;n<t;n++){const r=this._d(s[t],s[n]);i[t][n]=i[n][t]=r}const o=d(t=>{const n=[];for(let r=0;r<e;r++)i[t][r]<this._eps&&n.push(r);return n},"getNeighbors"),c=d(t=>{const n=o(t).map(r=>i[t][r]);return n.length<=this._minPts?null:(n.sort((r,u)=>r-u),n[this._minPts])},"coreDist"),a=d((t,n)=>{const r=c(n);return r===null?r:Math.max(r,i[n][t])},"reachabilityDist"),l=Array(e).fill(!1),_=Array(e).fill(null),g=d((t,n,r)=>{const u=c(n);if(u!==null)for(const h of t){if(l[h])continue;const f=Math.max(u,i[n][h]);_[h]===null?(_[h]=f,r.push(h,f)):f<_[h]&&(_[h]=f,r.move(h,f))}},"update");this._core_distance=[];for(let t=0;t<e;t++){if(l[t])continue;const n=o(t);l[t]=!0;const r=c(t);if(this._core_distance.push([t,r]),r!==null){const u=new v;for(g(n,t,u);u.length>0;){const h=u.shift(),f=o(h);l[h]=!0;const m=c(h);this._core_distance.push([h,m]),m!==null&&g(f,h,u)}}}}predict(s=.1){let e=0;const i=this._core_distance.length,o=Array(i);for(let c=0;c<i;c++){const[a,l]=this._core_distance[c];o[a]=l>s?++e:e}return o}}
