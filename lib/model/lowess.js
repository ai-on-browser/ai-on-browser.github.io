import Matrix from"../util/matrix.js";export default class LOWESS{constructor(){this._k=(t,r)=>{const s=Matrix.sub(t,r);s.map((t=>t*t));const i=s.sum(1);return i.map((t=>t<=1?(1-Math.sqrt(t)**3)**3:0)),i}}fit(t,r){this._x=Matrix.fromArray(t),this._b=Matrix.resize(this._x,this._x.rows,this._x.cols+1,1),this._y=Matrix.fromArray(r)}predict(t){t=Matrix.fromArray(t);const r=[];for(let s=0;s<t.rows;s++){const i=t.row(s),o=this._k(this._x,i),a=Matrix.mult(this._b,o),x=a.tDot(this._b).solve(a.tDot(this._y));r.push(Matrix.resize(i,i.rows,i.cols+1,1).dot(x).value)}return r}}