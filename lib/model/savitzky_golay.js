export default class SavitzkyGolayFilter{constructor(t){this._k=t,this._t=(t-1)/2;const s=(t,s)=>(3*t**2-7-20*s**2)/4/(t*(t**2-4)/3);this._w=[];for(let t=-this._t;t<=this._t;t++)this._w.push(s(this._k,t))}predict(t){const s=[];for(let h=0;h<t.length;h++){const i=Math.max(0,h-this._t),e=Math.min(t.length-1,h+this._t),l=t.slice(i,e+1);if(l.length<this._k)s.push(t[h]);else{let t=0;for(let s=0;s<l.length;s++)t+=l[s]*this._w[s];s.push(t)}}return s}}