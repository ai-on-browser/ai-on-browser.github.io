export default class SavitzkyGolayFilter{constructor(t){this._k=t,this._t=(t-1)/2;const e=(t,e)=>(3*t**2-7-20*e**2)/4/(t*(t**2-4)/3);this._w=[];for(let t=-this._t;t<=this._t;t++)this._w.push(e(this._k,t))}_predict(t){const e=[];for(let s=0;s<t.length;s++){const h=Math.max(0,s-this._t),i=Math.min(t.length-1,s+this._t),l=t.slice(h,i+1);if(l.length<this._k)e.push(t[s]);else{let t=0;for(let e=0;e<l.length;e++)t+=l[e]*this._w[e];e.push(t)}}return e}predict(t){const e=[];for(let s=0;s<t.length;s++)e[s]=[];for(let s=0;s<t[0].length;s++){const h=this._predict(t.map((t=>t[s])));for(let i=0;i<t.length;i++)e[i][s]=h[i]}return e}}