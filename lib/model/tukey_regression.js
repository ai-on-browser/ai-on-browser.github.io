import Matrix from"../util/matrix.js";export default class TukeyRegression{constructor(t){this._e=t,this._w=null}fit(t,r){t=Matrix.fromArray(t);const s=Matrix.resize(t,t.rows,t.cols+1,1);r=Matrix.fromArray(r),this._w||(this._w=s.tDot(s).solve(s.tDot(r)));const o=s.dot(this._w);o.sub(r),o.map((t=>Math.abs(t)<=this._e?((1-t**2)/this._e**2)**2:0));for(let t=0;t<this._w.cols;t++){const i=Matrix.mult(s,o.col(t)),e=i.tDot(s).solve(i.tDot(r.col(t)));this._w.set(0,t,e)}}predict(t){t=Matrix.fromArray(t);return Matrix.resize(t,t.rows,t.cols+1,1).dot(this._w).toArray()}}