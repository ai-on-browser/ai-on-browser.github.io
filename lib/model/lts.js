import Matrix from"../util/matrix.js";export default class LeastTrimmedSquaresRegression{constructor(t=.9){this._w=null,this._h=t}_ls(t,r){return t.tDot(t).solve(t.tDot(r))}fit(t,r){t=Matrix.fromArray(t),r=Matrix.fromArray(r);const s=t.resize(t.rows,t.cols+1,1),o=this._ls(s,r),i=s.dot(o);i.sub(r),i.mult(i);const a=i.sum(1).value.map(((t,r)=>[t,r]));a.sort(((t,r)=>t[0]-r[0]));const e=Math.max(1,Math.floor(a.length*this._h)),l=s.row(a.slice(0,e).map((t=>t[1]))),m=r.row(a.slice(0,e).map((t=>t[1])));this._w=this._ls(l,m)}predict(t){return(t=Matrix.fromArray(t)).resize(t.rows,t.cols+1,1).dot(this._w).toArray()}}