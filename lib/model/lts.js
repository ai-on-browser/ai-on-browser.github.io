var b=Object.defineProperty;var u=(c,t)=>b(c,"name",{value:t,configurable:!0});import a from"../util/matrix.js";export default class f{static{u(this,"LeastTrimmedSquaresRegression")}constructor(t=.9){this._w=null,this._h=t}_ls(t,s){const l=t.mean(0);t=a.sub(t,l);const i=t.tDot(t).solve(t.tDot(s));s=a.sub(s,t.dot(i));const o=s.mean(0);return[i,l,o]}fit(t,s){t=a.fromArray(t),s=a.fromArray(s);const[l,e,i]=this._ls(t,s),o=a.sub(t,e).dot(l);o.add(i),o.sub(s),o.mult(o);const m=o.sum(1).value.map((r,n)=>[r,n]);m.sort((r,n)=>r[0]-n[0]);const h=Math.max(1,Math.floor(m.length*this._h)),_=t.row(m.slice(0,h).map(r=>r[1])),d=s.row(m.slice(0,h).map(r=>r[1]));[this._w,this._m,this._b]=this._ls(_,d)}predict(t){t=a.fromArray(t),t.sub(this._m);const s=t.dot(this._w);return s.add(this._b),s.toArray()}}
