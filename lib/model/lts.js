var _=Object.defineProperty;var n=(a,t)=>_(a,"name",{value:t,configurable:!0});import o from"../util/matrix.js";export default class f{static{n(this,"LeastTrimmedSquaresRegression")}constructor(t=.9){this._w=null,this._h=t}_ls(t,s){return t.tDot(t).solve(t.tDot(s))}fit(t,s){t=o.fromArray(t),s=o.fromArray(s);const l=o.resize(t,t.rows,t.cols+1,1),m=this._ls(l,s),e=l.dot(m);e.sub(s),e.mult(e);const c=e.sum(1).value.map((r,i)=>[r,i]);c.sort((r,i)=>r[0]-i[0]);const h=Math.max(1,Math.floor(c.length*this._h)),u=l.row(c.slice(0,h).map(r=>r[1])),w=s.row(c.slice(0,h).map(r=>r[1]));this._w=this._ls(u,w)}predict(t){return t=o.fromArray(t),o.resize(t,t.rows,t.cols+1,1).dot(this._w).toArray()}}
