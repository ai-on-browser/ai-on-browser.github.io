var m=Object.defineProperty;var d=(o,t)=>m(o,"name",{value:t,configurable:!0});import i from"../util/matrix.js";export default class n{static{d(this,"AROW")}constructor(t=.1){this._m=null,this._s=null,this._r=t}init(t,s){this._x=i.fromArray(t),this._c=this._x.mean(0),this._x.sub(this._c),this._y=s,this._d=this._x.cols,this._m=i.zeros(this._d,1),this._s=i.eye(this._d,this._d)}update(t,s){const h=this._m.tDot(t).toScaler();if(h*s>=1)return;const r=1/(t.tDot(this._s).dot(t).toScaler()+this._r),e=Math.max(0,1-s*h)*r,a=this._s.dot(t);a.mult(e*s),this._m.add(a);const c=this._s.dot(t).dot(t.tDot(this._s));c.mult(r),this._s.sub(c)}fit(){for(let t=0;t<this._x.rows;t++)this.update(this._x.row(t).t,this._y[t])}predict(t){const s=i.fromArray(t);return s.sub(this._c),s.dot(this._m).value.map(_=>_<=0?-1:1)}}
