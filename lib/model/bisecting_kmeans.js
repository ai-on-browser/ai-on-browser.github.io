var d=Object.defineProperty;var f=(_,s)=>d(_,"name",{value:s,configurable:!0});class p{static{f(this,"KMeans")}constructor(s){this._x=s,this._k=2;const n=this._x.length,i=[];for(let c=0;c<this._k;c++)i.push(Math.floor(Math.random()*(n-c)));i[0]<=i[1]&&i[1]++,this._c=i.map(c=>this._x[c]),this._d=(c,e)=>Math.sqrt(c.reduce((t,r,o)=>t+(r-e[o])**2,0))}get c(){return this._c}fit(){const s=this.predict(),n=this._c.map(t=>Array.from(t,()=>0)),i=Array(this._k).fill(0),c=this._x.length;for(let t=0;t<c;t++){for(let r=0;r<this._x[t].length;r++)n[s[t]][r]+=this._x[t][r];i[s[t]]++}let e=0;for(let t=0;t<this._k;t++){const r=n[t].map(o=>o/i[t]);e+=this._c[t].reduce((o,h,l)=>o+(h-r[l])**2,0),this._c[t]=n[t].map(o=>o/i[t])}return e}predict(){const s=[],n=this._x.length;for(let i=0;i<n;i++){let c=1/0;s[i]=-1;for(let e=0;e<this._k;e++){const t=this._d(this._x[i],this._c[e]);t<c&&(c=t,s[i]=e)}}return s}}export default class u{static{f(this,"BisectingKMeans")}constructor(){this._c=[],this._d=(s,n)=>Math.sqrt(s.reduce((i,c,e)=>i+(c-n[e])**2,0))}get centroids(){return this._c}fit(s){const n=s.length,i=s[0].length;if(this._c.length===0){this._c[0]=Array(i).fill(0);for(let h=0;h<n;h++)for(let l=0;l<i;l++)this._c[0][l]+=s[h][l];this._c[0]=this._c[0].map(h=>h/n);return}const c=this.predict(s),e=Array(this._c.length).fill(0);for(let h=0;h<n;h++)e[c[h]]++;let t=0;for(let h=1;h<this._c.length;h++)e[t]<e[h]&&(t=h);if(e[t]<=1)return;const r=s.filter((h,l)=>c[l]===t),o=new p(r);for(;o.fit()>1e-12;);this._c.splice(t,1,...o.c)}predict(s){const n=[];for(let i=0;i<s.length;i++){let c=1/0;n[i]=-1;for(let e=0;e<this._c.length;e++){const t=this._d(s[i],this._c[e]);t<c&&(c=t,n[i]=e)}}return n}}
