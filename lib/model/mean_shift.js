var g=Object.defineProperty;var _=(c,e)=>g(c,"name",{value:e,configurable:!0});export default class f{static{_(this,"MeanShift")}constructor(e,t){this._x=null,this._centroids=null,this._h=e,this._threshold=t,this._categories=0}get categories(){return this._categories}get h(){return this._h}_distance(e,t){return Math.sqrt(e.reduce((h,i,n)=>h+(i-t[n])**2,0))}init(e){this._x=e,this._centroids=this._x.map(t=>[].concat(t))}predict(){this._categories=0;const e=[];for(let t=0;t<this._centroids.length;t++){let h=t;for(let i=0;i<t;i++)if(this._distance(this._centroids[t],this._centroids[i])<this._threshold){h=e[i];break}h===t&&this._categories++,e[t]=h}return e}fit(){if(this._centroids.length===0||this._x.length===0)return!1;let e=!1;return this._centroids=this._centroids.map(t=>{const h=t,i=this._x.map(s=>t.reduce((r,a,d)=>r+((a-s[d])/this._h)**2,0)<=1?1:0);let n=0;const o=Array(this._x[0].length).fill(0);for(let s=0;s<this._x.length;s++)if(i[s]){n+=i[s];for(let r=0;r<o.length;r++)o[r]+=this._x[s][r]*i[s]}const l=o.map(s=>s/n);return e||=h.some((s,r)=>s!==l[r]),l}),e}}
