export default class ShiftingPerceptron{constructor(t){this._lambda=t}init(t,i){this._x=t,this._y=i,this._k=0,this._l=1,this._w=Array(this._x[0].length).fill(0),this._c=0}fit(){for(let t=0;t<this._x.length;t++){const i=this._x[t].reduce(((t,i,s)=>t+i*this._w[s]),this._c)<=0?-1:1;if(this._y[t]!==i){for(let i=0;i<this._x[t].length;i++)this._w[i]=(1-this._l)*this._w[i]+this._y[t]*this._x[t][i];this._c=(1-this._l)*this._c+this._y[t],this._k+=1,this._l=this._lambda/(this._lambda+this._k)}}}predict(t){const i=[];for(let s=0;s<t.length;s++){const h=t[s].reduce(((t,i,s)=>t+i*this._w[s]),this._c);i.push(h<=0?-1:1)}return i}}