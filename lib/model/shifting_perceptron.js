export default class ShiftingPerceptron{constructor(t){this._lambda=t,this._k=0,this._l=1,this._w=null,this._c=0}fit(t,s){this._w||(this._w=Array(t[0].length).fill(0));for(let h=0;h<t.length;h++){const i=t[h].reduce(((t,s,h)=>t+s*this._w[h]),this._c)<=0?-1:1;if(s[h]!==i){for(let i=0;i<t[h].length;i++)this._w[i]=(1-this._l)*this._w[i]+s[h]*t[h][i];this._c=(1-this._l)*this._c+s[h],this._k+=1,this._l=this._lambda/(this._lambda+this._k)}}}predict(t){const s=[];for(let h=0;h<t.length;h++){const i=t[h].reduce(((t,s,h)=>t+s*this._w[h]),this._c);s.push(i<=0?-1:1)}return s}}