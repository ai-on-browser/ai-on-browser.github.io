var B=Object.defineProperty;var q=(a,r)=>B(a,"name",{value:r,configurable:!0});export default class y{static{q(this,"ABOD")}constructor(r=1/0){this._k=r}_distance(r,c){return Math.sqrt(r.reduce((d,h,n)=>d+(h-c[n])**2,0))}predict(r){const c=r.length,d=[];for(let n=0;n<c;n++){d[n]=[],d[n][n]={d:0,i:n};for(let i=0;i<n;i++){const u=this._distance(r[n],r[i]);d[n][i]={d:u,i},d[i][n]={d:u,i:n}}}for(let n=0;n<c;n++)d[n].sort((i,u)=>i.d-u.d);const h=[];for(let n=0;n<c;n++){const i=[],u=[];for(let s=1;s<c&&s<=this._k;s++){const p=d[n][s].i,g=r[n].map((m,f)=>r[p][f]-m);i.push(g),u.push(Math.sqrt(g.reduce((m,f)=>m+f**2,0)))}let j=0,t=0,e=0;for(let s=0;s<i.length;s++)for(let p=0;p<i.length;p++){if(s===p)continue;const g=i[s].reduce((_,l,o)=>_+l*i[p][o],0),m=u[s]*u[p],f=g/m**3;j+=f**2,t+=f,e+=1/m}h[n]=j/e-(t/e)**2}return h}}export class LBABOD{static{q(this,"LBABOD")}constructor(r=10,c=5){this._k=r,this._l=c}_distance(r,c){return Math.sqrt(r.reduce((d,h,n)=>d+(h-c[n])**2,0))}predict(r){const c=r.length,d=[],h=[],n=[];for(let t=0;t<c;t++){d[t]=[],d[t][t]={d:0,i:t};for(let e=0;e<t;e++){const s=this._distance(r[t],r[e]);d[t][e]={d:s,i:e},d[e][t]={d:s,i:t}}h[t]=[],n[t]=[];for(let e=0;e<c;e++)n[t][e]=r[t].map((s,p)=>r[e][p]-s),h[t][e]=Math.sqrt(n[t][e].reduce((s,p)=>s+p**2,0))}for(let t=0;t<c;t++)d[t].sort((e,s)=>e.d-s.d);const i=[];for(let t=0;t<c;t++){const e=[],s=[];for(let l=1;l<c&&l<=this._k;l++){const o=d[t][l].i;e.push(n[t][o]),s.push(h[t][o])}const p=0,g=h[t].reduce((l,o)=>l+(o===0?0:1/o**3),0)*2-s.reduce((l,o)=>l+(o===0?0:1/o**3),0)*2,m=h[t].reduce((l,o)=>l+(o===0?0:1/o),0)*2;let f=p,_=g;for(let l=0;l<e.length;l++)for(let o=0;o<e.length;o++){if(l===o)continue;const k=e[l].reduce((b,x,A)=>b+x*e[o][A],0)/(s[l]*s[o])**3;f+=k**2,_+=k}i[t]=[f/m-(_/m)**2,t]}i.sort((t,e)=>t[0]-e[0]);const u=[];for(let t=0;t<c;t++){const e=i[t][1];let s=0,p=0,g=0;for(let f=0;f<c;f++)if(f!==e)for(let _=0;_<c;_++){if(_===e)continue;const o=n[e][f].reduce((M,k,b)=>M+k*n[e][_][b],0)/(h[e][f]*h[e][_])**3;s+=o**2,p+=o,g+=1/(h[e][f]*h[e][_])}const m=s/g-(p/g)**2;if(u.length<this._l)u.push([m,e]);else if(m<u[u.length-1][0])u.pop(),u.push([m,e]),u.sort((f,_)=>f[0]-_[0]);else break}const j=Array(c).fill(!1);for(let t=0;t<u.length;t++)j[u[t][1]]=!0;return j}}
