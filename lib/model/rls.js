var h=Object.defineProperty;var c=(e,t)=>h(e,"name",{value:t,configurable:!0});import i from"../util/matrix.js";export default class l{static{c(this,"RecursiveLeastSquares")}constructor(){this._w=null,this._s=null}update(t,r){const s=this._s.dot(t).dot(t.tDot(this._s));s.div(1+t.tDot(this._s).dot(t).toScaler()),this._s.sub(s);const o=this._s.dot(t);o.mult(t.tDot(this._w).toScaler()-r),this._w.sub(o)}fit(t,r){t=i.fromArray(t);const s=i.resize(t,t.rows,t.cols+1,1);this._w||(this._w=i.zeros(s.cols,1),this._s=i.eye(s.cols,s.cols));for(let o=0;o<t.rows;o++)this.update(s.row(o).t,r[o])}predict(t){const r=i.fromArray(t);return i.resize(r,r.rows,r.cols+1,1).dot(this._w).value}}
