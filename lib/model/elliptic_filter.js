var N=Object.defineProperty;var f=(r,t)=>N(r,"name",{value:t,configurable:!0});const I=f((r,t,s,e,n,c)=>{const o=r/2,h=2*Math.PI/r;if(r>1){for(let l=0;l<o;l++){const M=Math.cos(l*h),i=-Math.sin(l*h),u=t[l+n],_=s[l+n],a=t[l+n+o],p=s[l+n+o];t[l+n]=u+a,s[l+n]=_+p,t[l+n+o]=(u-a)*M-(_-p)*i,s[l+n+o]=(_-p)*M+(u-a)*i}I(r/2,t,s,2*e,n,c),I(r/2,t,s,2*e,n+o,c+e)}else n>c&&([t[n],t[c]]=[t[c],t[n]],[s[n],s[c]]=[s[c],s[n]])},"f"),b=f((r,t=null)=>{const s=r.length;if(!Number.isInteger(Math.log2(s)))throw"Invalid value length.";return t||(t=Array(s).fill(0)),I(s,r,t,1,0,0),[r,t]},"fft"),w=f((r,t)=>(t=t.map(s=>-s),b(r,t),r=r.map(s=>s/r.length),t=t.map(s=>-s/r.length),[r,t]),"ifft"),g=f((r,t=null)=>{const s=r.length;t||(t=Array(s).fill(0));const e=Array(s).fill(0),n=Array(s).fill(0),c=-2*Math.PI/s;for(let o=0;o<s;o++)for(let h=0;h<s;h++)e[o]+=r[h]*Math.cos(h*o*c)-t[h]*Math.sin(h*o*c),n[o]+=r[h]*Math.sin(h*o*c)+t[h]*Math.cos(h*o*c);return[e,n]},"dft"),y=f((r,t)=>{t=t.map(n=>-n);let[s,e]=g(r,t);return s=s.map(n=>n/r.length),e=e.map(n=>-n/r.length),[s,e]},"idft"),K=f((r,t=null)=>{const s=r.length;return Number.isInteger(Math.log2(s))?b(r,t):g(r,t)},"ft"),L=f((r,t)=>{const s=r.length;return Number.isInteger(Math.log2(s))?w(r,t):y(r,t)},"ift"),v=f((r,t)=>{let s=0;for(let e=0;e<1e3;e++){const n=t**(e*(e+1))*Math.cos(r*(2*e+1));if(s+=n,Math.abs(n/s)<1e-15)break}return s*2*t**(1/4)},"t2"),m=f((r,t)=>{let s=0;for(let e=1;e<1e3;e++){const n=t**e**2*Math.cos(2*e*r);if(s+=n,Math.abs(n/s)<1e-15)break}return 1+s*2},"t3");export default class P{static{f(this,"EllipticFilter")}constructor(t=1,s=2,e=1,n=.5){this._c=n,this._n=s,this._xi=e,this._e=t}_K(t){if(t===1)return 1/0;let s=Math.PI/2,e=t;for(;e>1e-15;)e=(1-Math.sqrt(1-e**2))/(1+Math.sqrt(1-e**2)),s*=1+e;return s}_nome(t){return Math.exp(-Math.PI*this._K(Math.sqrt(1-t**2))/this._K(t))}_Ln(t,s){if(t===1)return s;if(t===2)return(s+Math.sqrt(s**2-1))**2;if(t===3){const o=s**2,h=Math.sqrt(4*o+(4*o*(o-1))**(2/3)),l=2*o*Math.sqrt(h)/(Math.sqrt(8*o*(o+1)+12*h*o-h**3)-h**(3/2));return s**3*((1-l)/(s**2-l))**2}if(Number.isInteger(t/2))return this._Ln(2,this._Ln(t/2,s));if(Number.isInteger(t/3))return this._Ln(3,this._Ln(t/3,s));const e=this._nome(1/s)**t;let n=1,c=0;for(;n-c>1e-14;){const o=(n+c)/2,h=this._nome(o);if(e===h)return 1/o;e<h?n=o:c=o}return 1/n}_cd(t,s){const e=this._nome(s),n=Math.PI*t/(2*this._K(s));return m(0,e)/v(0,e)*v(n,e)/m(n,e)}_elliptic(t,s,e){if(t===1)return e;if(e===1)return 1;const n=s**2;if(t===2){const i=Math.sqrt(1-1/n);return((i+1)*e**2-1)/((i-1)*e**2+1)}else if(t===3){const i=Math.sqrt(4*n+(4*n*(n-1))**.6666666666666666),u=2*n*Math.sqrt(i)/(Math.sqrt(8*n*(n+1)+12*i*n-i**3)-i**(3/2)),_=n/u;return e*(1-u)*(e**2-_)/(1-_)/(e**2-u)}if(Number.isInteger(t/2))return this._elliptic(2,this._elliptic(t/2,s,s),this._elliptic(t/2,s,e));if(Number.isInteger(t/3))return this._elliptic(3,this._elliptic(t/3,s,s),this._elliptic(t/3,s,e));const c=this._K(1/s),o=[];for(let i=1;i<=t;i++)o.push(this._cd(c*(2*i-1)/t,1/s));const h=t%2===0?t:t-1;let l=1;for(let i=0;i<h;i++)l*=(1-o[i])/(1-s/o[i]);let M=(t%2===0?1:e)/l;for(let i=0;i<h;i++)M*=(e-o[i])/(e-s/o[i]);return M}_cutoff(t,s,e,n){const c=Math.sqrt(1+(this._e*this._elliptic(this._n,this._xi,t/s))**2);return[e/c,n/c]}predict(t){const[s,e]=K(t),n=t.length/2,c=Math.floor(n*(1-this._c));for(let h=1;h<=n;h++)[s[h],e[h]]=this._cutoff(h,c,s[h],e[h]),h!==n&&([s[t.length-h],e[t.length-h]]=this._cutoff(h,c,s[t.length-h],e[t.length-h]));const[o]=L(s,e);return o}}
