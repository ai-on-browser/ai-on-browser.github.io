export default class KernelizedPerceptron{constructor(t=1,i="gaussian"){switch(this._r=t,i){case"gaussian":this._kernel=(t,i)=>Math.exp(-(t.reduce(((t,s,e)=>t+(s-i[e])**2),1)**2));break;case"polynomial":this._d=2,this._kernel=(t,i)=>(1+t.reduce(((t,s,e)=>t+s*i[e])))**this._d}}init(t,i){this._x=t,this._y=i,this._epoch=0,this._i=[]}fit(){for(let t=0;t<this._x.length;t++){if(0===this._i.length){this._i.push(t);continue}let i=0;for(let s=0;s<this._i.length;s++){const e=this._i[s];i+=this._r*this._y[e]*this._kernel(this._x[t],this._x[e])}(i<0?-1:1)!==this._y[t]&&this._i.push(t)}}predict(t){const i=[];for(let s=0;s<t.length;s++){let e=0;for(let i=0;i<this._i.length;i++){const h=this._i[i];e+=this._r*this._y[h]*this._kernel(t[s],this._x[h])}i[s]=e<0?-1:1}return i}}