export default class NLinearInterpolation{fit(t,r){this._v=t,this._grids=r}predict(t){return t.map((t=>{const r=t.map(((t,r)=>((t,r)=>{let e=-1;for(let i=0;i<t.length&&r>=t[i];e=i++);return e===t.length-1?e-1:e})(this._grids[r],t)));for(let t=0;t<r.length;t++)if(r[t]<0||this._grids[t].length-1<r[t])return null;const e=[];for(let t=0;t<2**this._grids.length;t++)e.push(t.toString(2).padStart(this._grids.length,"0").split("").reduce(((t,e,i)=>"0"===e?t[r[i]]:t[r[i]+1]),this._v));for(let i=0;i<this._grids.length;i++){const s=this._grids[i][r[i]],l=this._grids[i][r[i]+1],n=(t[i]-s)/(l-s),h=e.length/2;for(let t=0;t<h;t++)e[t]=e[t]+n*(e[t+h]-e[t]);e.length=h}return e[0]}))}}