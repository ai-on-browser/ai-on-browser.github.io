var D=Object.defineProperty;var d=(i,t)=>D(i,"name",{value:t,configurable:!0});import s from"../util/matrix.js";export default class A{static{d(this,"PLS")}constructor(t){this._l=t}init(t,o){this._x=s.fromArray(t),this._y=s.fromArray(o)}fit(){if(this._y.cols===1)[this._b,this._b0]=this._pls1();else throw""}_pls1(){const t=this._x.copy();let o=t.tDot(this._y);o.div(o.norm());const n=[],h=[],c=[];for(let _=0;_<this._l;_++){const r=t.dot(o),u=r.tDot(r).toScaler();r.div(u);const y=t.tDot(r),f=this._y.tDot(r).toScaler();if(h.push(y.value),c.push(f),n.push(o.value),f===0)break;const p=r.dot(y.t);p.mult(u),t.sub(p),o=t.tDot(this._y)}const l=s.fromArray(n).t,e=s.fromArray(h).t,m=new s(c.length,1,c),a=l.dot(e.tDot(l).solve(m)),b=c[0]-e.col(0).tDot(a).toScaler();return[a,b]}predict(t){return t=s.fromArray(t),s.add(t.dot(this._b),this._b0).toArray()}}
