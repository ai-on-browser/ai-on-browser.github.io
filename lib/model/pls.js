var D=Object.defineProperty;var d=(c,t)=>D(c,"name",{value:t,configurable:!0});import s from"../util/matrix.js";export default class A{static{d(this,"PLS")}constructor(t){this._l=t}init(t,o){this._x=s.fromArray(t),this._y=s.fromArray(o)}fit(){if(this._y.cols===1)[this._b,this._b0]=this._pls1();else throw""}_pls1(){let t=this._x.copy(),o=t.tDot(this._y);o.div(o.norm());const l=[],n=[],i=[];for(let _=0;_<this._l;_++){const r=t.dot(o),u=r.tDot(r).toScaler();r.div(u);const y=t.tDot(r),f=this._y.tDot(r).toScaler();if(n.push(y.value),i.push(f),l.push(o.value),f===0)break;const p=r.dot(y.t);p.mult(u),t.sub(p),o=t.tDot(this._y)}const e=s.fromArray(l).t,h=s.fromArray(n).t,m=new s(i.length,1,i),a=e.dot(h.tDot(e).solve(m)),b=i[0]-h.col(0).tDot(a).toScaler();return[a,b]}predict(t){return t=s.fromArray(t),s.add(t.dot(this._b),this._b0).toArray()}}
