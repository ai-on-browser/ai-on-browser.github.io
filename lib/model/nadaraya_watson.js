var M=Object.defineProperty;var u=(_,s)=>M(_,"name",{value:s,configurable:!0});import p from"../util/matrix.js";export default class d{static{u(this,"NadarayaWatson")}constructor(s){this._s=s,this._p=c=>{const n=Math.sqrt(2*Math.PI*this._s)**c.cols,h=p.mult(c,c).sum(1);return h.map(e=>Math.exp(-e/this._s)/n),h}}fit(s,c){if(this._y=c,!this._s){const n=s.length,o=s.map(r=>Math.sqrt(r.reduce((t,i)=>t+i**2,0))),h=o.reduce((r,t)=>r+t,0)/n,e=Math.sqrt(o.reduce((r,t)=>r+(t-h)**2,0)/n);o.sort((r,t)=>r-t);const a=u(r=>{const t=(n-1)*r,i=Math.floor(t),l=Math.ceil(t);return o[i]+(t-i)*(o[l]-o[i])},"q"),m=1.06*Math.min(e,(a(.75)-a(.25))/1.34)/Math.pow(n,.2);this._s=m**2}this._x=p.fromArray(s)}predict(s){const c=this._x.rows;return s.map(n=>{const o=p.sub(this._x,new p(1,n.length,n)),h=this._p(o);let e=0;for(let a=0;a<c;a++)e+=this._y[a][0]*h.value[a];return e/h.sum()})}}
