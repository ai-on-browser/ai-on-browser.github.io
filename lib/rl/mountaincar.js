var p=Object.defineProperty;var n=(o,s)=>p(o,"name",{value:s,configurable:!0});import{RLEnvironmentBase as l,RLRealRange as h,RLStepResult as c}from"./base.js";export default class m extends l{static{n(this,"MountainCarRLEnvironment")}constructor(){super(),this._position=0,this._velocity=0,this._max_position=.6,this._min_position=-1.2,this._max_velocity=.07,this._goal_position=.5,this._goal_velocity=0,this._force=.001,this._g=.0025,this._max_step=200,this._reward={step:-1,goal:-1,fail:-1}}get actions(){return[[0,1,2]]}get states(){return[new h(-1.2,.6),new h(-.07,.07)]}reset(){return super.reset(),this._position=Math.random()*.2-.6,this._velocity=0,this.state()}state(){return[this._position,this._velocity]}setState(s){this._position=s[0],this._velocity=s[1]}test(s,a){let[i,t]=s;t+=(a[0]-1)*this._force+Math.cos(3*i)*-this._g,t=Math.abs(t)>this._max_velocity?Math.sign(t)*this._max_velocity:t,i+=t,i=i>this._max_position?this._max_position:i<this._min_position?this._min_position:i,i===this._min_position&&t<0&&(t=0);const e=this.epoch>=this._max_step,_=i>=this._goal_position&&t>=this._goal_velocity||e,r=e?this._reward.fail:_?this._reward.goal:this._reward.step;return new c(this,[i,t],r,_)}}
