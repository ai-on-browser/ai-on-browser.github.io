var l=Object.defineProperty;var n=(e,o)=>l(e,"name",{value:o,configurable:!0});import{RLRealRange as h,RLEnvironmentBase as p}from"./base.js";export default class c extends p{static{n(this,"MountainCarRLEnvironment")}constructor(){super(),this._position=0,this._velocity=0,this._max_position=.6,this._min_position=-1.2,this._max_velocity=.07,this._goal_position=.5,this._goal_velocity=0,this._force=.001,this._g=.0025,this._max_step=200,this._reward={step:-1,goal:-1,fail:-1}}get actions(){return[[0,1,2]]}get states(){return[new h(-1.2,.6),new h(-.07,.07)]}set reward(o){if(this._reward={step:-1,goal:-1,fail:-1},o==="achieve"){const t=this;this._reward={step:0,get goal(){return-Math.abs(t._position-t._goal_position)+Math.abs(t._velocity-t._goal_velocity)},get fail(){return-Math.abs(t._position-t._goal_position)+Math.abs(t._velocity-t._goal_velocity)}}}}reset(){return super.reset(),this._position=Math.random()*.2-.6,this._velocity=0,this.state()}state(){return[this._position,this._velocity]}setState(o){this._position=o[0],this._velocity=o[1]}test(o,t){let[s,i]=o;i+=(t[0]-1)*this._force+Math.cos(3*s)*-this._g,i=Math.abs(i)>this._max_velocity?Math.sign(i)*this._max_velocity:i,s+=i,s=s>this._max_position?this._max_position:s<this._min_position?this._min_position:s,s===this._min_position&&i<0&&(i=0);const _=this.epoch>=this._max_step,a=s>=this._goal_position&&i>=this._goal_velocity||_,r=_?this._reward.fail:a?this._reward.goal:this._reward.step;return{state:[s,i],reward:r,done:a}}}
