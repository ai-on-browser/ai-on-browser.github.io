import MountainCarRLEnvironment from"../../../lib/rl/mountaincar.js";export default class MountainCarRenderer extends MountainCarRLEnvironment{constructor(t){super(),this.platform=t,this._cart_size=[50,30],this._scale=300,this._upon=10}init(t){const i=d3.line().x((t=>t[0])).y((t=>t[1])),s=this.platform.width,a=[],h=(this._max_position-this._min_position)/100,o=((this._max_position+this._min_position)*this._scale-s)/2;for(let t=0;t<100;t++){const i=this._min_position+h*t;a.push([i*this._scale-o,this._height(i)*this._scale])}a.push([this._max_position*this._scale-o,this._height(this._max_position)*this._scale]),t.append("path").attr("stroke","black").attr("fill-opacity",0).attr("d",i(a)),t.append("rect").attr("width",this._cart_size[0]).attr("height",this._cart_size[1]).attr("fill","gray").style("transform-box","fill-box").style("transform-origin","center")}_height(t){return.45*Math.sin(3*t)+.55}render(t){const i=this.platform.width,s=((this._max_position+this._min_position)*this._scale-i)/2,a=Math.atan(-1.35*Math.cos(3*this._position));t.select("rect").attr("x",this._position*this._scale-s-this._cart_size[0]/2+Math.sin(a)*this._upon).attr("y",this._height(this._position)*this._scale+Math.cos(a)*this._upon).style("transform",`rotate(${360*-a/(2*Math.PI)+180}deg)`)}}