import{BasePlatform}from"./base.js";export default class RecommendPlatform extends BasePlatform{constructor(t,e){super(t,e)}init(){0===this.svg.select("g.rc-render").size()&&this.svg.append("g").classed("rc-render",!0).style("transform","scale(1, -1) translate(0, -100%)"),this._r=this.svg.select("g.rc-render"),this._r.selectAll("*").remove();const t=this.svg.node();this.svg.selectAll("g:not(.rc-render)").filter((function(){return this.parentNode===t})).style("visibility","hidden"),this.render()}render(){this._r.selectAll("*").remove();const t=this.datas;if(!t)return;const e=this._r.append("foreignObject").attr("x",0).attr("y",0).attr("width",this.width).attr("height",this.height).style("overflow","scroll").append("xhtml:table").attr("width",this.width).attr("height",this.height).attr("border",1).style("border-collapse","collapse"),s=t._feature_names;if(s){const t=e.append("tr");for(const e of s)t.append("td").text(e)}const r=t.x,i=e;for(let e=0;e<t.length;e++){const s=i.append("tr");for(let i=0;i<r[e].length;i++)s.append("td").text(t._input_category_names[i]?t._input_category_names[i][r[e][i]]:r[e][i])}}fit(t){t(this.datas.x.map((t=>t.map(((t,e)=>this.datas._input_category_names[e]?this.datas._input_category_names[e][t]:t)).filter((t=>null!==t)))),null,(t=>{this._pred=t}))}predict(t){t(this.datas.x,(t=>{this._pred=t}))}terminate(){this._r?.remove(),this.svg.selectAll("g").style("visibility",null);this.setting.task.configElement.selectAll("*").remove(),this.setting.footer.text(""),super.terminate()}}