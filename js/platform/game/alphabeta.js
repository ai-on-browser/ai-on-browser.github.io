export default class AlphaBetaPlayer{constructor(t=5){this._d=t}set turn(t){this._turn=t}_alphabeta(t,s,n,o,e){if(0===s)return t.score(this._turn);const a=t.choices(n),r=t.nextTurn(n);if(0===a.length)return this._alphabeta(t,s-1,r,o,e);if(n===this._turn){for(const h of a){const a=t.copy();a.set(h,n);const c=this._alphabeta(a,s-1,r,o,e);if((o=Math.max(o,c))>=e)break}return o}for(const h of a){const a=t.copy();a.set(h,n);const c=this._alphabeta(a,s-1,r,o,e);if(o>=(e=Math.min(e,c)))break}return e}action(t,s){const n=t.choices(this._turn),o=t.nextTurn(this._turn);let e=[],a=-1/0;for(const s of n){const n=t.copy();n.set(s,this._turn);const r=this._alphabeta(n,this._d-1,o,-1/0,1/0);r>a?(a=r,e=[s]):r===a&&e.push(s)}const r=e[Math.floor(Math.random()*e.length)];setTimeout((()=>{s(r)}),100)}close(){}}