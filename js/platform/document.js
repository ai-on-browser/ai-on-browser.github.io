import{BasePlatform}from"./base.js";export default class DocumentPlatform extends BasePlatform{constructor(t,e){super(t,e)}init(){0===this.svg.select("g.dc-render").size()&&this.svg.append("g").classed("dc-render",!0).style("transform","scale(1, -1) translate(0, -100%)"),this._r=this.svg.select("g.dc-render"),this._r.selectAll("*").remove();const t=this.svg.node();this.svg.selectAll("g:not(.dc-render)").filter((function(){return this.parentNode===t})).style("visibility","hidden"),this.render()}get trainInput(){return this.datas.x[0].map((t=>t.toLowerCase()))}set trainResult(t){this._pred=t,this._displayResults(t,this.trainInput)}testInput(){const t=this.datas.x[0],[e,s]=this.datas.ordinal(t);return e}testResult(t){this._pred=t,this._displayResults(t,this.testInput())}render(){}_displayResults(t,e){this._r.selectAll("*").remove();let s=[],i=[];for(let e=0;e<t[0].length;e++){const r=t.map((t=>t[e]));s.push(Math.max(...r)),i.push(Math.min(...r))}const r=this.width,l=this.height-20,n=[r,l].map(((t,e)=>(t-10)/(s[e]-i[e]))),a=Math.min(...n),h=[5,20];for(let t=0;t<n.length;t++)n[t]>a&&(isFinite(n[t])?h[t]+=(n[t]-a)*(s[t]-i[t])/2:h[t]=[r,l][t]/2-i[t]);for(let s=0;s<t.length;s++){const r=t[s].map(((t,e)=>(t-i[e])*a+h[e]));this._r.append("text").attr("x",r[0]).attr("y",r[1]).text(e[s]).append("title").text(e[s])}}terminate(){this._r.remove(),this.svg.selectAll("g").style("visibility",null),super.terminate()}}