var l=Object.defineProperty;var h=(c,e)=>l(c,"name",{value:e,configurable:!0});import"https://cdnjs.cloudflare.com/ajax/libs/pako/2.1.0/pako.min.js";export default class o{static{h(this,"CSV")}constructor(e,{header:s=0}={}){this._data=e,this._header=s}get data(){return this._header>0?this._data.slice(this._header):this._data}get columns(){return this._header>0?this._data[0]:Array.from(this._data[0],(e,s)=>s)}get type(){const e=this.data;return e[0].map((s,n)=>e.some(t=>isNaN(t[n]))?"category":"numeric")}get info(){const e=this.columns,s=this.type,n=[];for(let a=0;a<e.length;a++)n[a]={name:e[a],type:s[a]};return n[n.length-1].out=!0,n}static parse(e,s={}){const n=s.delimiter||",",a=[];let t=[],d=!1,i="";for(let r=0;r<e.length;r++)d?e[r]==='"'&&e[r+1]==='"'?(i+='"',r++):e[r]==='"'?d=!1:i+=e[r]:e[r]==='"'?d=!0:e.startsWith(n,r)?(t.push(i),i=""):e[r]===`
`||e[r]==="\r"?((i.length>0||t.length>0)&&(t.push(i),a.push(t),i="",t=[]),e[r]==="\r"&&e[r+1]===`
`&&r++):i+=e[r];return(i.length>0||t.length>0)&&(t.push(i),a.push(t)),new o(a,s)}static async load(e,s={}){if(typeof e=="string"){const a=await(await fetch(e)).arrayBuffer(),t=new TextDecoder(s.encoding||"utf-8");return e.endsWith(".gz")?o.parse(t.decode(pako.ungzip(a)),s):o.parse(t.decode(a),s)}else if(e instanceof File){const n=await new Promise(a=>{const t=new FileReader;t.onload=()=>{a(t.result)},t.readAsText(e,s.encoding)});return o.parse(n,s)}}}
