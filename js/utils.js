var i=Object.defineProperty;var a=(r,e)=>i(r,"name",{value:e,configurable:!0});export class BaseWorker{static{a(this,"BaseWorker")}constructor(e,t){this._worker=new Worker(e,t)}_postMessage(e){const t=new Promise(n=>{const o=a(h=>{this._worker.removeEventListener("message",o,!1),n(h)},"event_cb");this._worker.addEventListener("message",o,!1)});return this._worker.postMessage(e),t}terminate(){this._worker.terminate()}}const c=a((r,e,t)=>({r,g:e,b:t,toString(){return`rgb(${r}, ${e}, ${t})`}}),"rgb"),s={"-2":c(255,0,0),"-1":c(255,255,255),0:c(0,0,0)};export const specialCategory={error:-2,errorRate:r=>-1-r,dummy:-2,density:r=>-1+r,never:-3},getCategoryColor=a(function(r){if(isNaN(r))return s[0];if(!Number.isInteger(r)){let e=getCategoryColor(Math.floor(r)),t=getCategoryColor(Math.ceil(r)),n=r-Math.floor(r);return c(Math.round(e.r+(t.r-e.r)*n),Math.round(e.g+(t.g-e.g)*n),Math.round(e.b+(t.b-e.b)*n))}if(r=r%1e3,!s[r]){let e=0;for(;;){e+=1;const t=[Math.random(),Math.random(),Math.random()];if(t.every(o=>o>.8))continue;let n=1/0;for(const o of Object.keys(s)){if(+o<0||Math.abs(+o-r)>10)continue;const h=(t[0]-s[o].r/256)**2+(t[1]-s[o].g/256)**2+(t[2]-s[o].b/256)**2;h<n&&(n=h)}if(Math.random()-e/200<Math.sqrt(n/3)){s[r]=c(Math.floor(t[0]*256),Math.floor(t[1]*256),Math.floor(t[2]*256));break}}}return s[r]},"getCategoryColor");
