var p=Object.defineProperty;var a=(_,t)=>p(_,"name",{value:t,configurable:!0});export default class v{static{a(this,"MountainCarRenderer")}constructor(t){this.renderer=t}init(t){this._envrenderer=new d(this.renderer.env,{width:600,height:400,g:t}),this._envrenderer.init()}render(){this._envrenderer.render()}}class d{static{a(this,"Renderer")}constructor(t,s={}){this.env=t,this._size=[s.width||200,s.height||200],this._cart_size=[50,30],this._scale=300,this._upon=10,this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.setAttribute("width",this._size[0]),this.svg.setAttribute("height",this._size[1]),this.svg.setAttribute("viewbox","0 0 200 200"),s.g&&s.g.replaceChildren(this.svg)}init(){const t=this._size[0],s=this._size[1],i=[],r=(this.env._max_position-this.env._min_position)/100,h=((this.env._max_position+this.env._min_position)*this._scale-t)/2;for(let e=0;e<100;e++){const l=this.env._min_position+r*e;i.push([l*this._scale-h,s-this._height(l)*this._scale])}i.push([this.env._max_position*this._scale-h,s-this._height(this.env._max_position)*this._scale]);let c="";for(let e=0;e<i.length;e++)c+=`${e===0?"M":"L"}${i[e][0]},${i[e][1]}`;const o=document.createElementNS("http://www.w3.org/2000/svg","path");o.setAttribute("stroke","black"),o.setAttribute("fill-opacity",0),o.setAttribute("d",c),this.svg.appendChild(o);const n=document.createElementNS("http://www.w3.org/2000/svg","rect");n.setAttribute("width",this._cart_size[0]),n.setAttribute("height",this._cart_size[1]),n.setAttribute("fill","gray"),n.style.transformBox="fill-box",n.style.transformOrigin="center",this.svg.appendChild(n)}_height(t){return Math.sin(3*t)*.45+.55}render(){const t=this._size[0],s=this._size[1],i=((this.env._max_position+this.env._min_position)*this._scale-t)/2,r=Math.atan(-.45*3*Math.cos(3*this.env._position)),h=this.svg.querySelector("rect");h.setAttribute("x",this.env._position*this._scale-i-this._cart_size[0]/2+Math.sin(r)*this._upon),h.setAttribute("y",s-this._cart_size[1]-this._height(this.env._position)*this._scale-Math.cos(r)*this._upon),h.style.transform=`rotate(${r*360/(2*Math.PI)+180}deg)`}}
