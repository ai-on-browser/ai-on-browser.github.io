export default class MountainCarRenderer{constructor(t){this.renderer=t}init(t){this._envrenderer=new Renderer(this.renderer.env,{width:this.renderer.width,height:this.renderer.height,g:t}),this._envrenderer.init()}render(){this._envrenderer.render()}}class Renderer{constructor(t,e={}){this.env=t,this._size=[e.width||200,e.height||200],this._cart_size=[50,30],this._scale=300,this._upon=10,this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.setAttribute("width",this._size[0]),this.svg.setAttribute("height",this._size[1]),this.svg.setAttribute("viewbox","0 0 200 200"),e.g&&e.g.replaceChildren(this.svg)}init(){const t=this._size[0],e=this._size[1],i=[],s=(this.env._max_position-this.env._min_position)/100,h=((this.env._max_position+this.env._min_position)*this._scale-t)/2;for(let t=0;t<100;t++){const r=this.env._min_position+s*t;i.push([r*this._scale-h,e-this._height(r)*this._scale])}i.push([this.env._max_position*this._scale-h,e-this._height(this.env._max_position)*this._scale]);let r="";for(let t=0;t<i.length;t++)r+=`${0===t?"M":"L"}${i[t][0]},${i[t][1]}`;const n=document.createElementNS("http://www.w3.org/2000/svg","path");n.setAttribute("stroke","black"),n.setAttribute("fill-opacity",0),n.setAttribute("d",r),this.svg.appendChild(n);const o=document.createElementNS("http://www.w3.org/2000/svg","rect");o.setAttribute("width",this._cart_size[0]),o.setAttribute("height",this._cart_size[1]),o.setAttribute("fill","gray"),o.style.transformBox="fill-box",o.style.transformOrigin="center",this.svg.appendChild(o)}_height(t){return.45*Math.sin(3*t)+.55}render(){const t=this._size[0],e=this._size[1],i=((this.env._max_position+this.env._min_position)*this._scale-t)/2,s=Math.atan(-1.35*Math.cos(3*this.env._position)),h=this.svg.querySelector("rect");h.setAttribute("x",this.env._position*this._scale-i-this._cart_size[0]/2+Math.sin(s)*this._upon),h.setAttribute("y",e-this._cart_size[1]-this._height(this.env._position)*this._scale-Math.cos(s)*this._upon),h.style.transform=`rotate(${360*s/(2*Math.PI)+180}deg)`}}