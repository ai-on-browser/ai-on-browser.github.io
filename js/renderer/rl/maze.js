var d=Object.defineProperty;var o=(h,n)=>d(h,"name",{value:n,configurable:!0});export default class c{static{o(this,"SmoothMazeRenderer")}constructor(n){this.renderer=n,this._width=this.renderer.env._width,this._height=this.renderer.env._height,this._render_blocks=[];for(let i=0;i<this.renderer.env._map_resolution[0];i++)this._render_blocks[i]=Array(this.renderer.env._map_resolution[1])}init(n){const i=document.createElement("div");i.style.width=`${this._width}px`,i.style.height=`${this._height}px`,i.onclick=t=>{const r=[t.offsetX,t.offsetY],e=this._width/this.renderer.env._map_resolution[0],s=this._height/this.renderer.env._map_resolution[1],_=Math.floor(r[0]/e),l=Math.floor(r[1]/s);this.renderer.env._points.push([_,l]),t.stopPropagation(),setTimeout(()=>{this.renderer.platform.render()},0)},n.appendChild(i),this._envrenderer=new a(this.renderer.env,{g:i}),this._envrenderer.init()}render(){this._envrenderer.render()}}class a{static{o(this,"Renderer")}constructor(n,i={}){this.env=n,this._render_blocks=[];for(let t=0;t<this.env._map_resolution[0];t++)this._render_blocks[t]=Array(this.env._map_resolution[1]);this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.setAttribute("width",this.env._width),this.svg.setAttribute("height",this.env._height),i.g&&i.g.replaceChildren(this.svg)}init(){const n=this.env._width/this.env._map_resolution[0],i=this.env._height/this.env._map_resolution[1],t=document.createElementNS("http://www.w3.org/2000/svg","rect");t.setAttribute("x",this.env._width-this.env._goal_size[0]),t.setAttribute("y",this.env._height-this.env._goal_size[1]),t.setAttribute("width",this.env._goal_size[0]),t.setAttribute("height",this.env._goal_size[1]),t.setAttribute("stroke-width",1),t.setAttribute("stroke","black"),t.setAttribute("fill","yellow"),this.svg.appendChild(t);const r=document.createElementNS("http://www.w3.org/2000/svg","circle");r.classList.add("agent"),r.setAttribute("cx",this.env._position[0]),r.setAttribute("cy",this.env._position[1]),r.setAttribute("fill","gray"),r.setAttribute("fill-opacity",.8),r.setAttribute("stroke-width",1),r.setAttribute("stroke","black"),r.setAttribute("r",Math.min(n,i)*2/3),this.svg.appendChild(r),this._blocks=document.createElementNS("http://www.w3.org/2000/svg","g"),this.svg.appendChild(this._blocks)}render(){const n=this.env._width/this.env._map_resolution[0],i=this.env._height/this.env._map_resolution[1],t=this.env.map;for(let e=0;e<t.length;e++)for(let s=0;s<t[e].length;s++)t[e][s]&&!this._render_blocks[e][s]?(this._render_blocks[e][s]=document.createElementNS("http://www.w3.org/2000/svg","rect"),this._render_blocks[e][s].classList.add("grid"),this._render_blocks[e][s].setAttribute("x",n*e),this._render_blocks[e][s].setAttribute("y",i*s),this._render_blocks[e][s].setAttribute("width",n),this._render_blocks[e][s].setAttribute("height",i),this._render_blocks[e][s].setAttribute("fill","black"),this._blocks.appendChild(this._render_blocks[e][s])):!t[e][s]&&this._render_blocks[e][s]&&(this._render_blocks[e][s].remove(),this._render_blocks[e][s]=null);const r=this.svg.querySelector("circle.agent");r.setAttribute("cx",this.env._position[0]),r.setAttribute("cy",this.env._position[1])}}
