import NeighbourhoodComponentsAnalysis from"../../lib/model/nca.js";import Controller from"../controller.js";var dispNCA=function(t,n){const e=new Controller(n);let o=null;t.append("span").text(" learning rate "),t.append("input").attr("type","number").attr("name","l").attr("max",10).attr("step",.1).attr("value",.1),e.stepLoopButtons().init((()=>{o=null,n.init()})).step((e=>{n.fit(((a,i,s)=>{const l=n.dimension;if(!o){const e=+t.select("[name=l]").property("value");o="FS"===n.task?new NeighbourhoodComponentsAnalysis(null,e):new NeighbourhoodComponentsAnalysis(l,e)}if(o.fit(a,i.map((t=>t[0]))),"FS"===n.task){const t=o.importance().map(((t,n)=>[t,n]));t.sort(((t,n)=>n[0]-t[0]));const n=t.slice(0,l).map((t=>t[1]));s(a.map((t=>n.map((n=>t[n])))))}else{s(o.predict(a))}e&&e()}))})).epoch()};export default function(t){t.setting.ml.usage='Click and add data point. Next, click "Step" button.',dispNCA(t.setting.ml.configElement,t)}