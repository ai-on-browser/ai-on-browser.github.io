import NeighbourhoodComponentsAnalysis from"../../lib/model/nca.js";import Controller from"../controller.js";var dispNCA=function(t,n){const e=new Controller(n);let o=null;t.append("span").text(" learning rate "),t.append("input").attr("type","number").attr("name","l").attr("max",10).attr("step",.1).attr("value",.1),e.stepLoopButtons().init((()=>{o=null,n.init()})).step((e=>{const a=n.dimension;if(!o){const e=+t.select("[name=l]").property("value");o="FS"===n.task?new NeighbourhoodComponentsAnalysis(null,e):new NeighbourhoodComponentsAnalysis(a,e)}if(o.fit(n.trainInput,n.trainOutput.map((t=>t[0]))),"FS"===n.task){const t=o.importance().map(((t,n)=>[t,n]));t.sort(((t,n)=>n[0]-t[0]));const e=t.slice(0,a).map((t=>t[1]));n.trainResult=n.trainInput.map((t=>e.map((n=>t[n]))))}else{let t=o.predict(n.trainInput);n.trainResult=t}e&&e()})).epoch()};export default function(t){t.setting.ml.usage='Click and add data point. Next, click "Step" button.',dispNCA(t.setting.ml.configElement,t)}