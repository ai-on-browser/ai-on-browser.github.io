import NeighbourhoodComponentsAnalysis from"../../lib/model/nca.js";var dispNCA=function(t,n){let e=null;t.append("span").text(" learning rate "),t.append("input").attr("type","number").attr("name","l").attr("max",10).attr("step",.1).attr("value",.1),n.setting.ml.controller.stepLoopButtons().init((()=>{e=null,n.init()})).step((o=>{n.fit(((a,i,s)=>{const p=n.dimension;if(!e){const o=+t.select("[name=l]").property("value");e="FS"===n.task?new NeighbourhoodComponentsAnalysis(null,o):new NeighbourhoodComponentsAnalysis(p,o)}if(e.fit(a,i.map((t=>t[0]))),"FS"===n.task){const t=e.importance().map(((t,n)=>[t,n]));t.sort(((t,n)=>n[0]-t[0]));const n=t.slice(0,p).map((t=>t[1]));s(a.map((t=>n.map((n=>t[n])))))}else{s(e.predict(a))}o&&o()}))})).epoch()};export default function(t){t.setting.ml.usage='Click and add data point. Next, click "Step" button.',dispNCA(t.setting.ml.configElement,t)}