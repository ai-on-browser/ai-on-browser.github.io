var m=Object.defineProperty;var u=(e,n)=>m(e,"name",{value:n,configurable:!0});import d from"../../lib/model/policy_gradient.js";import x from"../controller.js";export default function _(e){e.setting.ml.usage='Click "step" to update.';const n=new x(e),r=e.type==="grid"?Math.max(...e.env.size):20;let t=new d(e,r),i=e.reset(t);e.render(()=>t.get_score());const c=u((s=!0)=>{const l=t.get_action(i),{state:w,reward:R,done:a}=e.step(l,t);return t.update(l,i,R,a,v.value),s&&e.render(),i=w,a},"step"),o=u(()=>{i=e.reset(t),t.reset(),e.render(()=>t.get_score())},"reset"),g=n.input.number({label:"Resolution",min:2,max:100,value:r}),p=n.stepLoopButtons().init(()=>{t=new d(e,g.value),o()});n.input.button("Reset").on("click",o);const v=n.input.number({label:" Learning rate ",min:.01,max:10,step:.01,value:.1});p.step(s=>{c()?setTimeout(()=>{o(),s&&setTimeout(s,10)}):s&&setTimeout(s,5)}).skip(()=>{c(!1)&&o()}),e.plotRewards(n.element)}u(_,"default");
