import ABOD,{LBABOD}from"../../lib/model/abod.js";import Controller from"../controller.js";export default function(e){e.setting.ml.usage='Click and add data point. Then, click "Calculate".',e.setting.ml.reference={author:"H. P. Kriegel, M. Schubert, A. Zimek",title:"Angle-Based Outlier Detection in High-dimensional Data",year:2008};const l=new Controller(e),t=l.select(["ABOD/FastABOD","LB-ABOD"]).on("change",(()=>{"LB-ABOD"===t.value?(u.element.style.display=null,i.element.style.display="none",a.value="count",a.element.disabled=!0):a.element.disabled=!1})),n=l.input.number({label:" k ",min:1,max:1e4,value:1e3}),a=l.select(["count","threshold"]).on("change",(()=>{u.element.style.display="count"===a.value?null:"none",i.element.style.display="count"===a.value?"none":null})),i=l.input.number({min:0,max:1e5,value:100});i.element.style.display="none";const u=l.input.number({min:1,max:100,value:5});l.input.button("Calculate").on("click",(()=>{if("LB-ABOD"===t.value){const l=new LBABOD(n.value,u.value).predict(e.trainInput);e.trainResult=l}else{const l=new ABOD(n.value).predict(e.trainInput);if("threshold"===a.value)e.trainResult=l.map((e=>e<i.value));else{const t=l.map(((e,l)=>[e,l]));t.sort(((e,l)=>e[0]-l[0]));const n=Array(l.length).fill(!1);for(let e=0;e<u.value;e++)n[t[e][1]]=!0;e.trainResult=n}}}))}