import DPAgent from"../../lib/model/dynamic_programming.js";import Controller from"../controller.js";var dispDP=function(t,e){const n=new Controller(e),o="grid"===e.type?Math.max(...e.env.size):20;let r=new DPAgent(e,o),a=e.reset(r);e.render((()=>r.get_score()));t.append("span").text("Resolution"),t.append("input").attr("type","number").attr("name","resolution").attr("min",2).attr("max",100).attr("value",o);const p=n.stepLoopButtons().init((()=>{const n=+t.select("[name=resolution]").property("value");r=new DPAgent(e,n),a=e.reset(r),e.render((()=>r.get_score()))}));t.append("select").attr("name","type").selectAll("option").data(["value","policy"]).enter().append("option").property("value",(t=>t)).text((t=>t)),p.step((()=>{const n=t.select("[name=type]").property("value");r.update(n),e.render((()=>r.get_score()))})).epoch(),t.append("input").attr("type","button").attr("value","Reset").on("click",(()=>{a=e.reset(r),e.render((()=>r.get_score()))}));let s=!1;return t.append("input").attr("type","button").attr("value","Move").on("click",(function(){s=!s;d3.select(this).attr("value",s?"Stop":"Mode"),function t(){if(s){const n=r.get_action(a),{state:o}=e.step(n,r);e.render((()=>r.get_score())),a=o,setTimeout(t,10)}}()})),()=>{s=!1}};export default function(t){t.setting.ml.usage='Click "step" to update, click "move" to move agent.',t.setting.terminate=dispDP(t.setting.ml.configElement,t)}