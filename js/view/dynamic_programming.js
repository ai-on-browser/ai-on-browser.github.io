import DPAgent from"../../lib/model/dynamic_programming.js";var dispDP=function(t,e){const n="grid"===e.type?Math.max(...e.env.size):20;let o=new DPAgent(e,n),r=e.reset(o);e.render((()=>o.get_score(e)));t.append("span").text("Resolution"),t.append("input").attr("type","number").attr("name","resolution").attr("min",2).attr("max",100).attr("value",n);const a=e.setting.ml.controller.stepLoopButtons().init((()=>{const n=+t.select("[name=resolution]").property("value");o=new DPAgent(e,n),r=e.reset(o),e.render((()=>o.get_score(e)))}));t.append("select").attr("name","type").selectAll("option").data(["value","policy"]).enter().append("option").property("value",(t=>t)).text((t=>t)),a.step((()=>{const n=t.select("[name=type]").property("value");o.update(n),e.render((()=>o.get_score(e)))})).epoch(),t.append("input").attr("type","button").attr("value","Reset").on("click",(()=>{r=e.reset(o),e.render((()=>o.get_score(e)))}));let p=!1;return t.append("input").attr("type","button").attr("value","Move").on("click",(function(){p=!p;d3.select(this).attr("value",p?"Stop":"Mode"),function t(){if(p){const n=o.get_action(e,r),[a,p,s]=e.step(n,o);e.render((()=>o.get_score(e))),r=a,setTimeout(t,10)}}()})),()=>{p=!1}};export default function(t){t.setting.ml.usage='Click "step" to update, click "move" to move agent.',t.setting.terminate=dispDP(t.setting.ml.configElement,t)}