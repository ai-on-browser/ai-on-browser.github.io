import Matrix from"../../lib/util/matrix.js";import Histogram from"../../lib/model/histogram.js";import Controller from"../controller.js";import{specialCategory}from"../utils.js";export default function(t){t.setting.ml.usage='Click and add data point. Next, click "Fit" button.';const e=new Controller(t),a=()=>{const e=t.width,a=t.height,l=new Histogram({domain:t.datas.domain,count:"manual"!==n.value?null:i.value,binMethod:n.value}).fit(t.trainInput);t.testInput([e/l.length,a/l[0].length]);let o=Matrix.fromArray(l);o.div(o.max()),o=o.value.map(specialCategory.density),t.testResult(o)},n=e.select(["manual","fd","scott","rice","sturges","doane","sqrt"]).on("change",(()=>{i.element.disabled="manual"!==n.value,a()})),i=e.input.number({label:"bins ",min:2,value:10}).on("change",a);e.input.button("Fit").on("click",(()=>a()))}