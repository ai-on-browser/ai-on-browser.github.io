import Matrix from"../../lib/util/matrix.js";import Histogram from"../../lib/model/histogram.js";import Controller from"../controller.js";import{specialCategory}from"../utils.js";export default function(t){t.setting.ml.usage='Click and add data point. Next, click "Fit" button.';const a=new Controller(t),e=()=>{const a=new Histogram({domain:t.datas.domain,count:"manual"!==n.value?null:i.value,binMethod:n.value});a.fit(t.trainInput);const e=a.predict(t.testInput(3));let o=Matrix.fromArray(e);o.div(o.max()),o=o.value.map(specialCategory.density),t.testResult(o)},n=a.select(["manual","fd","scott","rice","sturges","doane","sqrt"]).on("change",(()=>{i.element.disabled="manual"!==n.value,e()})),i=a.input.number({label:"bins ",min:2,value:10}).on("change",e);a.input.button("Fit").on("click",(()=>e()))}