import ISODATA from"../../lib/model/isodata.js";import Controller from"../controller.js";var dispISODATA=function(t,e){const a=new Controller(e);let n=null;t.append("span").text(" init k "),t.append("input").attr("type","number").attr("name","init_k").attr("min",1).attr("max",100).attr("value",20),t.append("span").text(" max k "),t.append("input").attr("type","number").attr("name","max_k").attr("min",2).attr("max",100).attr("value",100),t.append("span").text(" min k "),t.append("input").attr("type","number").attr("name","min_k").attr("min",1).attr("max",100).attr("value",2),t.append("span").text(" min n "),t.append("input").attr("type","number").attr("name","min_n").attr("min",1).attr("max",100).attr("value",2),t.append("span").text(" split std "),t.append("input").attr("type","number").attr("name","spl_std").attr("min",.01).attr("max",100).attr("step",.01).attr("value",1),t.append("span").text(" merge dist "),t.append("input").attr("type","number").attr("name","merge_dist").attr("min",.01).attr("max",10).attr("step",.01).attr("value",.1),a.stepLoopButtons().init((()=>{n=null,t.select("[name=clusters]").text(0),e.init()})).step((a=>{e.fit(((p,r,i)=>{if(!n){const e=+t.select("[name=init_k]").property("value"),a=+t.select("[name=max_k]").property("value"),r=+t.select("[name=min_k]").property("value"),i=+t.select("[name=min_n]").property("value"),m=+t.select("[name=spl_std]").property("value"),s=+t.select("[name=merge_dist]").property("value");n=new ISODATA(e,r,a,i,m,s),n.init(p)}n.fit(p);i(n.predict(p).map((t=>t+1))),t.select("[name=clusters]").text(n.size),e.centroids(n.centroids,n.centroids.map(((t,e)=>e+1)),{line:!0}),a&&a()}))})).epoch(),t.append("span").text(" Clusters: "),t.append("span").attr("name","clusters")};export default function(t){t.setting.ml.usage='Click and add data point. Then, click "Step" button repeatedly.',dispISODATA(t.setting.ml.configElement,t)}