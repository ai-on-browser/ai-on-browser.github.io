import PLSA from"../../lib/model/plsa.js";import Matrix from"../../lib/util/matrix.js";import Controller from"../controller.js";var dispPLSA=function(t,e){const i=new Controller(e);let n=null;t.append("span").text("topics"),t.append("input").attr("type","number").attr("name","topics").attr("max",100).attr("min",1).attr("value",5),i.stepLoopButtons().init((()=>{n=null,e.init()})).step((i=>{e.fit(((e,o,a)=>{const r=Matrix.fromArray(e),l=r.max(0).value,p=r.min(0).value;if(e=e.map((t=>t.map(((t,e)=>Math.floor((t-p[e])/(l[e]-p[e])*19)+20*e)))),!n){const i=+t.select("[name=topics]").property("value");n=new PLSA(i),n.init(e)}n.fit(),a(n.predict().map((t=>t+1))),i&&i()}))})).epoch()};export default function(t){t.setting.ml.usage='Click and add data point. Next, click "Add centroid" to add centroid. Finally, click "Step" button repeatedly.',dispPLSA(t.setting.ml.configElement,t)}