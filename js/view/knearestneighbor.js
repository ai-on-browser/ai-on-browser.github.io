var I=Object.defineProperty;var h=(e,c)=>I(e,"name",{value:c,configurable:!0});import{KNN as w,KNNAnomaly as v,KNNDensityEstimation as N,KNNRegression as p,SemiSupervisedKNN as C}from"../../lib/model/knearestneighbor.js";import R from"../controller.js";export default function b(e){e.setting.ml.usage='Click and add data point. Then, click "Calculate".';const c=new R(e),i=e.task;let s=5;const d=h(()=>{if(i==="CF"){if(e.datas.length===0)return;const t=new w(s,l.value);t.fit(e.trainInput,e.trainOutput.map(u=>u[0]));const n=t.predict(e.testInput(4));e.testResult(n)}else if(i==="RG"){const t=e.datas.dimension,n=new p(s,l.value);n.fit(e.trainInput,e.trainOutput.map(a=>a[0]));const u=n.predict(e.testInput(t===1?1:4));e.testResult(u)}else if(i==="AD"){const t=new v(s+1,l.value);t.fit(e.trainInput);const n=t.predict(e.trainInput).map(u=>u>r.value);e.trainResult=n}else if(i==="DE"){const t=new N(s+1,l.value);t.fit(e.trainInput);const n=t.predict(e.testInput(5));e.testResult(n)}else if(i==="CP"){const t=new v(s+1,l.value),n=e.trainInput.rolling(o.value);t.fit(n);const u=t.predict(n);for(let a=0;a<o.value/2;a++)u.unshift(0);e.trainResult=u,e.threshold=r.value}else if(i==="SC"){const t=new C(s,l.value);t.fit(e.trainInput,e.trainOutput.map(n=>n[0])),e.trainResult=t.predict()}else if(i==="IN"){const t=new p(1,"euclid");t.fit(e.trainInput,e.trainOutput.map(u=>u[0]));const n=t.predict(e.testInput(1));e.testResult(n)}},"calcKnn"),l=c.select(["euclid","manhattan","chebyshev"]);if(i!=="IN"){const t=c.input.number({label:" k = ",min:1,max:100,value:s}).on("change",()=>{s=t.value})}let o=null;i==="CP"&&(o=c.input.number({label:" window = ",min:1,max:100,value:10}).on("change",()=>{d()}));let r=null;(i==="AD"||i==="CP")&&(r=c.input.number({label:" threshold = ",min:.001,max:10,step:.001,value:i==="AD"?.05:.4}).on("change",()=>{d()})),c.input.button("Calculate").on("click",d)}h(b,"default");
