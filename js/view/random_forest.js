import{DecisionTreeClassifier,DecisionTreeRegression}from"../../lib/model/decision_tree.js";import RandomForest from"../../lib/model/random_forest.js";var dispRandomForest=function(e,t){const n=t.task;let a=null;const r=function(){t.predict(((e,t)=>{t(a.predict(e))}),4,1)},p="CF"===n?["CART","ID3"]:["CART"];e.append("select").attr("name","method").selectAll("option").data(p).enter().append("option").attr("value",(e=>e)).text((e=>e)),e.append("span").text(" Tree #"),e.append("input").attr("type","number").attr("name","tree_num").property("value",50).attr("min",1).attr("max",200),e.append("span").text(" Sampling rate "),e.append("input").attr("type","number").attr("name","srate").property("value",.2).attr("min",.1).attr("max",1).attr("step",.1),e.append("input").attr("type","button").attr("value","Initialize").on("click",(()=>{if(0===t.datas.length)return a=null,void e.select("[name=depthnumber]").text("0");const p=+e.select("input[name=tree_num]").property("value"),i=+e.select("input[name=srate]").property("value");if("CF"===n){const t=e.select("[name=method]").property("value");a=new RandomForest(p,i,DecisionTreeClassifier,[t])}else a=new RandomForest(p,i,DecisionTreeRegression);t.fit(((e,t)=>{a.init(e,t.map((e=>e[0])))})),r(),e.select("[name=depthnumber]").text(a.depth)})),e.append("input").attr("type","button").attr("value","Separate").on("click",(()=>{a&&(a.fit(),r(),e.select("[name=depthnumber]").text(a.depth))})),e.append("span").attr("name","depthnumber").text("0"),e.append("span").text(" depth ")};export default function(e){e.setting.ml.usage='Click and add data point. Next, click "Initialize". Finally, click "Separate".',dispRandomForest(e.setting.ml.configElement,e)}