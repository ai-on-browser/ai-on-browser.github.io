var _=Object.defineProperty;var o=(e,t)=>_(e,"name",{value:t,configurable:!0});import l from"../../lib/model/q_learning.js";import w from"../controller.js";var x=o(function(e,t){const d=new w(t),i=t.type==="grid"?Math.max(...t.env.size):20;let r=new l(t,i),s=t.reset(r);t.render(()=>r.get_score());const p=o((n=!0)=>{const m=+e.select("[name=greedy_rate]").property("value"),u=r.get_action(s,m),{state:c,reward:f,done:y}=t.step(u,r);return r.update(u,s,c,f),n&&(t.epoch%10===0?t.render(()=>r.get_score()):t.render()),s=c,y},"step"),a=o(()=>{s=t.reset(r),t.render(()=>r.get_score())},"reset");e.append("span").text("Resolution"),e.append("input").attr("type","number").attr("name","resolution").attr("min",2).attr("max",100).attr("value",i);const g=d.stepLoopButtons().init(()=>{const n=+e.select("[name=resolution]").property("value");r=new l(t,n),a()});e.append("input").attr("type","button").attr("value","Reset").on("click",a),e.append("input").attr("type","number").attr("name","greedy_rate").attr("min",0).attr("max",1).attr("step","0.01").attr("value",.02),g.step(n=>{p()?setTimeout(()=>{a(),n&&setTimeout(n,10)}):n&&setTimeout(n,5)}).skip(()=>{p(!1)&&a()}),t.plotRewards(e)},"dispQLearning");export default function R(e){e.setting.ml.usage='Click "step" to update.',x(e.setting.ml.configElement,e)}o(R,"default");
