var b=Object.defineProperty;var a=(t,r)=>b(t,"name",{value:r,configurable:!0});import h from"../../lib/model/mean_shift.js";import v from"../controller.js";import{getCategoryColor as k}from"../utils.js";export default function w(t){t.setting.ml.usage='Click and add data point. Finally, click "Step" button repeatedly.',t.setting.ml.reference={title:"Mean shift (Wikipedia)",url:"https://en.wikipedia.org/wiki/Mean_shift"};let r=null;t.task!=="SG"&&(r=document.createElementNS("http://www.w3.org/2000/svg","g"),t.svg.insertBefore(r,t.svg.firstChild),r.classList.add("centroids"),r.setAttribute("opacity",.8));const o=new v(t);let l=[],i=null;const u=a(()=>{const s=t._renderer[0].scale?.[0]??0,c=i.predict(d.value);t.trainResult=c.map(e=>e+1);for(let e=0;e<l.length;e++)l[e].setAttribute("stroke",k(c[e]+1)),l[e].setAttribute("cx",i._centroids[e][0]*s),l[e].setAttribute("cy",i._centroids[e][1]*s)},"plot"),p=o.input.number({label:"h",min:0,max:10,step:.01,value:.1}),d=o.input.number({label:"threshold",min:0,max:10,step:.01,value:.01});o.stepLoopButtons().init(()=>{const s=t._renderer[0].scale?.[0]??0;i=new h(p.value,d.value);let c=t.trainInput;t.task==="SG"&&(c=c.flat()),i.init(c),t.task!=="SG"&&s>0&&(l.forEach(e=>e.remove()),l=t._renderer[0].points.map(e=>{const n=document.createElementNS("http://www.w3.org/2000/svg","circle");return n.setAttribute("cx",e.at[0]*s),n.setAttribute("cy",e.at[1]*s),n.setAttribute("r",i.h*s),n.setAttribute("stroke","black"),n.setAttribute("fill-opacity",0),n.setAttribute("stroke-opacity",.5),r.append(n),n})),u(),g.value=i.categories}).step(s=>{i!==null&&(i.fit(),u(),g.value=i.categories,s&&s())});const g=o.text({label:" clusters ",value:0});t.setting.terminate=()=>{r?.remove()}}a(w,"default");
