var b=Object.defineProperty;var a=(t,s)=>b(t,"name",{value:s,configurable:!0});import h from"../../lib/model/mean_shift.js";import v from"../controller.js";import{getCategoryColor as k}from"../utils.js";export default function w(t){t.setting.ml.usage='Click and add data point. Finally, click "Step" button repeatedly.',t.setting.ml.reference={title:"Mean shift (Wikipedia)",url:"https://en.wikipedia.org/wiki/Mean_shift"};let s=null;t.task!=="SG"&&(s=document.createElementNS("http://www.w3.org/2000/svg","g"),t.svg.insertBefore(s,t.svg.firstChild),s.classList.add("centroids"),s.setAttribute("opacity",.8));const o=new v(t);let l=[],i=null;const u=a(()=>{const r=t._renderer[0].scale?.[0]??0,c=i.predict(d.value);t.trainResult=c.map(e=>e+1);for(let e=0;e<l.length;e++)l[e].setAttribute("stroke",k(c[e]+1)),l[e].setAttribute("cx",i._centroids[e][0]*r),l[e].setAttribute("cy",i._centroids[e][1]*r)},"plot"),g=o.input.number({label:"h",min:0,max:10,step:.01,value:.1}),d=o.input.number({label:"threshold",min:0,max:10,step:.01,value:.01});o.stepLoopButtons().init(()=>{const r=t._renderer[0].scale?.[0]??0;i=new h(g.value,d.value);let c=t.trainInput;t.task==="SG"&&(c=c.flat()),i.init(c),t.task!=="SG"&&r>0&&(l.forEach(e=>e.remove()),l=t._renderer[0].points.map(e=>{const n=document.createElementNS("http://www.w3.org/2000/svg","circle");return n.setAttribute("cx",e.at[0]*r),n.setAttribute("cy",e.at[1]*r),n.setAttribute("r",i.h*r),n.setAttribute("stroke","black"),n.setAttribute("fill-opacity",0),n.setAttribute("stroke-opacity",.5),s.append(n),n})),u(),p.value=i.categories}).step(r=>{i!==null&&(i.fit(),u(),p.value=i.categories,r&&r())});const p=o.text({label:" clusters ",value:0});return()=>{s?.remove()}}a(w,"default");
