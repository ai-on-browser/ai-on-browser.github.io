var g=Object.defineProperty;var a=(t,r)=>g(t,"name",{value:r,configurable:!0});import h from"../../lib/model/mean_shift.js";import v from"../controller.js";import{getCategoryColor as k}from"../utils.js";export default function w(t){t.setting.ml.usage='Click and add data point. Finally, click "Step" button repeatedly.',t.setting.ml.reference={title:"Mean shift (Wikipedia)",url:"https://en.wikipedia.org/wiki/Mean_shift"};let r=null;t.task!=="SG"&&(r=document.createElementNS("http://www.w3.org/2000/svg","g"),t.svg.insertBefore(r,t.svg.firstChild),r.classList.add("centroids"),r.setAttribute("opacity",.8));const o=new v(t);let l=[],i=null;const u=a(()=>{const n=t._renderer[0].scale?.[0]??0,c=i.predict(d.value);t.trainResult=c.map(e=>e+1);for(let e=0;e<l.length;e++)l[e].setAttribute("stroke",k(c[e]+1)),l[e].setAttribute("cx",i._centroids[e][0]*n),l[e].setAttribute("cy",i._centroids[e][1]*n)},"plot"),b=o.input.number({label:"h",min:0,max:10,step:.01,value:.1}),d=o.input.number({label:"threshold",min:0,max:10,step:.01,value:.01});o.stepLoopButtons().init(()=>{const n=t._renderer[0].scale?.[0]??0;i=new h(b.value,d.value);let c=t.trainInput;t.task==="SG"&&(c=c.flat()),i.init(c),t.task!=="SG"&&n>0&&(l.forEach(e=>e.remove()),l=t._renderer[0].points.map(e=>{const s=document.createElementNS("http://www.w3.org/2000/svg","circle");return s.setAttribute("cx",e.at[0]*n),s.setAttribute("cy",e.at[1]*n),s.setAttribute("r",i.h*n),s.setAttribute("stroke","black"),s.setAttribute("fill-opacity",0),s.setAttribute("stroke-opacity",.5),r.append(s),s})),u(),p.value=i.categories}).step(()=>{i!==null&&(i.fit(),u(),p.value=i.categories)});const p=o.text({label:" clusters ",value:0});return()=>{r?.remove()}}a(w,"default");
