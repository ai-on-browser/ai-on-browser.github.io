import{KMeansModel}from"../../lib/model/kmeans.js";import NeuralGas from"../../lib/model/neural_gas.js";var dispNeuralGas=function(t,e){const a=new KMeansModel;a.method=new NeuralGas;const n=()=>{e.predict(((e,n)=>{n(a.predict(e).map((t=>t+1))),t.select("[name=l]").property("value",a.method._l)}),4)},r=e.setting.ml.controller.stepLoopButtons().init((()=>{const n=+t.select("[name=l]").property("value"),r=+t.select("[name=m]").property("value");a.method=new NeuralGas(n,r),a.clear(),t.select("[name=clusternumber]").text(a.size+" clusters"),e.init()}));t.append("input").attr("type","button").attr("value","Add centroid").on("click",(()=>{a.add(e.datas.x),e.fit(((t,e,n)=>{n(a.predict(t).map((t=>t+1)))})),e.centroids(a.centroids,a.centroids.map(((t,e)=>e+1)),{line:!0}),n(),t.select("[name=clusternumber]").text(a.size+" clusters")})),t.append("span").attr("name","clusternumber").style("padding","0 10px").text("0 clusters"),t.append("span").text(" l "),t.append("input").attr("type","number").attr("name","l").attr("max",10).attr("step",.1).attr("value",1).on("change",(()=>{const e=+t.select("[name=l]").property("value");a.method._l=e})),t.append("span").text("*="),t.append("input").attr("type","number").attr("name","m").attr("max",1).attr("min",.01).attr("step",.01).attr("value",.99).on("change",(()=>{const e=+t.select("[name=m]").property("value");a.method._m=e})),r.step((t=>{0!==a.size?(e.fit(((t,n,r)=>{a.fit(t);r(a.predict(e.datas.x).map((t=>t+1)))})),e.centroids(a.centroids,a.centroids.map(((t,e)=>e+1)),{line:!0,duration:100}),n(),t&&setTimeout(t,100)):t&&t()}))};export default function(t){t.setting.ml.usage='Click and add data point. Next, click "Add centroid" to add centroid. Finally, click "Step" button repeatedly.',dispNeuralGas(t.setting.ml.configElement,t)}