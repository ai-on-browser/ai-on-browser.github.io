import BalancedHistogramThresholding from"../../lib/model/balanced_histogram.js";import Controller from"../controller.js";import{specialCategory}from"../utils.js";export default function(t){t.setting.ml.usage='Click "Fit" button.',t.colorSpace="gray";const e=new Controller(t),o=()=>{const e=t._step;t._step=1;const o=new BalancedHistogramThresholding(n.value);let a=o.predict(t.trainInput.flat(2));l.value=o._t,t.trainResult=a.map((t=>specialCategory.density(1-t))),t._step=e},n=e.input.number({label:" ignore min count ",min:0,max:1e4,value:100}).on("change",o);e.input.button("Fit").on("click",o);const l=e.text({label:" Estimated threshold "})}