import BalancedHistogramThresholding from"../../lib/model/balanced_histogram.js";import Controller from"../controller.js";import{specialCategory}from"../utils.js";export default function(t){t.setting.ml.usage='Click "Fit" button.',t.setting.ml.reference={title:"Balanced histogram thresholding (Wikipedia)",url:"https://en.wikipedia.org/wiki/Balanced_histogram_thresholding"},t.colorSpace="gray";const e=new Controller(t),i=()=>{const e=t._step;t._step=1;const i=new BalancedHistogramThresholding(n.value);let l=i.predict(t.trainInput.flat(2));o.value=i._t,t.trainResult=l.map((t=>specialCategory.density(1-t))),t._step=e},n=e.input.number({label:" ignore min count ",min:0,max:1e4,value:100}).on("change",i);e.input.button("Fit").on("click",i);const o=e.text({label:" Estimated threshold "})}