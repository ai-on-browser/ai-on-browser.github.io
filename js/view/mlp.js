var P=Object.defineProperty;var r=(e,n)=>P(e,"name",{value:n,configurable:!0});import L from"../../lib/util/matrix.js";import k from"../controller.js";import{MLPClassifier as I,MLPRegressor as T}from"../../lib/model/mlp.js";export default function F(e){e.setting.ml.usage='Click and add data point. Next, click "Initialize". Finally, click "Fit" button repeatedly.';const n=new k(e),i=e.task;let l=null;const h=r(()=>{const s=f();let a=e.trainInput,o=e.trainOutput;const u=L.fromArray(a);if(i==="TP"){o=a.slice(s),a=[];for(let t=0;t<u.rows-s;t++)a.push(u.slice(t,t+s).value)}i==="CF"&&(o=o.map(t=>t[0]));const C=l.fit(a,o,+g.value,w.value,y.value);if(e.plotLoss(C),i==="TP"){let t=u.slice(u.rows-s).value;const d=[];for(;;){if(d.length>=c.value){e.trainResult=d;return}const b=l.predict([t]);d.push(b[0]),t=t.slice(u.cols),t.push(...b[0])}}else{const t=l.predict(e.testInput(s===1?2:4));e.testResult(t)}},"fitModel"),f=r(()=>i==="TP"?p.value:e.datas.dimension||2,"getInputDim");let p=null;i==="TP"&&(p=n.input.number({label:"window width",min:1,max:1e3,value:20}));const v=n.array({label:" Hidden Layers ",type:"number",values:[10],default:10,min:1,max:100}),m=n.select({label:" Activation ",values:["sigmoid","tanh","relu","elu","leaky_relu","gaussian","softplus","softsign","identity"]}),x=n.stepLoopButtons().init(()=>{e.datas.length!==0&&(i==="CF"?l=new I(v.value,m.value):l=new T(v.value,m.value),e.init())}),g=n.select({label:" Iteration ",values:[1,10,100,1e3,1e4]}),w=n.input.number({label:" Learning rate ",min:0,max:100,step:.01,value:.001}),y=n.input.number({label:" Batch size ",min:1,max:100,value:10});x.step(h).epoch(()=>l.epoch);let c;return i==="TP"?c=n.input.number({label:" predict count",min:1,max:1e3,value:100}):c=n.input({type:"hidden",value:0}),()=>{l.terminate()}}r(F,"default");
