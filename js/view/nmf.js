import NMF from"../../lib/model/nmf.js";import Matrix from"../../lib/util/matrix.js";import Controller from"../controller.js";var dispNMF=function(t,i){const e=new Controller(i);let n=null;"CT"===i.task&&(t.append("span").text(" Size "),t.append("input").attr("type","number").attr("name","k").attr("value",10).attr("min",1).attr("max",100)),e.stepLoopButtons().init((()=>{n=null,i.init()})).step((e=>{i.fit(((r,a,o)=>{if("CT"===i.task){if(!n){n=new NMF;const i=+t.select("[name=k]").property("value");n.init(r,i)}n.fit();o(Matrix.fromArray(n.predict()).argmax(1).value.map((t=>t+1)))}else{if(!n){n=new NMF;const t=i.dimension;n.init(r,t)}n.fit();o(n.predict())}e&&e()}))})).epoch()};export default function(t){t.setting.ml.usage='Click and add data point. Next, click "Fit" button.',dispNMF(t.setting.ml.configElement,t)}