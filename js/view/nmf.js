import NMF from"../../lib/model/nmf.js";import Matrix from"../../lib/util/matrix.js";import Controller from"../controller.js";var dispNMF=function(t,n){const i=new Controller(n);let e=null;"CT"===n.task&&(t.append("span").text(" Size "),t.append("input").attr("type","number").attr("name","k").attr("value",10).attr("min",1).attr("max",100)),i.stepLoopButtons().init((()=>{e=null,n.init()})).step((i=>{if("CT"===n.task){if(!e){e=new NMF;const i=+t.select("[name=k]").property("value");e.init(n.trainInput,i)}e.fit();const i=Matrix.fromArray(e.predict());n.trainResult=i.argmax(1).value.map((t=>t+1))}else{if(!e){e=new NMF;const t=n.dimension;e.init(n.trainInput,t)}e.fit();const t=e.predict();n.trainResult=t}i&&i()})).epoch()};export default function(t){t.setting.ml.usage='Click and add data point. Next, click "Fit" button.',dispNMF(t.setting.ml.configElement,t)}