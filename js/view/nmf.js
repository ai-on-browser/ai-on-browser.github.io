import NMF from"../../lib/model/nmf.js";import Matrix from"../../lib/util/matrix.js";var dispNMF=function(t,i){let e=null;"CT"===i.task&&(t.append("span").text(" Size "),t.append("input").attr("type","number").attr("name","k").attr("value",10).attr("min",1).attr("max",100)),i.setting.ml.controller.stepLoopButtons().init((()=>{e=null,i.init()})).step((n=>{i.fit(((a,r,l)=>{if("CT"===i.task){if(!e){e=new NMF;const i=+t.select("[name=k]").property("value");e.init(a,i)}e.fit();l(Matrix.fromArray(e.predict()).argmax(1).value.map((t=>t+1)))}else{if(!e){e=new NMF;const t=i.dimension;e.init(a,t)}e.fit();l(e.predict())}n&&n()}))})).epoch()};export default function(t){t.setting.ml.usage='Click and add data point. Next, click "Fit" button.',dispNMF(t.setting.ml.configElement,t)}