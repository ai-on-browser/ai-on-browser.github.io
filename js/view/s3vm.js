import S3VM from"../../lib/model/s3vm.js";import Controller from"../controller.js";var dispS3VM=function(t,e){const a=new Controller(e);let n=null;t.append("select").attr("name","kernel").on("change",(function(){"gaussian"===d3.select(this).property("value")?t.select("input[name=gamma]").style("display","inline"):t.select("input[name=gamma]").style("display","none")})).selectAll("option").data(["gaussian","linear"]).enter().append("option").property("value",(t=>t)).text((t=>t)),t.append("input").attr("type","number").attr("name","gamma").attr("value",.1).attr("min",.01).attr("max",10).attr("step",.01);const r=a.stepLoopButtons().init((()=>{const a=t.select("[name=kernel]").property("value"),r=[];"gaussian"===a&&r.push(+t.select("input[name=gamma]").property("value")),n=new S3VM(a,r),n.init(e.trainInput,e.trainOutput.map((t=>null==t[0]?null:1===t[0]?-1:1))),e.init()}));t.append("span").text("learning rate = max("),t.append("input").attr("type","number").attr("name","min_learning_rate").attr("min",0).attr("max",1).attr("step",.01).attr("value",0),t.append("span").text(", "),t.append("input").attr("type","number").attr("name","learning_rate").attr("min",0).attr("max",1).attr("step",.1).attr("value",.1),t.append("span").text(" * "),t.append("input").attr("type","number").attr("name","learning_rate_update").attr("min",0).attr("max",1).attr("step","0.01").attr("value",.999),t.append("span").text(") "),r.step((a=>{const r=+t.select("[name=learning_rate]").property("value"),p=+t.select("[name=min_learning_rate]").property("value"),l=+t.select("[name=learning_rate_update]").property("value");n._rate=Math.max(p,r),n.fit();const i=n.predict(e.testInput(4));t.select("[name=learning_rate]").property("value",r*l),e.testResult(i.map((t=>t<0?1:2))),a&&a()})).epoch()};export default function(t){t.setting.ml.usage='Currently, this model works only with binary classification. Click and add data point. Finally, click "Step" button repeatedly.',dispS3VM(t.setting.ml.configElement,t)}