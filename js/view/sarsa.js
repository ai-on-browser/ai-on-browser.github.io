import SARSAAgent from"../../lib/model/sarsa.js";var dispSARSA=function(t,e){const r="grid"===e.type?Math.max(...e.env.size):20;let n=new SARSAAgent(e,r),a=e.reset(n);e.render((()=>n.get_score()));const s=(r=!0)=>{const s=+t.select("[name=greedy_rate]").property("value"),o=n.get_action(a,s),{state:p,reward:i,done:u}=e.step(o,n);return n.update(o,a,p,i),r&&(e.epoch%10==0?e.render((()=>n.get_score())):e.render()),a=p,u&&n.reset(),u},o=()=>{a=e.reset(n),e.render((()=>n.get_score()))};t.append("span").text("Resolution"),t.append("input").attr("type","number").attr("name","resolution").attr("min",2).attr("max",100).attr("value",r);const p=e.setting.ml.controller.stepLoopButtons().init((()=>{const r=+t.select("[name=resolution]").property("value");n=new SARSAAgent(e,r),o()}));t.append("input").attr("type","button").attr("value","Reset").on("click",o),t.append("input").attr("type","number").attr("name","greedy_rate").attr("min",0).attr("max",1).attr("step","0.01").attr("value",.02),p.step((t=>{s()?setTimeout((()=>{o(),t&&setTimeout(t,10)})):t&&setTimeout(t,5)})).skip((()=>{s(!1)&&o()})),e.plotRewards(t)};export default function(t){t.setting.ml.usage='Click "step" to update.',dispSARSA(t.setting.ml.configElement,t)}