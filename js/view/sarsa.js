var _=Object.defineProperty;var s=(e,t)=>_(e,"name",{value:t,configurable:!0});import d from"../../lib/model/sarsa.js";import R from"../controller.js";var w=s(function(e,t){const g=new R(t),i=t.type==="grid"?Math.max(...t.env.size):20;let r=new d(t,i),n=t.reset(r);t.render(()=>r.get_score());const p=s((o=!0)=>{const f=+e.select("[name=greedy_rate]").property("value"),u=r.get_action(n,f),{state:c,reward:y,done:l}=t.step(u,r);return r.update(u,n,c,y),o&&(t.epoch%10===0?t.render(()=>r.get_score()):t.render()),n=c,l&&r.reset(),l},"step"),a=s(()=>{n=t.reset(r),t.render(()=>r.get_score())},"reset");e.append("span").text("Resolution"),e.append("input").attr("type","number").attr("name","resolution").attr("min",2).attr("max",100).attr("value",i);const m=g.stepLoopButtons().init(()=>{const o=+e.select("[name=resolution]").property("value");r=new d(t,o),a()});e.append("input").attr("type","button").attr("value","Reset").on("click",a),e.append("input").attr("type","number").attr("name","greedy_rate").attr("min",0).attr("max",1).attr("step","0.01").attr("value",.02),m.step(o=>{p()?setTimeout(()=>{a(),o&&setTimeout(o,10)}):o&&setTimeout(o,5)}).skip(()=>{p(!1)&&a()}),t.plotRewards(e)},"dispSARSA");export default function x(e){e.setting.ml.usage='Click "step" to update.',w(e.setting.ml.configElement,e)}s(x,"default");
