import WeightedKMeans from"../../lib/model/weighted_kmeans.js";import Controller from"../controller.js";var dispWKMeans=function(t,e){const n=new Controller(e);let a=null;t.append("span").text("beta"),t.append("input").attr("name","beta").attr("type","number").attr("min",1).attr("max",10).attr("step",.1).attr("value",2);const i=n.stepLoopButtons().init((()=>{e.init();const n=+t.select("[name=beta]").property("value");a=new WeightedKMeans(n),t.select("[name=clusternumber]").text(a.size+" clusters")}));t.append("input").attr("type","button").attr("value","Add centroid").on("click",(()=>{e.fit(((t,e,n)=>{a.add(t);n(a.predict(t).map((t=>t+1)))})),e.centroids(a.centroids,a.centroids.map(((t,e)=>e+1)),{line:!0}),t.select("[name=clusternumber]").text(a.size+" clusters")})),t.append("span").attr("name","clusternumber").style("padding","0 10px").text("0 clusters"),i.step((t=>{0!==a.size?(e.fit(((t,e,n)=>{a.fit(t,e.map((t=>t[0])));n(a.predict(t).map((t=>t+1)))})),e.centroids(a.centroids,a.centroids.map(((t,e)=>e+1)),{line:!0,duration:1e3}),t&&setTimeout(t,1e3)):t&&t()})),t.append("input").attr("type","button").attr("value","Skip").on("click",(()=>{e.fit(((t,e,n)=>{for(e=e.map((t=>t[0]));a.fit(t,e)>1e-8;);n(a.predict(t).map((t=>t+1)))})),e.centroids(a.centroids,a.centroids.map(((t,e)=>e+1)),{line:!0,duration:1e3})}))};export default function(t){t.setting.ml.usage='Click and add data point. Then, click "Step" button repeatedly.',dispWKMeans(t.setting.ml.configElement,t)}